var _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};(function(n,t){(typeof exports=="undefined"?"undefined":_typeof(exports))==="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(t):n.Tabulator=t()})(this,function(){"use strict";var o,c,r,t,d,h,u,p,s,lt,n,ti,it,ui,ii,v,dt,w,et,b,ni,rt,y,at,ot,vt,ut,f,k,ct,gt,pt,ft,yt,a,bt,l,nt,ri,wt,fi,ei,oi,st,tt,ht,kt;Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(n){var i,r,u,t,f;if(this==null)throw new TypeError('"this" is null or not defined');if(i=Object(this),r=i.length>>>0,typeof n!="function")throw new TypeError("predicate must be a function");for(u=arguments[1],t=0;t<r;){if(f=i[t],n.call(u,f,t,i))return t;t++}return-1}});Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(n){var i,u,f,t,r;if(this==null)throw new TypeError('"this" is null or not defined');if(i=Object(this),u=i.length>>>0,typeof n!="function")throw new TypeError("predicate must be a function");for(f=arguments[1],t=0;t<u;){if(r=i[t],n.call(f,r,t,i))return r;t++}return undefined}});String.prototype.includes||(String.prototype.includes=function(n,t){if(n instanceof RegExp)throw TypeError("first argument must not be a RegExp");return t===undefined&&(t=0),this.indexOf(n,t)!==-1});Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(n,t){function e(n,t){return n===t||typeof n=="number"&&typeof t=="number"&&isNaN(n)&&isNaN(t)}var f,i,r,u;if(this==null)throw new TypeError('"this" is null or not defined');if(f=Object(this),i=f.length>>>0,i===0)return!1;for(r=t|0,u=Math.max(r>=0?r:i-Math.abs(r),0);u<i;){if(e(f[u],n))return!0;u++}return!1}});typeof Object.assign!="function"&&Object.defineProperty(Object,"assign",{value:function(n){var u,i,t,r;if(n===null||n===undefined)throw new TypeError("Cannot convert undefined or null to object");for(u=Object(n),i=1;i<arguments.length;i++)if(t=arguments[i],t!==null&&t!==undefined)for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(u[r]=t[r]);return u},writable:!0,configurable:!0});o=function(n){this.table=n;this.blockHozScrollEvent=!1;this.headersElement=this.createHeadersElement();this.element=this.createHeaderElement();this.rowManager=null;this.columns=[];this.columnsByIndex=[];this.columnsByField={};this.scrollLeft=0;this.element.insertBefore(this.headersElement,this.element.firstChild)};o.prototype.createHeadersElement=function(){var n=document.createElement("div");return n.classList.add("tabulator-headers"),n};o.prototype.createHeaderElement=function(){var n=document.createElement("div");return n.classList.add("tabulator-header"),this.table.options.headerVisible||n.classList.add("tabulator-header-hidden"),n};o.prototype.initialize=function(){var n=this};o.prototype.setRowManager=function(n){this.rowManager=n};o.prototype.getElement=function(){return this.element};o.prototype.getHeadersElement=function(){return this.headersElement};o.prototype.scrollHorizontal=function(n){var t=0,i=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=n;n>i?(t=n-i,this.element.style.marginLeft=-t+"px"):this.element.style.marginLeft=0;this.scrollLeft=n;this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.scrollHorizontal()};o.prototype.generateColumnsFromRowData=function(n){var r=[],t=this.table.options.autoColumnsDefinitions,e,u,f,o,i;if(n&&n.length){e=n[0];for(f in e){o={field:f,title:f};i=e[f];switch(typeof i=="undefined"?"undefined":_typeof(i)){case"undefined":u="string";break;case"boolean":u="boolean";break;case"object":u=Array.isArray(i)?"array":"string";break;default:u=isNaN(i)||i===""?i.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?"alphanum":"string":"number"}o.sorter=u;r.push(o)}if(t)switch(typeof t=="undefined"?"undefined":_typeof(t)){case"function":this.table.options.columns=t.call(this.table,r);break;case"object":Array.isArray(t)?r.forEach(function(n){var i=t.find(function(t){return t.field===n.field});i&&Object.assign(n,i)}):r.forEach(function(n){t[n.field]&&Object.assign(n,t[n.field])});this.table.options.columns=r}else this.table.options.columns=r;this.setColumns(this.table.options.columns)}};o.prototype.setColumns=function(n){for(var t=this;t.headersElement.firstChild;)t.headersElement.removeChild(t.headersElement.firstChild);t.columns=[];t.columnsByIndex=[];t.columnsByField={};t.table.modExists("frozenColumns")&&t.table.modules.frozenColumns.reset();n.forEach(function(n){t._addColumn(n)});t._reIndexColumns();t.table.options.responsiveLayout&&t.table.modExists("responsiveLayout",!0)&&t.table.modules.responsiveLayout.initialize();this.table.options.virtualDomHoz&&this.table.vdomHoz.reinitialize(!1,!0);t.redraw(!0)};o.prototype._addColumn=function(n,t,i){var u=new r(n,this),o=u.getElement(),s=i?this.findColumnIndex(i):i,e,f;return i&&s>-1?(e=this.columns.indexOf(i.getTopColumn()),f=i.getElement(),t?(this.columns.splice(e,0,u),f.parentNode.insertBefore(o,f)):(this.columns.splice(e+1,0,u),f.parentNode.insertBefore(o,f.nextSibling))):(t?(this.columns.unshift(u),this.headersElement.insertBefore(u.getElement(),this.headersElement.firstChild)):(this.columns.push(u),this.headersElement.appendChild(u.getElement())),u.columnRendered()),u};o.prototype.registerColumnField=function(n){n.definition.field&&(this.columnsByField[n.definition.field]=n)};o.prototype.registerColumnPosition=function(n){this.columnsByIndex.push(n)};o.prototype._reIndexColumns=function(){this.columnsByIndex=[];this.columns.forEach(function(n){n.reRegisterPosition()})};o.prototype._verticalAlignHeaders=function(){var n=this,t=0;n.columns.forEach(function(n){var i;n.clearVerticalAlign();i=n.getHeight();i>t&&(t=i)});n.columns.forEach(function(i){i.verticalAlign(n.table.options.columnHeaderVertAlign,t)});n.rowManager.adjustTableSize()};o.prototype.findColumn=function(n){var i=this,t;if((typeof n=="undefined"?"undefined":_typeof(n))=="object"){if(n instanceof r)return n;if(n instanceof c)return n._getSelf()||!1;if(typeof HTMLElement!="undefined"&&n instanceof HTMLElement)return t=i.columns.find(function(t){return t.element===n}),t||!1}else return this.columnsByField[n]||!1;return!1};o.prototype.getColumnByField=function(n){return this.columnsByField[n]};o.prototype.getColumnsByFieldRoot=function(n){var i=this,t=[];return Object.keys(this.columnsByField).forEach(function(r){var u=r.split(".")[0];u===n&&t.push(i.columnsByField[r])}),t};o.prototype.getColumnByIndex=function(n){return this.columnsByIndex[n]};o.prototype.getFirstVisibileColumn=function(n){var n=this.columnsByIndex.findIndex(function(n){return n.visible});return n>-1?this.columnsByIndex[n]:!1};o.prototype.getColumns=function(){return this.columns};o.prototype.findColumnIndex=function(n){return this.columnsByIndex.findIndex(function(t){return n===t})};o.prototype.getRealColumns=function(){return this.columnsByIndex};o.prototype.traverse=function(n){var t=this;t.columnsByIndex.forEach(function(t,i){n(t,i)})};o.prototype.getDefinitions=function(n){var i=this,t=[];return i.columnsByIndex.forEach(function(i){(!n||n&&i.visible)&&t.push(i.getDefinition())}),t};o.prototype.getDefinitionTree=function(){var t=this,n=[];return t.columns.forEach(function(t){n.push(t.getDefinition(!0))}),n};o.prototype.getComponents=function(n){var t=this,i=[],r=n?t.columns:t.columnsByIndex;return r.forEach(function(n){i.push(n.getComponent())}),i};o.prototype.getWidth=function(){var n=0;return this.columnsByIndex.forEach(function(t){t.visible&&(n+=t.getWidth())}),n};o.prototype.moveColumn=function(n,t,i){this.moveColumnActual(n,t,i);this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize();this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);t.element.parentNode.insertBefore(n.element,t.element);i&&t.element.parentNode.insertBefore(t.element,n.element);this._verticalAlignHeaders();this.table.rowManager.reinitialize()};o.prototype.moveColumnActual=function(n,t,i){n.parent.isGroup?this._moveColumnInArray(n.parent.columns,n,t,i):this._moveColumnInArray(this.columns,n,t,i);this._moveColumnInArray(this.columnsByIndex,n,t,i,!0);this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize();this.table.options.virtualDomHoz&&this.table.vdomHoz.reinitialize(!0);this.table.options.columnMoved&&this.table.options.columnMoved.call(this.table,n.getComponent(),this.table.columnManager.getComponents());this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns")};o.prototype._moveColumnInArray=function(n,t,i,r,u){var s=this,o=n.indexOf(t),f,e=[];o>-1&&(n.splice(o,1),f=n.indexOf(i),f>-1?r&&(f=f+1):f=o,n.splice(f,0,t),u&&(this.table.options.dataTree&&this.table.modExists("dataTree",!0)&&this.table.rowManager.rows.forEach(function(n){e=e.concat(s.table.modules.dataTree.getTreeChildren(n,!1,!0))}),e=e.concat(this.table.rowManager.rows),e.forEach(function(n){if(n.cells.length){var t=n.cells.splice(o,1)[0];n.cells.splice(f,0,t)}})))};o.prototype.scrollToColumn=function(n,t,i){var r=this,u=0,e=0,o=0,f=n.getElement();return new Promise(function(s,h){if(typeof t=="undefined"&&(t=r.table.options.scrollToColumnPosition),typeof i=="undefined"&&(i=r.table.options.scrollToColumnIfVisible),n.visible){switch(t){case"middle":case"center":o=-r.element.clientWidth/2;break;case"right":o=f.clientWidth-r.headersElement.clientWidth}if(!i&&(e=f.offsetLeft,e>0&&e+f.offsetWidth<r.element.clientWidth))return!1;u=f.offsetLeft+o;u=Math.max(Math.min(u,r.table.rowManager.element.scrollWidth-r.table.rowManager.element.clientWidth),0);r.table.rowManager.scrollHorizontal(u);r.scrollHorizontal(u);s()}else console.warn("Scroll Error - Column not visible"),h("Scroll Error - Column not visible")})};o.prototype.generateCells=function(n){var i=this,t=[];return i.columnsByIndex.forEach(function(i){t.push(i.generateCell(n))}),t};o.prototype.getFlexBaseWidth=function(){var n=this,t=n.table.element.clientWidth,i=0;return n.rowManager.element.scrollHeight>n.rowManager.element.clientHeight&&(t-=n.rowManager.element.offsetWidth-n.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(r){var u,f,e;r.visible&&(u=r.definition.width||0,f=typeof r.minWidth=="undefined"?n.table.options.columnMinWidth:parseInt(r.minWidth),e=typeof u=="string"?u.indexOf("%")>-1?t/100*parseInt(u):parseInt(u):u,i+=e>f?e:f)}),i};o.prototype.addColumn=function(n,t,i){var r=this;return new Promise(function(u){var f=r._addColumn(n,t,i);r._reIndexColumns();r.table.options.responsiveLayout&&r.table.modExists("responsiveLayout",!0)&&r.table.modules.responsiveLayout.initialize();r.table.modExists("columnCalcs")&&r.table.modules.columnCalcs.recalc(r.table.rowManager.activeRows);r.redraw(!0);r.table.modules.layout.getMode()!="fitColumns"&&f.reinitializeWidth();r._verticalAlignHeaders();r.table.rowManager.reinitialize();r.table.options.virtualDomHoz&&r.table.vdomHoz.reinitialize();u(f)})};o.prototype.deregisterColumn=function(n){var i=n.getField(),t;i&&delete this.columnsByField[i];t=this.columnsByIndex.indexOf(n);t>-1&&this.columnsByIndex.splice(t,1);t=this.columns.indexOf(n);t>-1&&this.columns.splice(t,1);this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize();this._verticalAlignHeaders();this.redraw()};o.prototype.redraw=function(t){t&&(n.prototype.helpers.elVisible(this.element)&&this._verticalAlignHeaders(),this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize());["fitColumns","fitDataStretch"].indexOf(this.table.modules.layout.getMode())>-1?this.table.modules.layout.layout():t?this.table.modules.layout.layout():this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update();this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout();this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);t&&(this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns"),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.redraw());this.table.footerManager.redraw()};c=function(n){this._column=n;this.type="ColumnComponent"};c.prototype.getElement=function(){return this._column.getElement()};c.prototype.getDefinition=function(){return this._column.getDefinition()};c.prototype.getField=function(){return this._column.getField()};c.prototype.getCells=function(){var n=[];return this._column.cells.forEach(function(t){n.push(t.getComponent())}),n};c.prototype.getVisibility=function(){return console.warn("getVisibility function is deprecated, you should now use the isVisible function"),this._column.visible};c.prototype.isVisible=function(){return this._column.visible};c.prototype.show=function(){this._column.isGroup?this._column.columns.forEach(function(n){n.show()}):this._column.show()};c.prototype.hide=function(){this._column.isGroup?this._column.columns.forEach(function(n){n.hide()}):this._column.hide()};c.prototype.toggle=function(){this._column.visible?this.hide():this.show()};c.prototype.delete=function(){return this._column.delete()};c.prototype.getSubColumns=function(){var n=[];return this._column.columns.length&&this._column.columns.forEach(function(t){n.push(t.getComponent())}),n};c.prototype.getParentColumn=function(){return this._column.parent instanceof r?this._column.parent.getComponent():!1};c.prototype._getSelf=function(){return this._column};c.prototype.scrollTo=function(){return this._column.table.columnManager.scrollToColumn(this._column)};c.prototype.getTable=function(){return this._column.table};c.prototype.headerFilterFocus=function(){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.setHeaderFilterFocus(this._column)};c.prototype.reloadHeaderFilter=function(){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.reloadHeaderFilter(this._column)};c.prototype.getHeaderFilterValue=function(){if(this._column.table.modExists("filter",!0))return this._column.table.modules.filter.getHeaderFilterValue(this._column)};c.prototype.setHeaderFilterValue=function(n){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.setHeaderFilterValue(this._column,n)};c.prototype.move=function(n,t){var i=this._column.table.columnManager.findColumn(n);i?this._column.table.columnManager.moveColumn(this._column,i,t):console.warn("Move Error - No matching column found:",i)};c.prototype.getNextColumn=function(){var n=this._column.nextColumn();return n?n.getComponent():!1};c.prototype.getPrevColumn=function(){var n=this._column.prevColumn();return n?n.getComponent():!1};c.prototype.updateDefinition=function(n){return this._column.updateDefinition(n)};c.prototype.getWidth=function(){return this._column.getWidth()};c.prototype.setWidth=function(n){var t;return t=n===!0?this._column.reinitializeWidth(!0):this._column.setWidth(n),this._column.table.options.virtualDomHoz&&this._column.table.vdomHoz.reinitialize(!0),t};c.prototype.validate=function(){return this._column.validate()};r=function r(n,t){var i=this;this.table=t.table;this.definition=n;this.parent=t;this.type="column";this.columns=[];this.cells=[];this.element=this.createElement();this.contentElement=!1;this.titleHolderElement=!1;this.titleElement=!1;this.groupElement=this.createGroupElement();this.isGroup=!1;this.tooltip=!1;this.hozAlign="";this.vertAlign="";this.field="";this.fieldStructure="";this.getFieldValue="";this.setFieldValue="";this.titleFormatterRendered=!1;this.setField(this.definition.field);this.table.options.invalidOptionWarnings&&this.checkDefinition();this.modules={};this.cellEvents={cellClick:!1,cellDblClick:!1,cellContext:!1,cellTap:!1,cellDblTap:!1,cellTapHold:!1,cellMouseEnter:!1,cellMouseLeave:!1,cellMouseOver:!1,cellMouseOut:!1,cellMouseMove:!1};this.width=null;this.widthStyled="";this.maxWidth=null;this.maxWidthStyled="";this.minWidth=null;this.minWidthStyled="";this.widthFixed=!1;this.visible=!0;this.component=null;this._mapDepricatedFunctionality();n.columns?(this.isGroup=!0,n.columns.forEach(function(n){var t=new r(n,i);i.attachColumn(t)}),i.checkColumnVisibility()):t.registerColumnField(this);n.rowHandle&&this.table.options.movableRows!==!1&&this.table.modExists("moveRow")&&this.table.modules.moveRow.setHandle(!0);this._buildHeader();this.bindModuleColumns()};r.prototype.createElement=function(){var n=document.createElement("div");return n.classList.add("tabulator-col"),n.setAttribute("role","columnheader"),n.setAttribute("aria-sort","none"),n};r.prototype.createGroupElement=function(){var n=document.createElement("div");return n.classList.add("tabulator-col-group-cols"),n};r.prototype.checkDefinition=function(){var n=this;Object.keys(this.definition).forEach(function(t){n.defaultOptionList.indexOf(t)===-1&&console.warn("Invalid column definition option in '"+(n.field||n.definition.title)+"' column:",t)})};r.prototype.setField=function(n){this.field=n;this.fieldStructure=n?this.table.options.nestedFieldSeparator?n.split(this.table.options.nestedFieldSeparator):[n]:[];this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData;this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData};r.prototype.registerColumnPosition=function(n){this.parent.registerColumnPosition(n)};r.prototype.registerColumnField=function(n){this.parent.registerColumnField(n)};r.prototype.reRegisterPosition=function(){this.isGroup?this.columns.forEach(function(n){n.reRegisterPosition()}):this.registerColumnPosition(this)};r.prototype._mapDepricatedFunctionality=function(){typeof this.definition.hideInHtml!="undefined"&&(this.definition.htmlOutput=!this.definition.hideInHtml,console.warn("hideInHtml column definition property is deprecated, you should now use htmlOutput"));typeof this.definition.align!="undefined"&&(this.definition.hozAlign=this.definition.align,console.warn("align column definition property is deprecated, you should now use hozAlign"));typeof this.definition.downloadTitle!="undefined"&&(this.definition.titleDownload=this.definition.downloadTitle,console.warn("downloadTitle definition property is deprecated, you should now use titleDownload"))};r.prototype.setTooltip=function(){var n=this,i=n.definition,t=i.headerTooltip||i.tooltip===!1?i.headerTooltip:n.table.options.tooltipsHeader;t?t===!0?i.field?n.table.modules.localize.bind("columns|"+i.field,function(t){n.element.setAttribute("title",t||i.title)}):n.element.setAttribute("title",i.title):(typeof t=="function"&&(t=t(n.getComponent()),t===!1&&(t="")),n.element.setAttribute("title",t)):n.element.setAttribute("title","")};r.prototype._buildHeader=function(){for(var n=this,t=n.definition;n.element.firstChild;)n.element.removeChild(n.element.firstChild);t.headerVertical&&(n.element.classList.add("tabulator-col-vertical"),t.headerVertical==="flip"&&n.element.classList.add("tabulator-col-vertical-flip"));n.contentElement=n._bindEvents();n.contentElement=n._buildColumnHeaderContent();n.element.appendChild(n.contentElement);n.isGroup?n._buildGroupHeader():n._buildColumnHeader();n.setTooltip();n.table.options.resizableColumns&&n.table.modExists("resizeColumns")&&n.table.modules.resizeColumns.initializeColumn("header",n,n.element);t.headerFilter&&n.table.modExists("filter")&&n.table.modExists("edit")&&(typeof t.headerFilterPlaceholder!="undefined"&&t.field&&n.table.modules.localize.setHeaderFilterColumnPlaceholder(t.field,t.headerFilterPlaceholder),n.table.modules.filter.initializeColumn(n));n.table.modExists("frozenColumns")&&n.table.modules.frozenColumns.initializeColumn(n);n.table.options.movableColumns&&!n.isGroup&&n.table.modExists("moveColumn")&&n.table.modules.moveColumn.initializeColumn(n);(t.topCalc||t.bottomCalc)&&n.table.modExists("columnCalcs")&&n.table.modules.columnCalcs.initializeColumn(n);n.table.modExists("persistence")&&n.table.modules.persistence.config.columns&&n.table.modules.persistence.initializeColumn(n);n.element.addEventListener("mouseenter",function(){n.setTooltip()})};r.prototype._bindEvents=function(){var t=this,n=t.definition,i,r,u;typeof n.headerClick=="function"&&t.element.addEventListener("click",function(i){n.headerClick(i,t.getComponent())});typeof n.headerDblClick=="function"&&t.element.addEventListener("dblclick",function(i){n.headerDblClick(i,t.getComponent())});typeof n.headerContext=="function"&&t.element.addEventListener("contextmenu",function(i){n.headerContext(i,t.getComponent())});typeof n.headerTap=="function"&&(u=!1,t.element.addEventListener("touchstart",function(){u=!0},{passive:!0}),t.element.addEventListener("touchend",function(i){u&&n.headerTap(i,t.getComponent());u=!1}));typeof n.headerDblTap=="function"&&(i=null,t.element.addEventListener("touchend",function(r){i?(clearTimeout(i),i=null,n.headerDblTap(r,t.getComponent())):i=setTimeout(function(){clearTimeout(i);i=null},300)}));typeof n.headerTapHold=="function"&&(r=null,t.element.addEventListener("touchstart",function(i){clearTimeout(r);r=setTimeout(function(){clearTimeout(r);r=null;u=!1;n.headerTapHold(i,t.getComponent())},1e3)},{passive:!0}),t.element.addEventListener("touchend",function(){clearTimeout(r);r=null}));typeof n.cellClick=="function"&&(t.cellEvents.cellClick=n.cellClick);typeof n.cellDblClick=="function"&&(t.cellEvents.cellDblClick=n.cellDblClick);typeof n.cellContext=="function"&&(t.cellEvents.cellContext=n.cellContext);typeof n.cellMouseEnter=="function"&&(t.cellEvents.cellMouseEnter=n.cellMouseEnter);typeof n.cellMouseLeave=="function"&&(t.cellEvents.cellMouseLeave=n.cellMouseLeave);typeof n.cellMouseOver=="function"&&(t.cellEvents.cellMouseOver=n.cellMouseOver);typeof n.cellMouseOut=="function"&&(t.cellEvents.cellMouseOut=n.cellMouseOut);typeof n.cellMouseMove=="function"&&(t.cellEvents.cellMouseMove=n.cellMouseMove);typeof n.cellTap=="function"&&(t.cellEvents.cellTap=n.cellTap);typeof n.cellDblTap=="function"&&(t.cellEvents.cellDblTap=n.cellDblTap);typeof n.cellTapHold=="function"&&(t.cellEvents.cellTapHold=n.cellTapHold);typeof n.cellEdited=="function"&&(t.cellEvents.cellEdited=n.cellEdited);typeof n.cellEditing=="function"&&(t.cellEvents.cellEditing=n.cellEditing);typeof n.cellEditCancelled=="function"&&(t.cellEvents.cellEditCancelled=n.cellEditCancelled)};r.prototype._buildColumnHeader=function(){var r=this,n=this.definition,t=this.table,i;t.modExists("sort")&&t.modules.sort.initializeColumn(this,this.titleHolderElement);(n.headerContextMenu||n.headerClickMenu||n.headerMenu)&&t.modExists("menu")&&t.modules.menu.initializeColumnHeader(this);t.modExists("format")&&t.modules.format.initializeColumn(this);typeof n.editor!="undefined"&&t.modExists("edit")&&t.modules.edit.initializeColumn(this);typeof n.validator!="undefined"&&t.modExists("validate")&&t.modules.validate.initializeColumn(this);t.modExists("mutator")&&t.modules.mutator.initializeColumn(this);t.modExists("accessor")&&t.modules.accessor.initializeColumn(this);_typeof(t.options.responsiveLayout)&&t.modExists("responsiveLayout")&&t.modules.responsiveLayout.initializeColumn(this);typeof n.visible!="undefined"&&(n.visible?this.show(!0):this.hide(!0));n.cssClass&&(i=n.cssClass.split(" "),i.forEach(function(n){r.element.classList.add(n)}));n.field&&this.element.setAttribute("tabulator-field",n.field);this.setMinWidth(typeof n.minWidth=="undefined"?this.table.options.columnMinWidth:parseInt(n.minWidth));(n.maxWidth||this.table.options.columnMaxWidth)&&n.maxWidth!==!1&&this.setMaxWidth(typeof n.maxWidth=="undefined"?this.table.options.columnMaxWidth:parseInt(n.maxWidth));this.reinitializeWidth();this.tooltip=this.definition.tooltip||this.definition.tooltip===!1?this.definition.tooltip:this.table.options.tooltips;this.hozAlign=typeof this.definition.hozAlign=="undefined"?this.table.options.cellHozAlign:this.definition.hozAlign;this.vertAlign=typeof this.definition.vertAlign=="undefined"?this.table.options.cellVertAlign:this.definition.vertAlign;this.titleElement.style.textAlign=this.definition.headerHozAlign||this.table.options.headerHozAlign};r.prototype._buildColumnHeaderContent=function(){var t=this.definition,i=this.table,n=document.createElement("div");return n.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),n.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),n};r.prototype._buildColumnHeaderTitle=function(){var i=this,n=i.definition,u=i.table,r=document.createElement("div"),t;return r.classList.add("tabulator-col-title"),n.editableTitle?(t=document.createElement("input"),t.classList.add("tabulator-title-editor"),t.addEventListener("click",function(n){n.stopPropagation();t.focus()}),t.addEventListener("change",function(){n.title=t.value;u.options.columnTitleChanged.call(i.table,i.getComponent())}),r.appendChild(t),n.field?u.modules.localize.bind("columns|"+n.field,function(i){t.value=i||n.title||"&nbsp;"}):t.value=n.title||"&nbsp;"):n.field?u.modules.localize.bind("columns|"+n.field,function(t){i._formatColumnHeaderTitle(r,t||n.title||"&nbsp;")}):i._formatColumnHeaderTitle(r,n.title||"&nbsp;"),r};r.prototype._formatColumnHeaderTitle=function(n,t){var o=this,u,i,r,f,e;if(this.definition.titleFormatter&&this.table.modExists("format")){u=this.table.modules.format.getFormatter(this.definition.titleFormatter);e=function(n){o.titleFormatterRendered=n};f={getValue:function(){return t},getElement:function(){return n}};r=this.definition.titleFormatterParams||{};r=typeof r=="function"?r():r;i=u.call(this.table.modules.format,f,r,e);switch(typeof i=="undefined"?"undefined":_typeof(i)){case"object":i instanceof Node?n.appendChild(i):(n.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",i));break;case"undefined":case"null":n.innerHTML="";break;default:n.innerHTML=i}}else n.innerHTML=t};r.prototype._buildGroupHeader=function(){var t=this,n;this.element.classList.add("tabulator-col-group");this.element.setAttribute("role","columngroup");this.element.setAttribute("aria-title",this.definition.title);this.definition.cssClass&&(n=this.definition.cssClass.split(" "),n.forEach(function(n){t.element.classList.add(n)}));(this.definition.headerContextMenu||this.definition.headerMenu)&&this.table.modExists("menu")&&this.table.modules.menu.initializeColumnHeader(this);this.titleElement.style.textAlign=this.definition.headerHozAlign||this.table.options.headerHozAlign;this.element.appendChild(this.groupElement)};r.prototype._getFlatData=function(n){return n[this.field]};r.prototype._getNestedData=function(n){for(var t=n,r=this.fieldStructure,f=r.length,u,i=0;i<f;i++)if(t=t[r[i]],u=t,!t)break;return u};r.prototype._setFlatData=function(n,t){this.field&&(n[this.field]=t)};r.prototype._setNestedData=function(n,t){for(var r=n,u=this.fieldStructure,f=u.length,i=0;i<f;i++)if(i==f-1)r[u[i]]=t;else{if(!r[u[i]])if(typeof t!="undefined")r[u[i]]={};else break;r=r[u[i]]}};r.prototype.attachColumn=function(n){var t=this;t.groupElement?(t.columns.push(n),t.groupElement.appendChild(n.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")};r.prototype.verticalAlign=function(n,t){var i=this.parent.isGroup?this.parent.getGroupElement().clientHeight:t||this.parent.getHeadersElement().clientHeight;this.element.style.height=i+"px";this.isGroup&&(this.groupElement.style.minHeight=i-this.contentElement.offsetHeight+"px");this.isGroup||n==="top"||(this.element.style.paddingTop=n==="bottom"?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px");this.columns.forEach(function(t){t.verticalAlign(n)})};r.prototype.clearVerticalAlign=function(){this.element.style.paddingTop="";this.element.style.height="";this.element.style.minHeight="";this.groupElement.style.minHeight="";this.columns.forEach(function(n){n.clearVerticalAlign()})};r.prototype.bindModuleColumns=function(){this.definition.formatter=="rownum"&&(this.table.rowManager.rowNumColumn=this)};r.prototype.getElement=function(){return this.element};r.prototype.getGroupElement=function(){return this.groupElement};r.prototype.getField=function(){return this.field};r.prototype.getFirstColumn=function(){return this.isGroup?this.columns.length?this.columns[0].getFirstColumn():!1:this};r.prototype.getLastColumn=function(){return this.isGroup?this.columns.length?this.columns[this.columns.length-1].getLastColumn():!1:this};r.prototype.getColumns=function(){return this.columns};r.prototype.getCells=function(){return this.cells};r.prototype.getTopColumn=function(){return this.parent.isGroup?this.parent.getTopColumn():this};r.prototype.getDefinition=function(n){var t=[];return this.isGroup&&n&&(this.columns.forEach(function(n){t.push(n.getDefinition(!0))}),this.definition.columns=t),this.definition};r.prototype.checkColumnVisibility=function(){var n=!1;this.columns.forEach(function(t){t.visible&&(n=!0)});n?(this.show(),this.parent.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!1)):this.hide()};r.prototype.show=function(n,t){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(n){n.show()}),this.isGroup||this.width!==null||this.reinitializeWidth(),this.table.columnManager._verticalAlignHeaders(),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns"),!t&&this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.updateColumnVisibility(this,this.visible),n||this.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),!this.silent&&this.table.options.virtualDomHoz&&this.table.vdomHoz.reinitialize())};r.prototype.hide=function(n,t){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager._verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(n){n.hide()}),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns"),!t&&this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.updateColumnVisibility(this,this.visible),n||this.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),!this.silent&&this.table.options.virtualDomHoz&&this.table.vdomHoz.reinitialize())};r.prototype.matchChildWidths=function(){var n=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(t){t.visible&&(n+=t.getWidth())}),this.contentElement.style.maxWidth=n-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())};r.prototype.removeChild=function(n){var t=this.columns.indexOf(n);t>-1&&this.columns.splice(t,1);this.columns.length||this.delete()};r.prototype.setWidth=function(n){this.widthFixed=!0;this.setWidthActual(n)};r.prototype.setWidthActual=function(n){isNaN(n)&&(n=Math.floor(this.table.element.clientWidth/100*parseInt(n)));n=Math.max(this.minWidth,n);this.maxWidth&&(n=Math.min(this.maxWidth,n));this.width=n;this.widthStyled=n?n+"px":"";this.element.style.width=this.widthStyled;this.isGroup||this.cells.forEach(function(n){n.setWidth()});this.parent.isGroup&&this.parent.matchChildWidths();this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()};r.prototype.checkCellHeights=function(){var n=[];this.cells.forEach(function(t){t.row.heightInitialized&&(t.row.getElement().offsetParent!==null?(n.push(t.row),t.row.clearCellHeight()):t.row.heightInitialized=!1)});n.forEach(function(n){n.calcHeight()});n.forEach(function(n){n.setCellHeight()})};r.prototype.getWidth=function(){var n=0;return this.isGroup?this.columns.forEach(function(t){t.visible&&(n+=t.getWidth())}):n=this.width,n};r.prototype.getHeight=function(){return this.element.offsetHeight};r.prototype.setMinWidth=function(n){this.minWidth=n;this.minWidthStyled=n?n+"px":"";this.element.style.minWidth=this.minWidthStyled;this.cells.forEach(function(n){n.setMinWidth()})};r.prototype.setMaxWidth=function(n){this.maxWidth=n;this.maxWidthStyled=n?n+"px":"";this.element.style.maxWidth=this.maxWidthStyled;this.cells.forEach(function(n){n.setMaxWidth()})};r.prototype.delete=function(){var n=this;return new Promise(function(t){var r,i;for(n.isGroup&&n.columns.forEach(function(n){n.delete()}),n.table.modExists("edit")&&n.table.modules.edit.currentCell.column===n&&n.table.modules.edit.cancelEdit(),r=n.cells.length,i=0;i<r;i++)n.cells[0].delete();n.element.parentNode&&n.element.parentNode.removeChild(n.element);n.element=!1;n.contentElement=!1;n.titleElement=!1;n.groupElement=!1;n.parent.isGroup&&n.parent.removeChild(n);n.table.columnManager.deregisterColumn(n);n.table.options.virtualDomHoz&&n.table.vdomHoz.reinitialize(!0);t()})};r.prototype.columnRendered=function(){this.titleFormatterRendered&&this.titleFormatterRendered()};r.prototype.validate=function(){var n=[];return this.cells.forEach(function(t){t.validate()||n.push(t.getComponent())}),n.length?n:!0};r.prototype.generateCell=function(n){var i=this,t=new s(i,n);return this.cells.push(t),t};r.prototype.nextColumn=function(){var n=this.table.columnManager.findColumnIndex(this);return n>-1?this._nextVisibleColumn(n+1):!1};r.prototype._nextVisibleColumn=function(n){var t=this.table.columnManager.getColumnByIndex(n);return!t||t.visible?t:this._nextVisibleColumn(n+1)};r.prototype.prevColumn=function(){var n=this.table.columnManager.findColumnIndex(this);return n>-1?this._prevVisibleColumn(n-1):!1};r.prototype._prevVisibleColumn=function(n){var t=this.table.columnManager.getColumnByIndex(n);return!t||t.visible?t:this._prevVisibleColumn(n-1)};r.prototype.reinitializeWidth=function(n){this.widthFixed=!1;typeof this.definition.width=="undefined"||n||this.setWidth(this.definition.width);this.table.modExists("filter")&&this.table.modules.filter.hideHeaderFilterElements();this.fitToData();this.table.modExists("filter")&&this.table.modules.filter.showHeaderFilterElements()};r.prototype.fitToData=function(){var t=this,n;this.widthFixed||(this.element.style.width="",t.cells.forEach(function(n){n.clearWidth()}));n=this.element.offsetWidth;t.width&&this.widthFixed||(t.cells.forEach(function(t){var i=t.getWidth();i>n&&(n=i)}),n&&t.setWidthActual(n+1))};r.prototype.updateDefinition=function(n){var t=this;return new Promise(function(i,r){var u;t.isGroup?(console.warn("Column Update Error - The updateDefinition function is only available on columns, not column groups"),r("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(u=Object.assign({},t.getDefinition()),u=Object.assign(u,n),t.table.columnManager.addColumn(u,!1,t).then(function(n){u.field==t.field&&(t.field=!1);t.delete().then(function(){i(n.getComponent())}).catch(function(n){r(n)})}).catch(function(n){r(n)}))})};r.prototype.deleteCell=function(n){var t=this.cells.indexOf(n);t>-1&&this.cells.splice(t,1)};r.prototype.defaultOptionList=["title","field","columns","visible","align","hozAlign","vertAlign","width","minWidth","maxWidth","widthGrow","widthShrink","resizable","frozen","responsive","tooltip","cssClass","rowHandle","hideInHtml","print","htmlOutput","sorter","sorterParams","formatter","formatterParams","variableHeight","editable","editor","editorParams","validator","mutator","mutatorParams","mutatorData","mutatorDataParams","mutatorEdit","mutatorEditParams","mutatorClipboard","mutatorClipboardParams","accessor","accessorParams","accessorData","accessorDataParams","accessorDownload","accessorDownloadParams","accessorClipboard","accessorClipboardParams","accessorPrint","accessorPrintParams","accessorHtmlOutput","accessorHtmlOutputParams","clipboard","download","downloadTitle","topCalc","topCalcParams","topCalcFormatter","topCalcFormatterParams","bottomCalc","bottomCalcParams","bottomCalcFormatter","bottomCalcFormatterParams","cellClick","cellDblClick","cellContext","cellTap","cellDblTap","cellTapHold","cellMouseEnter","cellMouseLeave","cellMouseOver","cellMouseOut","cellMouseMove","cellEditing","cellEdited","cellEditCancelled","headerSort","headerSortStartingDir","headerSortTristate","headerClick","headerDblClick","headerContext","headerTap","headerDblTap","headerTapHold","headerTooltip","headerVertical","headerHozAlign","editableTitle","titleFormatter","titleFormatterParams","headerFilter","headerFilterPlaceholder","headerFilterParams","headerFilterEmptyCheck","headerFilterFunc","headerFilterFuncParams","headerFilterLiveFilter","print","headerContextMenu","headerMenu","contextMenu","clickMenu","formatterPrint","formatterPrintParams","formatterClipboard","formatterClipboardParams","formatterHtmlOutput","formatterHtmlOutputParams","titlePrint","titleClipboard","titleHtmlOutput","titleDownload"];r.prototype.getComponent=function(){return this.component||(this.component=new c(this)),this.component};t=function(n){this.table=n;this.element=this.createHolderElement();this.tableElement=this.createTableElement();this.heightFixer=this.createTableElement();this.columnManager=null;this.height=0;this.firstRender=!1;this.renderMode="virtual";this.fixedHeight=!1;this.rows=[];this.activeRows=[];this.activeRowsCount=0;this.displayRows=[];this.displayRowsCount=0;this.scrollTop=0;this.scrollLeft=0;this.vDomRowHeight=20;this.vDomTop=0;this.vDomBottom=0;this.vDomScrollPosTop=0;this.vDomScrollPosBottom=0;this.vDomTopPad=0;this.vDomBottomPad=0;this.vDomMaxRenderChain=90;this.vDomWindowBuffer=0;this.vDomWindowMinTotalRows=20;this.vDomWindowMinMarginRows=5;this.vDomTopNewRows=[];this.vDomBottomNewRows=[];this.rowNumColumn=!1;this.redrawBlock=!1;this.redrawBlockRestoreConfig=!1;this.redrawBlockRederInPosition=!1};t.prototype.createHolderElement=function(){var n=document.createElement("div");return n.classList.add("tabulator-tableHolder"),n.setAttribute("tabindex",0),n};t.prototype.createTableElement=function(){var n=document.createElement("div");return n.classList.add("tabulator-table"),n};t.prototype.getElement=function(){return this.element};t.prototype.getTableElement=function(){return this.tableElement};t.prototype.getRowPosition=function(n,t){return t?this.activeRows.indexOf(n):this.rows.indexOf(n)};t.prototype.setColumnManager=function(n){this.columnManager=n};t.prototype.initialize=function(){var n=this;n.setRenderMode();n.element.appendChild(n.tableElement);n.firstRender=!0;n.element.addEventListener("scroll",function(){var t=n.element.scrollLeft;n.scrollLeft!=t&&(n.columnManager.scrollHorizontal(t),n.table.options.groupBy&&n.table.modules.groupRows.scrollHeaders(t),n.table.modExists("columnCalcs")&&n.table.modules.columnCalcs.scrollHorizontal(t),n.table.options.scrollHorizontal(t));n.scrollLeft=t});this.renderMode==="virtual"&&n.element.addEventListener("scroll",function(){var t=n.element.scrollTop,i=n.scrollTop>t;n.scrollTop!=t?(n.scrollTop=t,n.scrollVertical(i),n.table.options.ajaxProgressiveLoad=="scroll"&&n.table.modules.ajax.nextPage(n.element.scrollHeight-n.element.clientHeight-t),n.table.options.scrollVertical(t)):n.scrollTop=t})};t.prototype.findRow=function(n){var t=this,i,r;if((typeof n=="undefined"?"undefined":_typeof(n))=="object"){if(n instanceof u)return n;if(n instanceof h)return n._getSelf()||!1;if(typeof HTMLElement!="undefined"&&n instanceof HTMLElement)return i=t.rows.find(function(t){return t.getElement()===n}),i||!1}else return typeof n=="undefined"||n===null?!1:(r=t.rows.find(function(i){return i.data[t.table.options.index]==n}),r||!1);return!1};t.prototype.getRowFromDataObject=function(n){var t=this.rows.find(function(t){return t.data===n});return t||!1};t.prototype.getRowFromPosition=function(n,t){return t?this.activeRows[n]:this.rows[n]};t.prototype.scrollToRow=function(t,i,r){var u=this,e=this.getDisplayRows().indexOf(t),f=t.getElement(),o,s=0;return new Promise(function(t,h){if(e>-1){if(typeof i=="undefined"&&(i=u.table.options.scrollToRowPosition),typeof r=="undefined"&&(r=u.table.options.scrollToRowIfVisible),i==="nearest")switch(u.renderMode){case"classic":o=n.prototype.helpers.elOffset(f).top;i=Math.abs(u.element.scrollTop-o)>Math.abs(u.element.scrollTop+u.element.clientHeight-o)?"bottom":"top";break;case"virtual":i=Math.abs(u.vDomTop-e)>Math.abs(u.vDomBottom-e)?"bottom":"top"}if(!r&&n.prototype.helpers.elVisible(f)&&(s=n.prototype.helpers.elOffset(f).top-n.prototype.helpers.elOffset(u.element).top,s>0&&s<u.element.clientHeight-f.offsetHeight))return!1;switch(u.renderMode){case"classic":u.element.scrollTop=n.prototype.helpers.elOffset(f).top-n.prototype.helpers.elOffset(u.element).top+u.element.scrollTop;break;case"virtual":u._virtualRenderFill(e,!0)}switch(i){case"middle":case"center":u.element.scrollTop=u.element.scrollHeight-u.element.scrollTop==u.element.clientHeight?u.element.scrollTop+(f.offsetTop-u.element.scrollTop)-(u.element.scrollHeight-f.offsetTop)/2:u.element.scrollTop-u.element.clientHeight/2;break;case"bottom":u.element.scrollTop=u.element.scrollHeight-u.element.scrollTop==u.element.clientHeight?u.element.scrollTop-(u.element.scrollHeight-f.offsetTop)+f.offsetHeight:u.element.scrollTop-u.element.clientHeight+f.offsetHeight}t()}else console.warn("Scroll Error - Row not visible"),h("Scroll Error - Row not visible")})};t.prototype.setData=function(n,t,i){var r=this,u=this;return new Promise(function(f){t&&r.getDisplayRows().length?u.table.options.pagination?u._setDataActual(n,!0):r.reRenderInPosition(function(){u._setDataActual(n)}):(r.table.options.autoColumns&&i&&r.table.columnManager.generateColumnsFromRowData(n),r.resetScroll(),r._setDataActual(n));f()})};t.prototype._setDataActual=function(n,t){var i=this;i.table.options.dataLoading.call(this.table,n);this._wipeElements();this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.clear();Array.isArray(n)?(this.table.modExists("selectRow")&&this.table.modules.selectRow.clearSelectionData(),this.table.options.reactiveData&&this.table.modExists("reactiveData",!0)&&this.table.modules.reactiveData.watchData(n),n.forEach(function(n){if(n&&(typeof n=="undefined"?"undefined":_typeof(n))==="object"){var t=new u(n,i);i.rows.push(t)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",n)}),i.refreshActiveData(!1,!1,t),i.table.options.dataLoaded.call(this.table,n)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",typeof n=="undefined"?"undefined":_typeof(n),"\nData:     ",n)};t.prototype._wipeElements=function(){this.rows.forEach(function(n){n.wipe()});this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.wipe();this.rows=[];this.activeRows=[];this.activeRowsCount=0;this.displayRows=[];this.displayRowsCount=0;this.adjustTableSize()};t.prototype.deleteRow=function(n,t){var i=this.rows.indexOf(n),r=this.activeRows.indexOf(n);r>-1&&this.activeRows.splice(r,1);i>-1&&this.rows.splice(i,1);this.setActiveRows(this.activeRows);this.displayRowIterator(function(t){var i=t.indexOf(n);i>-1&&t.splice(i,1)});t||this.reRenderInPosition();this.regenerateRowNumbers();this.table.options.rowDeleted.call(this.table,n.getComponent());this.table.options.dataChanged&&this.table.options.dataChanged.call(this.table,this.getData());this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.updateGroupRows(!0):this.table.options.pagination&&this.table.modExists("page")?this.refreshActiveData(!1,!1,!0):this.table.options.pagination&&this.table.modExists("page")&&this.refreshActiveData("page")};t.prototype.addRow=function(n,t,i,r){var u=this.addRowActual(n,t,i,r);return this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("rowAdd",u,{data:n,pos:t,index:i}),u};t.prototype.addRows=function(n,t,i){var r=this,f=this,e=0,u=[];return new Promise(function(o){t=r.findAddRowPos(t);Array.isArray(n)||(n=[n]);e=n.length-1;(typeof i=="undefined"&&t||typeof i!="undefined"&&!t)&&n.reverse();n.forEach(function(n){var r=f.addRow(n,t,i,!0);u.push(r)});r.table.options.groupBy&&r.table.modExists("groupRows")?r.table.modules.groupRows.updateGroupRows(!0):r.table.options.pagination&&r.table.modExists("page")?r.refreshActiveData(!1,!1,!0):r.reRenderInPosition();r.table.modExists("columnCalcs")&&r.table.modules.columnCalcs.recalc(r.table.rowManager.activeRows);r.regenerateRowNumbers();o(u)})};t.prototype.findAddRowPos=function(n){return typeof n=="undefined"&&(n=this.table.options.addRowPos),n==="pos"&&(n=!0),n==="bottom"&&(n=!1),n};t.prototype.addRowActual=function(n,t,i,r){var f=n instanceof u?n:new u(n||{},this),e=this.findAddRowPos(t),h=-1,c,s,o;return!i&&this.table.options.pagination&&this.table.options.paginationAddRow=="page"&&(s=this.getDisplayRows(),e?s.length?i=s[0]:this.activeRows.length&&(i=this.activeRows[this.activeRows.length-1],e=!1):s.length&&(i=s[s.length-1],e=s.length<this.table.modules.page.getPageSize()?!1:!0)),typeof i!="undefined"&&(i=this.findRow(i)),this.table.options.groupBy&&this.table.modExists("groupRows")&&(this.table.modules.groupRows.assignRowToGroup(f),o=f.getGroup().rows,o.length>1&&(!i||i&&o.indexOf(i)==-1?e?o[0]!==f&&(i=o[0],this._moveRowInArray(f.getGroup().rows,f,i,!e)):o[o.length-1]!==f&&(i=o[o.length-1],this._moveRowInArray(f.getGroup().rows,f,i,!e)):this._moveRowInArray(f.getGroup().rows,f,i,!e))),i&&(h=this.rows.indexOf(i)),i&&h>-1?(c=this.activeRows.indexOf(i),this.displayRowIterator(function(n){var t=n.indexOf(i);t>-1&&n.splice(e?t:t+1,0,f)}),c>-1&&this.activeRows.splice(e?c:c+1,0,f),this.rows.splice(e?h:h+1,0,f)):e?(this.displayRowIterator(function(n){n.unshift(f)}),this.activeRows.unshift(f),this.rows.unshift(f)):(this.displayRowIterator(function(n){n.push(f)}),this.activeRows.push(f),this.rows.push(f)),this.setActiveRows(this.activeRows),this.table.options.rowAdded.call(this.table,f.getComponent()),this.table.options.dataChanged&&this.table.options.dataChanged.call(this.table,this.getData()),r||this.reRenderInPosition(),f};t.prototype.moveRow=function(n,t,i){this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("rowMove",n,{posFrom:this.getRowPosition(n),posTo:this.getRowPosition(t),to:t,after:i});this.moveRowActual(n,t,i);this.regenerateRowNumbers();this.table.options.rowMoved.call(this.table,n.getComponent())};t.prototype.moveRowActual=function(n,t,i){var e=this,r,u;this._moveRowInArray(this.rows,n,t,i);this._moveRowInArray(this.activeRows,n,t,i);this.displayRowIterator(function(r){e._moveRowInArray(r,n,t,i)});this.table.options.groupBy&&this.table.modExists("groupRows")&&(!i&&t instanceof f&&(t=this.table.rowManager.prevDisplayRow(n)||t),r=t.getGroup(),u=n.getGroup(),r===u?this._moveRowInArray(r.rows,n,t,i):(u&&u.removeRow(n),r.insertRow(n,t,i)))};t.prototype._moveRowInArray=function(n,t,i,r){var u,f,o,s,e;if(t!==i&&(u=n.indexOf(t),u>-1&&(n.splice(u,1),f=n.indexOf(i),f>-1?r?n.splice(f+1,0,t):n.splice(f,0,t):n.splice(u,0,t)),n===this.getDisplayRows()))for(o=u<f?u:f,s=f>u?f:u+1,e=o;e<=s;e++)n[e]&&this.styleRow(n[e],e)};t.prototype.clearData=function(){this.setData([])};t.prototype.getRowIndex=function(n){return this.findRowIndex(n,this.rows)};t.prototype.getDisplayRowIndex=function(n){var t=this.getDisplayRows().indexOf(n);return t>-1?t:!1};t.prototype.nextDisplayRow=function(n,t){var r=this.getDisplayRowIndex(n),i=!1;return(r!==!1&&r<this.displayRowsCount-1&&(i=this.getDisplayRows()[r+1]),i&&(!(i instanceof u)||i.type!="row"))?this.nextDisplayRow(i,t):i};t.prototype.prevDisplayRow=function(n,t){var r=this.getDisplayRowIndex(n),i=!1;return(r&&(i=this.getDisplayRows()[r-1]),t&&i&&(!(i instanceof u)||i.type!="row"))?this.prevDisplayRow(i,t):i};t.prototype.findRowIndex=function(n,t){var i;return(n=this.findRow(n),n&&(i=t.indexOf(n),i>-1))?i:!1};t.prototype.getData=function(n,t){var i=[],r=this.getRows(n);return r.forEach(function(n){n.type=="row"&&i.push(n.getData(t||"data"))}),i};t.prototype.getComponents=function(n){var t=[],i=this.getRows(n);return i.forEach(function(n){t.push(n.getComponent())}),t};t.prototype.getDataCount=function(n){var t=this.getRows(n);return t.length};t.prototype._genRemoteRequest=function(){var f=this,n=this.table,r=n.options,t={},i,u;n.modExists("page")&&(r.ajaxSorting&&(i=this.table.modules.sort.getSort(),i.forEach(function(n){delete n.column}),t[this.table.modules.page.paginationDataSentNames.sorters]=i),r.ajaxFiltering&&(u=this.table.modules.filter.getFilters(!0,!0),t[this.table.modules.page.paginationDataSentNames.filters]=u),this.table.modules.ajax.setParams(t,!0));n.modules.ajax.sendRequest().then(function(n){f._setDataActual(n,!0)}).catch(function(){})};t.prototype.filterRefresh=function(){var n=this.table,t=n.options,i=this.scrollLeft;t.ajaxFiltering?t.pagination=="remote"&&n.modExists("page")?(n.modules.page.reset(!0),n.modules.page.setPage(1).then(function(){}).catch(function(){})):t.ajaxProgressiveLoad?n.modules.ajax.loadData().then(function(){}).catch(function(){}):this._genRemoteRequest():this.refreshActiveData("filter");this.scrollHorizontal(i)};t.prototype.sorterRefresh=function(n){var t=this.table,i=this.table.options,r=this.scrollLeft;i.ajaxSorting?(i.pagination=="remote"||i.progressiveLoad)&&t.modExists("page")?(t.modules.page.reset(!0),t.modules.page.setPage(1).then(function(){}).catch(function(){})):i.ajaxProgressiveLoad?t.modules.ajax.loadData().then(function(){}).catch(function(){}):this._genRemoteRequest():this.refreshActiveData(n?"filter":"sort");this.scrollHorizontal(r)};t.prototype.scrollHorizontal=function(n){this.scrollLeft=n;this.element.scrollLeft=n;this.table.options.groupBy&&this.table.modules.groupRows.scrollHeaders(n);this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.scrollHorizontal(n)};t.prototype.refreshActiveData=function(t,i,r){var e=this,u=this.table,o=["all","filter","sort","display","freeze","group","tree","page"],f;if(this.redrawBlock){(!this.redrawBlockRestoreConfig||o.indexOf(t)<o.indexOf(this.redrawBlockRestoreConfig.stage))&&(this.redrawBlockRestoreConfig={stage:t,skipStage:i,renderInPosition:r});return}e.table.modExists("edit")&&e.table.modules.edit.cancelEdit();t||(t="all");u.options.selectable&&!u.options.selectablePersistence&&u.modExists("selectRow")&&u.modules.selectRow.deselectRows();switch(t){case"all":case"filter":i?i=!1:u.modExists("filter")?e.setActiveRows(u.modules.filter.filter(e.rows)):e.setActiveRows(e.rows.slice(0));case"sort":i?i=!1:u.modExists("sort")&&u.modules.sort.sort(this.activeRows);this.regenerateRowNumbers();case"display":this.resetDisplayRows();case"freeze":i?i=!1:this.table.modExists("frozenRows")&&u.modules.frozenRows.isFrozen()&&(u.modules.frozenRows.getDisplayIndex()||u.modules.frozenRows.setDisplayIndex(this.getNextDisplayIndex()),f=u.modules.frozenRows.getDisplayIndex(),f=e.setDisplayRows(u.modules.frozenRows.getRows(this.getDisplayRows(f-1)),f),f!==!0&&u.modules.frozenRows.setDisplayIndex(f));case"group":i?i=!1:u.options.groupBy&&u.modExists("groupRows")&&(u.modules.groupRows.getDisplayIndex()||u.modules.groupRows.setDisplayIndex(this.getNextDisplayIndex()),f=u.modules.groupRows.getDisplayIndex(),f=e.setDisplayRows(u.modules.groupRows.getRows(this.getDisplayRows(f-1)),f),f!==!0&&u.modules.groupRows.setDisplayIndex(f));case"tree":i?i=!1:u.options.dataTree&&u.modExists("dataTree")&&(u.modules.dataTree.getDisplayIndex()||u.modules.dataTree.setDisplayIndex(this.getNextDisplayIndex()),f=u.modules.dataTree.getDisplayIndex(),f=e.setDisplayRows(u.modules.dataTree.getRows(this.getDisplayRows(f-1)),f),f!==!0&&u.modules.dataTree.setDisplayIndex(f));u.options.pagination&&u.modExists("page")&&!r&&u.modules.page.getMode()=="local"&&u.modules.page.reset();case"page":i?i=!1:u.options.pagination&&u.modExists("page")&&(u.modules.page.getDisplayIndex()||u.modules.page.setDisplayIndex(this.getNextDisplayIndex()),f=u.modules.page.getDisplayIndex(),u.modules.page.getMode()=="local"&&u.modules.page.setMaxRows(this.getDisplayRows(f-1).length),f=e.setDisplayRows(u.modules.page.getRows(this.getDisplayRows(f-1)),f),f!==!0&&u.modules.page.setDisplayIndex(f))}n.prototype.helpers.elVisible(e.element)&&(r?e.reRenderInPosition():(t==="all"&&this.table.options.virtualDomHoz&&this.table.vdomHoz.dataChange(),e.renderTable(),u.options.layoutColumnsOnNewData&&e.table.columnManager.redraw(!0)));u.modExists("columnCalcs")&&u.modules.columnCalcs.recalc(this.activeRows)};t.prototype.regenerateRowNumbers=function(){var n=this;this.rowNumColumn&&this.activeRows.forEach(function(t){var i=t.getCell(n.rowNumColumn);i&&i._generateContents()})};t.prototype.setActiveRows=function(n){this.activeRows=n;this.activeRowsCount=this.activeRows.length};t.prototype.resetDisplayRows=function(){this.displayRows=[];this.displayRows.push(this.activeRows.slice(0));this.displayRowsCount=this.displayRows[0].length;this.table.modExists("frozenRows")&&this.table.modules.frozenRows.setDisplayIndex(0);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.setDisplayIndex(0);this.table.options.pagination&&this.table.modExists("page")&&this.table.modules.page.setDisplayIndex(0)};t.prototype.getNextDisplayIndex=function(){return this.displayRows.length};t.prototype.setDisplayRows=function(n,t){var i=!0;return t&&typeof this.displayRows[t]!="undefined"?(this.displayRows[t]=n,i=!0):(this.displayRows.push(n),i=t=this.displayRows.length-1),t==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),i};t.prototype.getDisplayRows=function(n){return typeof n=="undefined"?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[n]||[]};t.prototype.getVisibleRows=function(n){var f=this.element.scrollTop,e=this.element.clientHeight+f,o=!1,u=0,r=0,i=this.getDisplayRows(),t;if(n){for(this.getDisplayRows(),t=this.vDomTop;t<=this.vDomBottom;t++)if(i[t])if(o)if(e-i[t].getElement().offsetTop>=0)r=t;else break;else if(f-i[t].getElement().offsetTop>=0)u=t;else if(o=!0,e-i[t].getElement().offsetTop>=0)r=t;else break}else u=this.vDomTop,r=this.vDomBottom;return i.slice(u,r+1)};t.prototype.displayRowIterator=function(n){this.displayRows.forEach(n);this.displayRowsCount=this.displayRows[this.displayRows.length-1].length};t.prototype.getRows=function(n){var t;switch(n){case"active":t=this.activeRows;break;case"display":t=this.table.rowManager.getDisplayRows();break;case"visible":t=this.getVisibleRows(!0);break;case"selected":t=this.table.modules.selectRow.selectedRows;break;default:t=this.rows}return t};t.prototype.reRenderInPosition=function(n){var t,u;if(this.getRenderMode()=="virtual")if(this.redrawBlock)n?n():this.redrawBlockRederInPosition=!0;else{var e=this.element.scrollTop,r=!1,i=!1,o=this.scrollLeft,f=this.getDisplayRows();for(t=this.vDomTop;t<=this.vDomBottom;t++)if(f[t])if(u=e-f[t].getElement().offsetTop,i===!1||Math.abs(u)<i)i=u,r=t;else break;n&&n();this._virtualRenderFill(r===!1?this.displayRowsCount-1:r,!0,i||0);this.scrollHorizontal(o)}else this.renderTable(),n&&n()};t.prototype.setRenderMode=function(){this.table.options.virtualDom?(this.renderMode="virtual",this.fixedHeight=this.table.element.clientHeight||this.table.options.height?!0:!1):this.renderMode="classic"};t.prototype.getRenderMode=function(){return this.renderMode};t.prototype.renderTable=function(){this.table.options.renderStarted.call(this.table);this.element.scrollTop=0;switch(this.renderMode){case"classic":this._simpleRender();break;case"virtual":this._virtualRenderFill()}this.firstRender&&(this.displayRowsCount?(this.firstRender=!1,this.table.modules.layout.layout()):this.renderEmptyScroll());this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout();this.displayRowsCount||this.table.options.placeholder&&(this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.table.options.placeholder),this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px");this.table.options.renderComplete.call(this.table)};t.prototype._simpleRender=function(){this._clearVirtualDom();this.displayRowsCount?this.checkClassicModeGroupHeaderWidth():this.renderEmptyScroll()};t.prototype.checkClassicModeGroupHeaderWidth=function(){var n=this,t=this.tableElement,i=!0;n.getDisplayRows().forEach(function(r,u){n.styleRow(r,u);t.appendChild(r.getElement());r.initialize(!0);r.type!=="group"&&(i=!1)});t.style.minWidth=i?n.table.columnManager.getWidth()+"px":""};t.prototype.renderEmptyScroll=function(){this.table.options.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"};t.prototype._clearVirtualDom=function(){var n=this.tableElement;for(this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder);n.firstChild;)n.removeChild(n.firstChild);n.style.paddingTop="";n.style.paddingBottom="";n.style.minWidth="";n.style.minHeight="";n.style.display="";n.style.visibility="";this.scrollTop=0;this.scrollLeft=0;this.vDomTop=0;this.vDomBottom=0;this.vDomTopPad=0;this.vDomBottomPad=0};t.prototype.styleRow=function(n,t){var i=n.getElement();t%2?(i.classList.add("tabulator-row-even"),i.classList.remove("tabulator-row-odd")):(i.classList.add("tabulator-row-odd"),i.classList.remove("tabulator-row-even"))};t.prototype._virtualRenderFill=function(t,i,r){var u=this,f=u.tableElement,p=u.element,l=0,s=0,o=0,c=0,v=!0,w=u.getDisplayRows(),a;if(t=t||0,r=r||0,t){while(f.firstChild)f.removeChild(f.firstChild);a=(u.displayRowsCount-t+1)*u.vDomRowHeight;a<u.height&&(t-=Math.ceil((u.height-a)/u.vDomRowHeight),t<0&&(t=0));l=Math.min(Math.max(Math.floor(u.vDomWindowBuffer/u.vDomRowHeight),u.vDomWindowMinMarginRows),t);t-=l}else u._clearVirtualDom();if(u.displayRowsCount&&n.prototype.helpers.elVisible(u.element)){for(u.vDomTop=t,u.vDomBottom=t-1;(s<=u.height+u.vDomWindowBuffer||c<u.vDomWindowMinTotalRows)&&u.vDomBottom<u.displayRowsCount-1;){var y=u.vDomBottom+1,e=w[y],h=0;u.styleRow(e,y);f.appendChild(e.getElement());e.initialize();e.heightInitialized||e.normalizeHeight(!0);h=e.getHeight();c<l?o+=h:s+=h;h>this.vDomWindowBuffer&&(this.vDomWindowBuffer=h*2);e.type!=="group"&&(v=!1);u.vDomBottom++;c++}t?(u.vDomTopPad=i?u.vDomRowHeight*this.vDomTop+r:u.scrollTop-o,u.vDomBottomPad=u.vDomBottom==u.displayRowsCount-1?0:Math.max(u.vDomScrollHeight-u.vDomTopPad-s-o,0)):(this.vDomTopPad=0,u.vDomRowHeight=Math.floor((s+o)/c),u.vDomBottomPad=u.vDomRowHeight*(u.displayRowsCount-u.vDomBottom-1),u.vDomScrollHeight=o+s+u.vDomBottomPad-u.height);f.style.paddingTop=u.vDomTopPad+"px";f.style.paddingBottom=u.vDomBottomPad+"px";i&&(this.scrollTop=u.vDomTopPad+o+r-(this.element.scrollWidth>this.element.clientWidth?this.element.offsetHeight-this.element.clientHeight:0));this.scrollTop=Math.min(this.scrollTop,this.element.scrollHeight-this.height);this.element.scrollWidth>this.element.offsetWidth&&i&&(this.scrollTop+=this.element.offsetHeight-this.element.clientHeight);this.vDomScrollPosTop=this.scrollTop;this.vDomScrollPosBottom=this.scrollTop;p.scrollTop=this.scrollTop;f.style.minWidth=v?u.table.columnManager.getWidth()+"px":"";u.table.options.groupBy&&u.table.modules.layout.getMode()!="fitDataFill"&&u.displayRowsCount==u.table.modules.groupRows.countGroups()&&(u.tableElement.style.minWidth=u.table.columnManager.getWidth())}else this.renderEmptyScroll();this.fixedHeight||this.adjustTableSize()};t.prototype.scrollVertical=function(n){var t=this.scrollTop-this.vDomScrollPosTop,i=this.scrollTop-this.vDomScrollPosBottom,r=this.vDomWindowBuffer*2,u;-t>r||i>r?(u=this.scrollLeft,this._virtualRenderFill(Math.floor(this.element.scrollTop/this.element.scrollHeight*this.displayRowsCount)),this.scrollHorizontal(u)):n?(t<0&&this._addTopRow(-t),i<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(-i):this.vDomScrollPosBottom=this.scrollTop)):(t>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(t):this.vDomScrollPosTop=this.scrollTop),i>=0&&this._addBottomRow(i))};t.prototype._addTopRow=function(n){var f=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,r=this.tableElement,e=this.getDisplayRows();if(this.vDomTop){var i=this.vDomTop-1,t=e[i],u=t.getHeight()||this.vDomRowHeight;n>=u&&(this.styleRow(t,i),r.insertBefore(t.getElement(),r.firstChild),t.initialized&&t.heightInitialized||(this.vDomTopNewRows.push(t),t.heightInitialized||t.clearCellHeight()),t.initialize(),this.vDomTopPad-=u,this.vDomTopPad<0&&(this.vDomTopPad=i*this.vDomRowHeight),i||(this.vDomTopPad=0),r.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=u,this.vDomTop--);n=-(this.scrollTop-this.vDomScrollPosTop);t.getHeight()>this.vDomWindowBuffer&&(this.vDomWindowBuffer=t.getHeight()*2);f<this.vDomMaxRenderChain&&this.vDomTop&&n>=(e[this.vDomTop-1].getHeight()||this.vDomRowHeight)?this._addTopRow(n,f+1):this._quickNormalizeRowHeight(this.vDomTopNewRows)}};t.prototype._removeTopRow=function(n){var u=this.tableElement,r=this.getDisplayRows()[this.vDomTop],t=r.getHeight()||this.vDomRowHeight,i;n>=t&&(i=r.getElement(),i.parentNode.removeChild(i),this.vDomTopPad+=t,u.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?t:t+this.vDomWindowBuffer,this.vDomTop++,n=this.scrollTop-this.vDomScrollPosTop,this._removeTopRow(n))};t.prototype._addBottomRow=function(n){var u=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,f=this.tableElement,e=this.getDisplayRows();if(this.vDomBottom<this.displayRowsCount-1){var i=this.vDomBottom+1,t=e[i],r=t.getHeight()||this.vDomRowHeight;n>=r&&(this.styleRow(t,i),f.appendChild(t.getElement()),t.initialized&&t.heightInitialized||(this.vDomBottomNewRows.push(t),t.heightInitialized||t.clearCellHeight()),t.initialize(),this.vDomBottomPad-=r,(this.vDomBottomPad<0||i==this.displayRowsCount-1)&&(this.vDomBottomPad=0),f.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=r,this.vDomBottom++);n=this.scrollTop-this.vDomScrollPosBottom;t.getHeight()>this.vDomWindowBuffer&&(this.vDomWindowBuffer=t.getHeight()*2);u<this.vDomMaxRenderChain&&this.vDomBottom<this.displayRowsCount-1&&n>=(e[this.vDomBottom+1].getHeight()||this.vDomRowHeight)?this._addBottomRow(n,u+1):this._quickNormalizeRowHeight(this.vDomBottomNewRows)}};t.prototype._removeBottomRow=function(n){var u=this.tableElement,r=this.getDisplayRows()[this.vDomBottom],i=r.getHeight()||this.vDomRowHeight,t;n>=i&&(t=r.getElement(),t.parentNode&&t.parentNode.removeChild(t),this.vDomBottomPad+=i,this.vDomBottomPad<0&&(this.vDomBottomPad=0),u.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=i,this.vDomBottom--,n=-(this.scrollTop-this.vDomScrollPosBottom),this._removeBottomRow(n))};t.prototype._quickNormalizeRowHeight=function(n){n.forEach(function(n){n.calcHeight()});n.forEach(function(n){n.setCellHeight()});n.length=0};t.prototype.normalizeHeight=function(){this.activeRows.forEach(function(n){n.normalizeHeight()})};t.prototype.adjustTableSize=function(){var i=this.element.clientHeight,t,n;this.renderMode==="virtual"&&(n=Math.floor(this.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0)),this.fixedHeight?(this.element.style.minHeight="calc(100% - "+n+"px)",this.element.style.height="calc(100% - "+n+"px)",this.element.style.maxHeight="calc(100% - "+n+"px)"):(this.element.style.height="",this.element.style.height=this.table.element.clientHeight-n+"px",this.element.scrollTop=this.scrollTop),this.height=this.element.clientHeight,this.vDomWindowBuffer=this.table.options.virtualDomBuffer||this.height,this.fixedHeight||i==this.element.clientHeight||(t=this.table.modExists("resizeTable"),(!t||this.table.modules.resizeTable.autoResize)&&t||this.redraw()))};t.prototype.reinitialize=function(){this.rows.forEach(function(n){n.reinitialize(!0)})};t.prototype.blockRedraw=function(){this.redrawBlock=!0;this.redrawBlockRestoreConfig=!1};t.prototype.restoreRedraw=function(){this.redrawBlock=!1;this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.stage,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRederInPosition&&this.reRenderInPosition();this.redrawBlockRederInPosition=!1};t.prototype.redraw=function(n){var t=this.scrollLeft;this.adjustTableSize();this.table.tableWidth=this.table.element.clientWidth;n?this.renderTable():(this.renderMode=="classic"?this.table.options.groupBy?this.refreshActiveData("group",!1,!1):this._simpleRender():(this.reRenderInPosition(),this.scrollHorizontal(t)),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))};t.prototype.resetScroll=function(){if(this.element.scrollLeft=0,this.element.scrollTop=0,this.table.browser==="ie"){var n=document.createEvent("Event");n.initEvent("scroll",!1,!0);this.element.dispatchEvent(n)}else this.element.dispatchEvent(new Event("scroll"))};d=function(n){this.table=n;this.element=this.table.rowManager.tableElement;this.holderEl=this.table.rowManager.element;this.leftCol=0;this.rightCol=0;this.scrollLeft=0;this.vDomScrollPosLeft=0;this.vDomScrollPosRight=0;this.vDomPadLeft=0;this.vDomPadRight=0;this.fitDataColAvg=0;this.window=200;this.initialized=!1;this.columns=[];this.compatabilityCheck()&&this.initialize()};d.prototype.compatabilityCheck=function(){var t=this.table.options,i=!1,n=!0;return t.layout=="fitDataTable"&&(console.warn("Horizontal Vitrual DOM is not compatible with fitDataTable layout mode"),n=!1),t.responsiveLayout&&(console.warn("Horizontal Vitrual DOM is not compatible with responsive columns"),n=!1),this.table.rtl&&(console.warn("Horizontal Vitrual DOM is not currently compatible with RTL text direction"),n=!1),t.columns&&(i=t.columns.find(function(n){return n.frozen}),i&&(console.warn("Horizontal Vitrual DOM is not compatible with frozen columns"),n=!1)),n||(t.virtualDomHoz=!1),n};d.prototype.initialize=function(){var n=this;this.holderEl.addEventListener("scroll",function(){var t=n.holderEl.scrollLeft;n.scrollLeft!=t&&(n.scrollLeft=t,n.scroll(t-(n.vDomScrollPosLeft+n.window)))})};d.prototype.deinitialize=function(){this.initialized=!1};d.prototype.clear=function(){this.columns=[];this.leftCol=-1;this.rightCol=0;this.vDomScrollPosLeft=0;this.vDomScrollPosRight=0;this.vDomPadLeft=0;this.vDomPadRight=0};d.prototype.dataChange=function(){var u=!1,f=0,n=0,e,t,i,r;if(this.table.options.layout==="fitData"){if(this.table.columnManager.columnsByIndex.forEach(function(n){!n.definition.width&&n.visible&&(u=!0)}),u&&u&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.holderEl.clientWidth+this.window,this.table.options.groupBy?(e=this.table.modules.groupRows.getGroups(!1)[0],t=e.getRows(!1)[0]):t=this.table.rowManager.getDisplayRows()[0],t)){for(i=t.getElement(),t.generateCells(),this.element.appendChild(i),n=0;n<t.cells.length;n++)if(r=t.cells[n],i.appendChild(r.getElement()),r.column.reinitializeWidth(),f+=r.column.getWidth(),f>this.vDomScrollPosRight)break;for(i.parentNode.removeChild(i),this.fitDataColAvg=Math.floor(f/(n+1)),n;n<this.table.columnManager.columnsByIndex.length;n++)this.table.columnManager.columnsByIndex[n].setWidth(this.fitDataColAvg);this.reinitialize(!1,!0)}}else this.table.options.layout==="fitColumns"&&(this.table.modules.layout.layout(),this.table.vdomHoz.reinitialize(!1,!0))};d.prototype.fitDataLayoutOverride=function(){for(var n=this.leftCol;n<=this.rightCol;n++)this.columns[n].reinitializeWidth()};d.prototype.reinitialize=function(n,t){var i=this,u={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol},r;(!n||this.initialized)&&(this.clear(),this.scrollLeft=this.holderEl.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.window,this.vDomScrollPosRight=this.scrollLeft+this.holderEl.clientWidth+this.window,r=0,this.table.columnManager.columnsByIndex.forEach(function(n){var u={},t;n.visible&&(t=n.getWidth(),u.leftPos=r,u.rightPos=r+t,r+t>i.vDomScrollPosLeft&&r<i.vDomScrollPosRight?(i.leftCol==-1&&(i.leftCol=i.columns.length,i.vDomPadLeft=r),i.rightCol=i.columns.length):i.leftCol!==-1&&(i.vDomPadRight+=t),i.columns.push(n),n.modules.vdomHoz=u,r+=t)}),this.element.style.paddingLeft=this.vDomPadLeft+"px",this.element.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,t||(!n||this.reinitChanged(u))&&this.renitializeRows(),this.holderEl.scrollLeft=this.scrollLeft)};d.prototype.reinitChanged=function(n){var i=this,t=!0;return n.cols.length!==this.columns.length||n.leftCol!==this.leftCol||n.rightCol!==this.rightCol?!0:(n.cols.forEach(function(n,r){n!==i.columns[r]&&(t=!1)}),!t)};d.prototype.renitializeRows=function(){var n=this,t=this.table.rowManager.getVisibleRows();t.forEach(function(t){n.reinitializeRow(t,!0)})};d.prototype.scroll=function(n){this.vDomScrollPosLeft+=n;this.vDomScrollPosRight+=n;n>this.holderEl.clientWidth*.8?this.reinitialize():n>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())};d.prototype.colPositionAdjust=function(n,t,i){for(var u,r=n;r<t;r++)u=this.columns[r],u.modules.vdomHoz.leftPos-=i,u.modules.vdomHoz.rightPos-=i};d.prototype.addColRight=function(){var n=this.columns[this.rightCol+1],r,i,t;n&&n.modules.vdomHoz.leftPos<=this.vDomScrollPosRight&&(r=this.table.rowManager.getVisibleRows(),r.forEach(function(t){if(t.type!=="group"){var i=t.getCell(n);t.getElement().appendChild(i.getElement());i.cellRendered()}}),this.fitDataColAvg&&(i=n.getWidth(),i===this.fitDataColAvg&&(n.reinitializeWidth(),t=i-n.getWidth(),t&&(n.modules.vdomHoz.rightPos-=t,this.colPositionAdjust(this.rightCol+1,this.columns.length,t)))),this.rightCol++,this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=n.getWidth(),this.element.style.paddingRight=this.vDomPadRight+"px",this.addColRight())};d.prototype.addColLeft=function(){var n=this.columns[this.leftCol-1],t;n&&n.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft&&(t=this.table.rowManager.getVisibleRows(),t.forEach(function(t){if(t.type!=="group"){var i=t.getCell(n);t.getElement().prepend(i.getElement());i.cellRendered()}}),this.leftCol?this.vDomPadLeft-=n.getWidth():this.vDomPadLeft=0,this.element.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol--,this.addColLeft())};d.prototype.removeColRight=function(n){var n=this.columns[this.rightCol],t;n&&n.modules.vdomHoz.leftPos>this.vDomScrollPosRight&&(t=this.table.rowManager.getVisibleRows(),n.modules.vdomHoz.visible=!1,t.forEach(function(t){if(t.type!=="group"){var i=t.getCell(n);t.getElement().removeChild(i.getElement())}}),this.vDomPadRight+=n.getWidth(),this.element.style.paddingRight=this.vDomPadRight+"px",this.rightCol--,this.removeColRight())};d.prototype.removeColLeft=function(){var n=this.columns[this.leftCol],t;n&&n.modules.vdomHoz.rightPos<this.vDomScrollPosLeft&&(t=this.table.rowManager.getVisibleRows(),t.forEach(function(t){if(t.type!=="group"){var i=t.getCell(n);t.getElement().removeChild(i.getElement())}}),this.vDomPadLeft+=n.getWidth(),this.element.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol++,this.removeColLeft())};d.prototype.initializeRow=function(n){var t,i,r;if(n.type!=="group")for(n.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol},t=this.leftCol;t<=this.rightCol;t++)i=this.columns[t],i.visible&&(r=n.getCell(i),n.getElement().appendChild(r.getElement()),r.cellRendered())};d.prototype.reinitializeRow=function(n,t){if(n.type!=="group"&&(t||!n.modules.vdomHoz||n.modules.vdomHoz.leftCol!==this.leftCol||n.modules.vdomHoz.rightCol!==this.rightCol)){for(var i=n.getElement();i.firstChild;)i.removeChild(i.firstChild);this.initializeRow(n)}};h=function(n){this._row=n};h.prototype.getData=function(n){return this._row.getData(n)};h.prototype.getElement=function(){return this._row.getElement()};h.prototype.getCells=function(){var n=[];return this._row.getCells().forEach(function(t){n.push(t.getComponent())}),n};h.prototype.getCell=function(n){var t=this._row.getCell(n);return t?t.getComponent():!1};h.prototype.getIndex=function(){return this._row.getData("data")[this._row.table.options.index]};h.prototype.getPosition=function(n){return this._row.table.rowManager.getRowPosition(this._row,n)};h.prototype.delete=function(){return this._row.delete()};h.prototype.scrollTo=function(){return this._row.table.rowManager.scrollToRow(this._row)};h.prototype.pageTo=function(){if(this._row.table.modExists("page",!0))return this._row.table.modules.page.setPageToRow(this._row)};h.prototype.move=function(n,t){this._row.moveToRow(n,t)};h.prototype.update=function(n){return this._row.updateData(n)};h.prototype.normalizeHeight=function(){this._row.normalizeHeight(!0)};h.prototype.select=function(){this._row.table.modules.selectRow.selectRows(this._row)};h.prototype.deselect=function(){this._row.table.modules.selectRow.deselectRows(this._row)};h.prototype.toggleSelect=function(){this._row.table.modules.selectRow.toggleRow(this._row)};h.prototype.isSelected=function(){return this._row.table.modules.selectRow.isRowSelected(this._row)};h.prototype._getSelf=function(){return this._row};h.prototype.validate=function(){return this._row.validate()};h.prototype.freeze=function(){this._row.table.modExists("frozenRows",!0)&&this._row.table.modules.frozenRows.freezeRow(this._row)};h.prototype.unfreeze=function(){this._row.table.modExists("frozenRows",!0)&&this._row.table.modules.frozenRows.unfreezeRow(this._row)};h.prototype.isFrozen=function(){if(this._row.table.modExists("frozenRows",!0)){var n=this._row.table.modules.frozenRows.rows.indexOf(this._row);return n>-1}return!1};h.prototype.treeCollapse=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.collapseRow(this._row)};h.prototype.treeExpand=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.expandRow(this._row)};h.prototype.treeToggle=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.toggleRow(this._row)};h.prototype.getTreeParent=function(){return this._row.table.modExists("dataTree",!0)?this._row.table.modules.dataTree.getTreeParent(this._row):!1};h.prototype.getTreeChildren=function(){return this._row.table.modExists("dataTree",!0)?this._row.table.modules.dataTree.getTreeChildren(this._row,!0):!1};h.prototype.addTreeChild=function(n,t,i){return this._row.table.modExists("dataTree",!0)?this._row.table.modules.dataTree.addTreeChildRow(this._row,n,t,i):!1};h.prototype.reformat=function(){return this._row.reinitialize()};h.prototype.getGroup=function(){return this._row.getGroup().getComponent()};h.prototype.getTable=function(){return this._row.table};h.prototype.getNextRow=function(){var n=this._row.nextRow();return n?n.getComponent():n};h.prototype.getPrevRow=function(){var n=this._row.prevRow();return n?n.getComponent():n};u=function(n,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"row";this.table=t.table;this.parent=t;this.data={};this.type=i;this.element=!1;this.modules={};this.cells=[];this.height=0;this.heightStyled="";this.manualHeight=!1;this.outerHeight=0;this.initialized=!1;this.heightInitialized=!1;this.component=null;this.created=!1;this.setData(n)};u.prototype.create=function(){this.created||(this.created=!0,this.generateElement())};u.prototype.createElement=function(){var n=document.createElement("div");n.classList.add("tabulator-row");n.setAttribute("role","row");this.element=n};u.prototype.getElement=function(){return this.create(),this.element};u.prototype.detachElement=function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)};u.prototype.generateElement=function(){var n=this,t,i,r;this.createElement();n.table.options.selectable!==!1&&n.table.modExists("selectRow")&&n.table.modules.selectRow.initializeRow(this);n.table.options.movableRows!==!1&&n.table.modExists("moveRow")&&n.table.modules.moveRow.initializeRow(this);n.table.options.dataTree!==!1&&n.table.modExists("dataTree")&&n.table.modules.dataTree.initializeRow(this);n.table.options.responsiveLayout==="collapse"&&n.table.modExists("responsiveLayout")&&n.table.modules.responsiveLayout.initializeRow(this);(n.table.options.rowContextMenu||n.table.options.rowClickMenu)&&this.table.modExists("menu")&&n.table.modules.menu.initializeRow(this);n.table.options.rowClick&&n.element.addEventListener("click",function(t){n.table.options.rowClick(t,n.getComponent())});n.table.options.rowDblClick&&n.element.addEventListener("dblclick",function(t){n.table.options.rowDblClick(t,n.getComponent())});n.table.options.rowContext&&n.element.addEventListener("contextmenu",function(t){n.table.options.rowContext(t,n.getComponent())});n.table.options.rowMouseEnter&&n.element.addEventListener("mouseenter",function(t){n.table.options.rowMouseEnter(t,n.getComponent())});n.table.options.rowMouseLeave&&n.element.addEventListener("mouseleave",function(t){n.table.options.rowMouseLeave(t,n.getComponent())});n.table.options.rowMouseOver&&n.element.addEventListener("mouseover",function(t){n.table.options.rowMouseOver(t,n.getComponent())});n.table.options.rowMouseOut&&n.element.addEventListener("mouseout",function(t){n.table.options.rowMouseOut(t,n.getComponent())});n.table.options.rowMouseMove&&n.element.addEventListener("mousemove",function(t){n.table.options.rowMouseMove(t,n.getComponent())});n.table.options.rowTap&&(r=!1,n.element.addEventListener("touchstart",function(){r=!0},{passive:!0}),n.element.addEventListener("touchend",function(t){r&&n.table.options.rowTap(t,n.getComponent());r=!1}));n.table.options.rowDblTap&&(t=null,n.element.addEventListener("touchend",function(i){t?(clearTimeout(t),t=null,n.table.options.rowDblTap(i,n.getComponent())):t=setTimeout(function(){clearTimeout(t);t=null},300)}));n.table.options.rowTapHold&&(i=null,n.element.addEventListener("touchstart",function(t){clearTimeout(i);i=setTimeout(function(){clearTimeout(i);i=null;r=!1;n.table.options.rowTapHold(t,n.getComponent())},1e3)},{passive:!0}),n.element.addEventListener("touchend",function(){clearTimeout(i);i=null}))};u.prototype.generateCells=function(){this.cells=this.table.columnManager.generateCells(this)};u.prototype.initialize=function(n){var t=this;if(this.create(),!this.initialized||n){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layoutRow(this);this.generateCells();this.table.options.virtualDomHoz&&this.table.vdomHoz.initialized?this.table.vdomHoz.initializeRow(this):this.cells.forEach(function(n){t.element.appendChild(n.getElement());n.cellRendered()});n&&this.normalizeHeight();this.table.options.dataTree&&this.table.modExists("dataTree")&&this.table.modules.dataTree.layoutRow(this);this.table.options.responsiveLayout==="collapse"&&this.table.modExists("responsiveLayout")&&this.table.modules.responsiveLayout.layoutRow(this);this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent());this.table.options.resizableRows&&this.table.modExists("resizeRows")&&this.table.modules.resizeRows.initializeRow(this);this.initialized=!0}else this.table.options.virtualDomHoz&&this.table.vdomHoz.reinitializeRow(this)};u.prototype.reinitializeHeight=function(){this.heightInitialized=!1;this.element&&this.element.offsetParent!==null&&this.normalizeHeight(!0)};u.prototype.reinitialize=function(){this.initialized=!1;this.heightInitialized=!1;this.manualHeight||(this.height=0,this.heightStyled="");this.element&&this.element.offsetParent!==null&&this.initialize(!0);this.table.options.dataTree&&this.table.modExists("dataTree",!0)&&this.table.modules.dataTree.getTreeChildren(this,!1,!0).forEach(function(n){n.reinitialize(!0)})};u.prototype.calcHeight=function(n){var t=0,i=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach(function(n){var i=n.getHeight();i>t&&(t=i)});this.height=n?Math.max(t,i):this.manualHeight?this.height:Math.max(t,i);this.heightStyled=this.height?this.height+"px":"";this.outerHeight=this.element.offsetHeight};u.prototype.setCellHeight=function(){this.cells.forEach(function(n){n.setHeight()});this.heightInitialized=!0};u.prototype.clearCellHeight=function(){this.cells.forEach(function(n){n.clearHeight()})};u.prototype.normalizeHeight=function(n){n&&this.clearCellHeight();this.calcHeight(n);this.setCellHeight()};u.prototype.setHeight=function(n,t){(this.height!=n||t)&&(this.manualHeight=!0,this.height=n,this.heightStyled=n?n+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight)};u.prototype.getHeight=function(){return this.outerHeight};u.prototype.getWidth=function(){return this.element.offsetWidth};u.prototype.deleteCell=function(n){var t=this.cells.indexOf(n);t>-1&&this.cells.splice(t,1)};u.prototype.setData=function(n){this.table.modExists("mutator")&&(n=this.table.modules.mutator.transformRow(n,"data"));this.data=n;this.table.options.reactiveData&&this.table.modExists("reactiveData",!0)&&this.table.modules.reactiveData.watchRow(this)};u.prototype.updateData=function(t){var i=this,f=this.element&&n.prototype.helpers.elVisible(this.element),r={},u;return new Promise(function(n){var e,o;typeof t=="string"&&(t=JSON.parse(t));i.table.options.reactiveData&&i.table.modExists("reactiveData",!0)&&i.table.modules.reactiveData.block();i.table.modExists("mutator")?(r=Object.assign(r,i.data),r=Object.assign(r,t),u=i.table.modules.mutator.transformRow(r,"data",t)):u=t;for(e in u)i.data[e]=u[e];i.table.options.reactiveData&&i.table.modExists("reactiveData",!0)&&i.table.modules.reactiveData.unblock();for(e in t)o=i.table.columnManager.getColumnsByFieldRoot(e),o.forEach(function(n){var t=i.getCell(n.getField()),r;t&&(r=n.getFieldValue(u),t.getValue()!=r&&(t.setValueProcessData(r),f&&t.cellRendered()))});i.table.options.groupUpdateOnCellEdit&&i.table.options.groupBy&&i.table.modExists("groupRows")&&i.table.modules.groupRows.reassignRowToGroup(i.row);f?(i.normalizeHeight(!0),i.table.options.rowFormatter&&i.table.options.rowFormatter(i.getComponent())):(i.initialized=!1,i.height=0,i.heightStyled="");i.table.options.dataTree!==!1&&i.table.modExists("dataTree")&&i.table.modules.dataTree.redrawNeeded(t)&&(i.table.modules.dataTree.initializeRow(i),f&&(i.table.modules.dataTree.layoutRow(i),i.table.rowManager.refreshActiveData("tree",!1,!0)));i.table.options.rowUpdated.call(i.table,i.getComponent());i.table.options.dataChanged&&i.table.options.dataChanged.call(i.table,i.table.rowManager.getData());n()})};u.prototype.getData=function(n){return n&&this.table.modExists("accessor")?this.table.modules.accessor.transformRow(this,n):this.data};u.prototype.getCell=function(n){return n=this.table.columnManager.findColumn(n),this.cells.find(function(t){return t.column===n})};u.prototype.getCellIndex=function(n){return this.cells.findIndex(function(t){return t===n})};u.prototype.findNextEditableCell=function(t){var f=!1,r,i,u;if(t<this.cells.length-1)for(r=t+1;r<this.cells.length;r++)if(i=this.cells[r],i.column.modules.edit&&n.prototype.helpers.elVisible(i.getElement())&&(u=!0,typeof i.column.modules.edit.check=="function"&&(u=i.column.modules.edit.check(i.getComponent())),u)){f=i;break}return f};u.prototype.findPrevEditableCell=function(t){var f=!1,r,i,u;if(t>0)for(r=t-1;r>=0;r--)if(i=this.cells[r],u=!0,i.column.modules.edit&&n.prototype.helpers.elVisible(i.getElement())&&(typeof i.column.modules.edit.check=="function"&&(u=i.column.modules.edit.check(i.getComponent())),u)){f=i;break}return f};u.prototype.getCells=function(){return this.cells};u.prototype.nextRow=function(){var n=this.table.rowManager.nextDisplayRow(this,!0);return n||!1};u.prototype.prevRow=function(){var n=this.table.rowManager.prevDisplayRow(this,!0);return n||!1};u.prototype.moveToRow=function(n,t){var i=this.table.rowManager.findRow(n);i?(this.table.rowManager.moveRowActual(this,i,!t),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",n)};u.prototype.validate=function(){var n=[];return this.cells.forEach(function(t){t.validate()||n.push(t.getComponent())}),n.length?n:!0};u.prototype.delete=function(){var n=this;return new Promise(function(t){var i,r;n.table.options.history&&n.table.modExists("history")&&(n.table.options.groupBy&&n.table.modExists("groupRows")?(r=n.getGroup().rows,i=r.indexOf(n),i&&(i=r[i-1])):(i=n.table.rowManager.getRowIndex(n),i&&(i=n.table.rowManager.rows[i-1])),n.table.modules.history.action("rowDelete",n,{data:n.getData(),pos:!i,index:i}));n.deleteActual();t()})};u.prototype.deleteActual=function(n){var t=this.table.rowManager.getRowIndex(this);this.detatchModules();this.table.options.reactiveData&&this.table.modExists("reactiveData",!0);this.modules.group&&this.modules.group.removeRow(this);this.table.rowManager.deleteRow(this,n);this.deleteCells();this.initialized=!1;this.heightInitialized=!1;this.element=!1;this.table.options.dataTree&&this.table.modExists("dataTree",!0)&&this.table.modules.dataTree.rowDelete(this);this.table.modExists("columnCalcs")&&(this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.columnCalcs.recalcRowGroup(this):this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows))};u.prototype.detatchModules=function(){this.table.modExists("selectRow")&&this.table.modules.selectRow._deselectRow(this,!0);this.table.modExists("edit")&&this.table.modules.edit.currentCell.row===this&&this.table.modules.edit.cancelEdit();this.table.modExists("frozenRows")&&this.table.modules.frozenRows.detachRow(this)};u.prototype.deleteCells=function(){for(var t=this.cells.length,n=0;n<t;n++)this.cells[0].delete()};u.prototype.wipe=function(){if(this.detatchModules(),this.deleteCells(),this.element){while(this.element.firstChild)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1;this.modules={}};u.prototype.getGroup=function(){return this.modules.group||!1};u.prototype.getComponent=function(){return this.component||(this.component=new h(this)),this.component};p=function(n){this._cell=n};p.prototype.getValue=function(){return this._cell.getValue()};p.prototype.getOldValue=function(){return this._cell.getOldValue()};p.prototype.getInitialValue=function(){return this._cell.initialValue};p.prototype.getElement=function(){return this._cell.getElement()};p.prototype.getRow=function(){return this._cell.row.getComponent()};p.prototype.getData=function(){return this._cell.row.getData()};p.prototype.getField=function(){return this._cell.column.getField()};p.prototype.getColumn=function(){return this._cell.column.getComponent()};p.prototype.setValue=function(n,t){typeof t=="undefined"&&(t=!0);this._cell.setValue(n,t)};p.prototype.restoreOldValue=function(){this._cell.setValueActual(this._cell.getOldValue())};p.prototype.restoreInitialValue=function(){this._cell.setValueActual(this._cell.initialValue)};p.prototype.edit=function(n){return this._cell.edit(n)};p.prototype.cancelEdit=function(){this._cell.cancelEdit()};p.prototype.isEdited=function(){return!!this._cell.modules.edit&&this._cell.modules.edit.edited};p.prototype.clearEdited=function(){self.table.modExists("edit",!0)&&this._cell.table.modules.edit.clearEdited(this._cell)};p.prototype.isValid=function(){return this._cell.modules.validate?!this._cell.modules.validate.invalid:!0};p.prototype.validate=function(){return this._cell.validate()};p.prototype.clearValidation=function(){this._cell.table.modExists("validate",!0)&&this._cell.table.modules.validate.clearValidation(this._cell)};p.prototype.nav=function(){return this._cell.nav()};p.prototype.checkHeight=function(){this._cell.checkHeight()};p.prototype.getTable=function(){return this._cell.table};p.prototype._getSelf=function(){return this._cell};s=function(n,t){this.table=n.table;this.column=n;this.row=t;this.element=null;this.value=null;this.initialValue;this.oldValue=null;this.modules={};this.height=null;this.width=null;this.minWidth=null;this.component=null;this.loaded=!1;this.build()};s.prototype.build=function(){this.generateElement();this.setWidth();this._configureCell();this.setValueActual(this.column.getFieldValue(this.row.data));this.initialValue=this.value};s.prototype.generateElement=function(){this.element=document.createElement("div");this.element.className="tabulator-cell";this.element.setAttribute("role","gridcell");this.element=this.element};s.prototype._configureCell=function(){var n=this,i=n.column.cellEvents,t=n.element,r=this.column.getField(),u;t.style.textAlign=n.column.hozAlign;n.column.vertAlign&&(t.style.display="inline-flex",t.style.alignItems={top:"flex-start",bottom:"flex-end",middle:"center"}[n.column.vertAlign]||"",n.column.hozAlign&&(t.style.justifyContent={left:"flex-start",right:"flex-end",center:"center"}[n.column.hozAlign]||""));r&&t.setAttribute("tabulator-field",r);n.column.definition.cssClass&&(u=n.column.definition.cssClass.split(" "),u.forEach(function(n){t.classList.add(n)}));this.table.options.tooltipGenerationMode==="hover"&&t.addEventListener("mouseenter",function(){n._generateTooltip()});n._bindClickEvents(i);n._bindTouchEvents(i);n._bindMouseEvents(i);n.column.modules.edit&&n.table.modules.edit.bindEditor(n);n.column.definition.rowHandle&&n.table.options.movableRows!==!1&&n.table.modExists("moveRow")&&n.table.modules.moveRow.initializeCell(n);n.column.visible||n.hide()};s.prototype._bindClickEvents=function(n){var t=this,i=t.element;(n.cellClick||t.table.options.cellClick)&&i.addEventListener("click",function(i){var r=t.getComponent();n.cellClick&&n.cellClick.call(t.table,i,r);t.table.options.cellClick&&t.table.options.cellClick.call(t.table,i,r)});n.cellDblClick||this.table.options.cellDblClick?i.addEventListener("dblclick",function(i){var r=t.getComponent();n.cellDblClick&&n.cellDblClick.call(t.table,i,r);t.table.options.cellDblClick&&t.table.options.cellDblClick.call(t.table,i,r)}):i.addEventListener("dblclick",function(n){var i;if(!t.table.modExists("edit")||t.table.modules.edit.currentCell!==t){n.preventDefault();try{document.selection?(i=document.body.createTextRange(),i.moveToElementText(t.element),i.select()):window.getSelection&&(i=document.createRange(),i.selectNode(t.element),window.getSelection().removeAllRanges(),window.getSelection().addRange(i))}catch(n){}}});(n.cellContext||this.table.options.cellContext)&&i.addEventListener("contextmenu",function(i){var r=t.getComponent();n.cellContext&&n.cellContext.call(t.table,i,r);t.table.options.cellContext&&t.table.options.cellContext.call(t.table,i,r)})};s.prototype._bindMouseEvents=function(n){var t=this,i=t.element;(n.cellMouseEnter||t.table.options.cellMouseEnter)&&i.addEventListener("mouseenter",function(i){var r=t.getComponent();n.cellMouseEnter&&n.cellMouseEnter.call(t.table,i,r);t.table.options.cellMouseEnter&&t.table.options.cellMouseEnter.call(t.table,i,r)});(n.cellMouseLeave||t.table.options.cellMouseLeave)&&i.addEventListener("mouseleave",function(i){var r=t.getComponent();n.cellMouseLeave&&n.cellMouseLeave.call(t.table,i,r);t.table.options.cellMouseLeave&&t.table.options.cellMouseLeave.call(t.table,i,r)});(n.cellMouseOver||t.table.options.cellMouseOver)&&i.addEventListener("mouseover",function(i){var r=t.getComponent();n.cellMouseOver&&n.cellMouseOver.call(t.table,i,r);t.table.options.cellMouseOver&&t.table.options.cellMouseOver.call(t.table,i,r)});(n.cellMouseOut||t.table.options.cellMouseOut)&&i.addEventListener("mouseout",function(i){var r=t.getComponent();n.cellMouseOut&&n.cellMouseOut.call(t.table,i,r);t.table.options.cellMouseOut&&t.table.options.cellMouseOut.call(t.table,i,r)});(n.cellMouseMove||t.table.options.cellMouseMove)&&i.addEventListener("mousemove",function(i){var r=t.getComponent();n.cellMouseMove&&n.cellMouseMove.call(t.table,i,r);t.table.options.cellMouseMove&&t.table.options.cellMouseMove.call(t.table,i,r)})};s.prototype._bindTouchEvents=function(n){var t=this,u=t.element,i,r,f;(n.cellTap||this.table.options.cellTap)&&(f=!1,u.addEventListener("touchstart",function(){f=!0},{passive:!0}),u.addEventListener("touchend",function(i){if(f){var r=t.getComponent();n.cellTap&&n.cellTap.call(t.table,i,r);t.table.options.cellTap&&t.table.options.cellTap.call(t.table,i,r)}f=!1}));(n.cellDblTap||this.table.options.cellDblTap)&&(i=null,u.addEventListener("touchend",function(r){if(i){clearTimeout(i);i=null;var u=t.getComponent();n.cellDblTap&&n.cellDblTap.call(t.table,r,u);t.table.options.cellDblTap&&t.table.options.cellDblTap.call(t.table,r,u)}else i=setTimeout(function(){clearTimeout(i);i=null},300)}));(n.cellTapHold||this.table.options.cellTapHold)&&(r=null,u.addEventListener("touchstart",function(i){clearTimeout(r);r=setTimeout(function(){clearTimeout(r);r=null;f=!1;var u=t.getComponent();n.cellTapHold&&n.cellTapHold.call(t.table,i,u);t.table.options.cellTapHold&&t.table.options.cellTapHold.call(t.table,i,u)},1e3)},{passive:!0}),u.addEventListener("touchend",function(){clearTimeout(r);r=null}))};s.prototype._generateContents=function(){var n=this.table.modExists("format")?this.table.modules.format.formatValue(this):this.element.innerHTML=this.value;switch(typeof n=="undefined"?"undefined":_typeof(n)){case"object":if(n instanceof Node){while(this.element.firstChild)this.element.removeChild(this.element.firstChild);this.element.appendChild(n)}else this.element.innerHTML="",n!=null&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",n);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=n}};s.prototype.cellRendered=function(){this.table.modExists("format")&&this.table.modules.format.cellRendered&&this.table.modules.format.cellRendered(this)};s.prototype._generateTooltip=function(){var n=this.column.tooltip;n?(n===!0?n=this.value:typeof n=="function"&&(n=n(this.getComponent()),n===!1&&(n="")),typeof n=="undefined"&&(n=""),this.element.setAttribute("title",n)):this.element.setAttribute("title","")};s.prototype.getElement=function(n){return this.loaded||(this.loaded=!0,n||this.layoutElement()),this.element};s.prototype.getValue=function(){return this.value};s.prototype.getOldValue=function(){return this.oldValue};s.prototype.setValue=function(n,t){var r=this.setValueProcessData(n,t),i;r&&(this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("cellEdit",this,{oldValue:this.oldValue,newValue:this.value}),i=this.getComponent(),this.column.cellEvents.cellEdited&&this.column.cellEvents.cellEdited.call(this.table,i),this.table.options.groupUpdateOnCellEdit&&this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.reassignRowToGroup(this.row),this.cellRendered(),this.table.options.cellEdited.call(this.table,i),this.table.options.dataChanged&&this.table.options.dataChanged.call(this.table,this.table.rowManager.getData()))};s.prototype.setValueProcessData=function(n,t){var i=!1;return this.value!=n&&(i=!0,t&&this.column.modules.mutate&&(n=this.table.modules.mutator.transformCell(this,n))),this.setValueActual(n),i&&this.table.modExists("columnCalcs")&&(this.column.definition.topCalc||this.column.definition.bottomCalc)&&(this.table.options.groupBy&&this.table.modExists("groupRows")?((this.table.options.columnCalcs=="table"||this.table.options.columnCalcs=="both")&&this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows),this.table.options.columnCalcs!="table"&&this.table.modules.columnCalcs.recalcRowGroup(this.row)):this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows)),i};s.prototype.setValueActual=function(n){this.oldValue=this.value;this.value=n;this.table.options.reactiveData&&this.table.modExists("reactiveData")&&this.table.modules.reactiveData.block();this.column.setFieldValue(this.row.data,n);this.table.options.reactiveData&&this.table.modExists("reactiveData")&&this.table.modules.reactiveData.unblock();this.loaded&&this.layoutElement()};s.prototype.layoutElement=function(){this._generateContents();this._generateTooltip();this.table.options.resizableColumns&&this.table.modExists("resizeColumns")&&this.row.type==="row"&&this.table.modules.resizeColumns.initializeColumn("cell",this.column,this.element);(this.column.definition.contextMenu||this.column.definition.clickMenu)&&this.table.modExists("menu")&&this.table.modules.menu.initializeCell(this);this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layoutElement(this.element,this.column)};s.prototype.setWidth=function(){this.width=this.column.width;this.element.style.width=this.column.widthStyled};s.prototype.clearWidth=function(){this.width="";this.element.style.width=""};s.prototype.getWidth=function(){return this.width||this.element.offsetWidth};s.prototype.setMinWidth=function(){this.minWidth=this.column.minWidth;this.element.style.minWidth=this.column.minWidthStyled};s.prototype.setMaxWidth=function(){this.maxWidth=this.column.maxWidth;this.element.style.maxWidth=this.column.maxWidthStyled};s.prototype.checkHeight=function(){this.row.reinitializeHeight()};s.prototype.clearHeight=function(){this.element.style.height="";this.height=null};s.prototype.setHeight=function(){this.height=this.row.height;this.element.style.height=this.row.heightStyled};s.prototype.getHeight=function(){return this.height||this.element.offsetHeight};s.prototype.show=function(){this.element.style.display=this.column.vertAlign?"inline-flex":""};s.prototype.hide=function(){this.element.style.display="none"};s.prototype.edit=function(n){if(this.table.modExists("edit",!0))return this.table.modules.edit.editCell(this,n)};s.prototype.cancelEdit=function(){if(this.table.modExists("edit",!0)){var n=this.table.modules.edit.getCurrentCell();n&&n._getSelf()===this?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}};s.prototype.validate=function(){if(this.column.modules.validate&&this.table.modExists("validate",!0)){var n=this.table.modules.validate.validate(this.column.modules.validate,this,this.getValue());return n===!0}return!0};s.prototype.delete=function(){!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element);this.modules.validate&&this.modules.validate.invalid&&this.table.modules.validate.clearValidation(this);this.modules.edit&&this.modules.edit.edited&&this.table.modules.edit.clearEdited(this);this.table.options.history&&this.table.modules.history.clearComponentHistory(this);this.element=!1;this.column.deleteCell(this);this.row.deleteCell(this);this.calcs={}};s.prototype.nav=function(){var n=this,t=!1,i=this.row.getCellIndex(this);return{next:function(){var t=this.right(),i;return t?!0:(i=n.table.rowManager.nextDisplayRow(n.row,!0),i&&(t=i.findNextEditableCell(-1),t))?(t.edit(),!0):!1},prev:function(){var t=this.left(),i;return t?!0:(i=n.table.rowManager.prevDisplayRow(n.row,!0),i&&(t=i.findPrevEditableCell(i.cells.length),t))?(t.edit(),!0):!1},left:function(){return t=n.row.findPrevEditableCell(i),t?(t.edit(),!0):!1},right:function(){return t=n.row.findNextEditableCell(i),t?(t.edit(),!0):!1},up:function(){var t=n.table.rowManager.prevDisplayRow(n.row,!0);t&&t.cells[i].edit()},down:function(){var t=n.table.rowManager.nextDisplayRow(n.row,!0);t&&t.cells[i].edit()}}};s.prototype.getIndex=function(){this.row.getCellIndex(this)};s.prototype.getComponent=function(){return this.component||(this.component=new p(this)),this.component};lt=function(n){this.table=n;this.active=!1;this.element=this.createElement();this.external=!1;this.links=[];this._initialize()};lt.prototype.createElement=function(){var n=document.createElement("div");return n.classList.add("tabulator-footer"),n};lt.prototype._initialize=function(){if(this.table.options.footerElement)switch(_typeof(this.table.options.footerElement)){case"string":this.table.options.footerElement[0]==="<"?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement));break;default:this.element=this.table.options.footerElement}};lt.prototype.getElement=function(){return this.element};lt.prototype.append=function(n,t){this.activate(t);this.element.appendChild(n);this.table.rowManager.adjustTableSize()};lt.prototype.prepend=function(n,t){this.activate(t);this.element.insertBefore(n,this.element.firstChild);this.table.rowManager.adjustTableSize()};lt.prototype.remove=function(n){n.parentNode.removeChild(n);this.deactivate()};lt.prototype.deactivate=function(n){(!this.element.firstChild||n)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)};lt.prototype.activate=function(n){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display=""));n&&this.links.push(n)};lt.prototype.redraw=function(){this.links.forEach(function(n){n.footerRedraw()})};n=function n(t,i){this.options={};this.columnManager=null;this.rowManager=null;this.footerManager=null;this.vdomHoz=null;this.browser="";this.browserSlow=!1;this.browserMobile=!1;this.rtl=!1;this.modules={};this.initializeElement(t)&&(this.initializeOptions(i||{}),this._create());n.prototype.comms.register(this)};n.prototype.defaultOptions={height:!1,minHeight:!1,maxHeight:!1,layout:"fitData",layoutColumnsOnNewData:!1,columnMinWidth:40,columnMaxWidth:!1,columnHeaderVertAlign:"top",columnVertAlign:!1,resizableColumns:!0,resizableRows:!1,autoResize:!0,columns:[],cellHozAlign:"",cellVertAlign:"",headerHozAlign:"",data:[],autoColumns:!1,autoColumnsDefinitions:!1,reactiveData:!1,nestedFieldSeparator:".",tooltips:!1,tooltipsHeader:!1,tooltipGenerationMode:"load",initialSort:!1,initialFilter:!1,initialHeaderFilter:!1,columnHeaderSortMulti:!0,sortOrderReverse:!1,headerSort:!0,headerSortTristate:!1,headerSortElement:"<div class='tabulator-arrow'><\/div>",footerElement:!1,index:"id",textDirection:"auto",keybindings:[],tabEndNewRow:!1,invalidOptionWarnings:!0,clipboard:!1,clipboardCopyStyled:!0,clipboardCopyConfig:!1,clipboardCopyFormatter:!1,clipboardCopyRowRange:"active",clipboardPasteParser:"table",clipboardPasteAction:"insert",clipboardCopied:function(){},clipboardPasted:function(){},clipboardPasteError:function(){},downloadDataFormatter:!1,downloadReady:function(n,t){return t},downloadComplete:!1,downloadConfig:{},downloadRowRange:"active",dataTree:!1,dataTreeFilter:!0,dataTreeSort:!0,dataTreeElementColumn:!1,dataTreeBranchElement:!0,dataTreeChildIndent:9,dataTreeChildField:"_children",dataTreeCollapseElement:!1,dataTreeExpandElement:!1,dataTreeStartExpanded:!1,dataTreeRowExpanded:function(){},dataTreeRowCollapsed:function(){},dataTreeChildColumnCalcs:!1,dataTreeSelectPropagate:!1,printAsHtml:!1,printFormatter:!1,printHeader:!1,printFooter:!1,printCopyStyle:!0,printStyled:!0,printVisibleRows:!0,printRowRange:"visible",printConfig:{},addRowPos:"bottom",selectable:"highlight",selectableRangeMode:"drag",selectableRollingSelection:!0,selectablePersistence:!0,selectableCheck:function(){return!0},headerFilterLiveFilterDelay:300,headerFilterPlaceholder:!1,headerVisible:!0,history:!1,locale:!1,langs:{},virtualDom:!0,virtualDomBuffer:0,virtualDomHoz:!1,persistentLayout:!1,persistentSort:!1,persistentFilter:!1,persistenceID:"",persistenceMode:!0,persistenceReaderFunc:!1,persistenceWriterFunc:!1,persistence:!1,responsiveLayout:!1,responsiveLayoutCollapseStartOpen:!0,responsiveLayoutCollapseUseFormatters:!0,responsiveLayoutCollapseFormatter:!1,pagination:!1,paginationSize:!1,paginationInitialPage:1,paginationButtonCount:5,paginationSizeSelector:!1,paginationElement:!1,paginationDataSent:{},paginationDataReceived:{},paginationAddRow:"page",ajaxURL:!1,ajaxURLGenerator:!1,ajaxParams:{},ajaxConfig:"get",ajaxContentType:"form",ajaxRequestFunc:!1,ajaxLoader:!0,ajaxLoaderLoading:!1,ajaxLoaderError:!1,ajaxFiltering:!1,ajaxSorting:!1,ajaxProgressiveLoad:!1,ajaxProgressiveLoadDelay:0,ajaxProgressiveLoadScrollMargin:0,groupBy:!1,groupStartOpen:!0,groupValues:!1,groupUpdateOnCellEdit:!1,groupHeader:!1,groupHeaderPrint:null,groupHeaderClipboard:null,groupHeaderHtmlOutput:null,groupHeaderDownload:null,htmlOutputConfig:!1,movableColumns:!1,movableRows:!1,movableRowsConnectedTables:!1,movableRowsConnectedElements:!1,movableRowsSender:!1,movableRowsReceiver:"insert",movableRowsSendingStart:function(){},movableRowsSent:function(){},movableRowsSentFailed:function(){},movableRowsSendingStop:function(){},movableRowsReceivingStart:function(){},movableRowsReceived:function(){},movableRowsReceivedFailed:function(){},movableRowsReceivingStop:function(){},movableRowsElementDrop:function(){},scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,tableBuilding:function(){},tableBuilt:function(){},renderStarted:function(){},renderComplete:function(){},rowClick:!1,rowDblClick:!1,rowContext:!1,rowTap:!1,rowDblTap:!1,rowTapHold:!1,rowMouseEnter:!1,rowMouseLeave:!1,rowMouseOver:!1,rowMouseOut:!1,rowMouseMove:!1,rowContextMenu:!1,rowClickMenu:!1,rowAdded:function(){},rowDeleted:function(){},rowMoved:function(){},rowUpdated:function(){},rowSelectionChanged:function(){},rowSelected:function(){},rowDeselected:function(){},rowResized:function(){},cellClick:!1,cellDblClick:!1,cellContext:!1,cellTap:!1,cellDblTap:!1,cellTapHold:!1,cellMouseEnter:!1,cellMouseLeave:!1,cellMouseOver:!1,cellMouseOut:!1,cellMouseMove:!1,cellEditing:function(){},cellEdited:function(){},cellEditCancelled:function(){},columnMoved:!1,columnResized:function(){},columnTitleChanged:function(){},columnVisibilityChanged:function(){},htmlImporting:function(){},htmlImported:function(){},dataLoading:function(){},dataLoaded:function(){},dataEdited:!1,dataChanged:!1,ajaxRequesting:function(){},ajaxResponse:!1,ajaxError:function(){},dataFiltering:!1,dataFiltered:!1,dataSorting:function(){},dataSorted:function(){},groupToggleElement:"arrow",groupClosedShowCalcs:!1,dataGrouping:function(){},dataGrouped:!1,groupVisibilityChanged:function(){},groupClick:!1,groupDblClick:!1,groupContext:!1,groupContextMenu:!1,groupClickMenu:!1,groupTap:!1,groupDblTap:!1,groupTapHold:!1,columnCalcs:!0,pageLoaded:function(){},localized:function(){},validationMode:"blocking",validationFailed:function(){},historyUndo:function(){},historyRedo:function(){},scrollHorizontal:function(){},scrollVertical:function(){}};n.prototype.initializeOptions=function(n){var t;if(n.invalidOptionWarnings!==!1)for(t in n)typeof this.defaultOptions[t]=="undefined"&&console.warn("Invalid table constructor option:",t);for(t in this.defaultOptions)this.options[t]=t in n?n[t]:Array.isArray(this.defaultOptions[t])?Object.assign([],this.defaultOptions[t]):_typeof(this.defaultOptions[t])==="object"&&this.defaultOptions[t]!==null?Object.assign({},this.defaultOptions[t]):this.defaultOptions[t]};n.prototype.initializeElement=function(n){return typeof HTMLElement!="undefined"&&n instanceof HTMLElement?(this.element=n,!0):typeof n=="string"?(this.element=document.querySelector(n),this.element?!0:(console.error("Tabulator Creation Error - no element found matching selector: ",n),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",n),!1)};n.prototype.rtlCheck=function(){var n=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if(n.direction!=="rtl")break;case"rtl":this.element.classList.add("tabulator-rtl");this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}};n.prototype._mapDepricatedFunctionality=function(){(this.options.persistentLayout||this.options.persistentSort||this.options.persistentFilter)&&(this.options.persistence||(this.options.persistence={}));this.options.dataEdited&&(console.warn("DEPRECATION WARNING - dataEdited option has been deprecated, please use the dataChanged option instead"),this.options.dataChanged=this.options.dataEdited);this.options.downloadDataFormatter&&console.warn("DEPRECATION WARNING - downloadDataFormatter option has been deprecated");typeof this.options.clipboardCopyHeader!="undefined"&&(this.options.columnHeaders=this.options.clipboardCopyHeader,console.warn("DEPRECATION WARNING - clipboardCopyHeader option has been deprecated, please use the columnHeaders property on the clipboardCopyConfig option"));this.options.printVisibleRows!==!0&&(console.warn("printVisibleRows option is deprecated, you should now use the printRowRange option"),this.options.persistence.printRowRange="active");this.options.printCopyStyle!==!0&&(console.warn("printCopyStyle option is deprecated, you should now use the printStyled option"),this.options.persistence.printStyled=this.options.printCopyStyle);this.options.persistentLayout&&(console.warn("persistentLayout option is deprecated, you should now use the persistence option"),this.options.persistence!==!0&&typeof this.options.persistence.columns=="undefined"&&(this.options.persistence.columns=!0));this.options.persistentSort&&(console.warn("persistentSort option is deprecated, you should now use the persistence option"),this.options.persistence!==!0&&typeof this.options.persistence.sort=="undefined"&&(this.options.persistence.sort=!0));this.options.persistentFilter&&(console.warn("persistentFilter option is deprecated, you should now use the persistence option"),this.options.persistence!==!0&&typeof this.options.persistence.filter=="undefined"&&(this.options.persistence.filter=!0));this.options.columnVertAlign&&(console.warn("columnVertAlign option is deprecated, you should now use the columnHeaderVertAlign option"),this.options.columnHeaderVertAlign=this.options.columnVertAlign)};n.prototype._clearSelection=function(){this.element.classList.add("tabulator-block-select");window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty();this.element.classList.remove("tabulator-block-select")};n.prototype._create=function(){this._clearObjectPointers();this._mapDepricatedFunctionality();this.bindModules();this.rtlCheck();this.element.tagName==="TABLE"&&this.modExists("htmlTableImport",!0)&&this.modules.htmlTableImport.parseTable();this.columnManager=new o(this);this.rowManager=new t(this);this.footerManager=new lt(this);this.columnManager.setRowManager(this.rowManager);this.rowManager.setColumnManager(this.columnManager);this.options.virtualDomHoz&&(this.vdomHoz=new d(this));this._buildElement();this._loadInitialData()};n.prototype._clearObjectPointers=function(){this.options.columns=this.options.columns.slice(0);this.options.reactiveData||(this.options.data=this.options.data.slice(0))};n.prototype._buildElement=function(){var s=this,i=this.element,t=this.modules,n=this.options,e,f,o,r,u;for(n.tableBuilding.call(this),i.classList.add("tabulator"),i.setAttribute("role","grid");i.firstChild;)i.removeChild(i.firstChild);n.height&&(n.height=isNaN(n.height)?n.height:n.height+"px",i.style.height=n.height);n.minHeight!==!1&&(n.minHeight=isNaN(n.minHeight)?n.minHeight:n.minHeight+"px",i.style.minHeight=n.minHeight);n.maxHeight!==!1&&(n.maxHeight=isNaN(n.maxHeight)?n.maxHeight:n.maxHeight+"px",i.style.maxHeight=n.maxHeight);this.columnManager.initialize();this.rowManager.initialize();this._detectBrowser();this.modExists("layout",!0)&&t.layout.initialize(n.layout);t.localize.initialize();n.headerFilterPlaceholder!==!1&&t.localize.setHeaderFilterPlaceholder(n.headerFilterPlaceholder);for(e in n.langs)t.localize.installLang(e,n.langs[e]);t.localize.setLocale(n.locale);typeof n.placeholder=="string"&&(f=document.createElement("div"),f.classList.add("tabulator-placeholder"),o=document.createElement("span"),o.innerHTML=n.placeholder,f.appendChild(o),n.placeholder=f);i.appendChild(this.columnManager.getElement());i.appendChild(this.rowManager.getElement());n.footerElement&&this.footerManager.activate();n.persistence&&this.modExists("persistence",!0)&&t.persistence.initialize();n.movableRows&&this.modExists("moveRow")&&t.moveRow.initialize();n.autoColumns&&this.options.data&&this.columnManager.generateColumnsFromRowData(this.options.data);this.modExists("columnCalcs")&&t.columnCalcs.initialize();this.columnManager.setColumns(n.columns);n.dataTree&&this.modExists("dataTree",!0)&&t.dataTree.initialize();this.modExists("frozenRows")&&this.modules.frozenRows.initialize();(n.persistence&&this.modExists("persistence",!0)&&t.persistence.config.sort||n.initialSort)&&this.modExists("sort",!0)&&(r=[],n.persistence&&this.modExists("persistence",!0)&&t.persistence.config.sort?(r=t.persistence.load("sort"),r===!1&&n.initialSort&&(r=n.initialSort)):n.initialSort&&(r=n.initialSort),t.sort.setSort(r));(n.persistence&&this.modExists("persistence",!0)&&t.persistence.config.filter||n.initialFilter)&&this.modExists("filter",!0)&&(u=[],n.persistence&&this.modExists("persistence",!0)&&t.persistence.config.filter?(u=t.persistence.load("filter"),u===!1&&n.initialFilter&&(u=n.initialFilter)):n.initialFilter&&(u=n.initialFilter),t.filter.setFilter(u));n.initialHeaderFilter&&this.modExists("filter",!0)&&n.initialHeaderFilter.forEach(function(n){var i=s.columnManager.findColumn(n.field);if(i)t.filter.setHeaderFilterValue(i,n.value);else return console.warn("Column Filter Error - No matching column found:",n.field),!1});this.modExists("ajax")&&t.ajax.initialize();n.pagination&&this.modExists("page",!0)&&t.page.initialize();n.groupBy&&this.modExists("groupRows",!0)&&t.groupRows.initialize();this.modExists("keybindings")&&t.keybindings.initialize();this.modExists("selectRow")&&t.selectRow.clearSelectionData(!0);n.autoResize&&this.modExists("resizeTable")&&t.resizeTable.initialize();this.modExists("clipboard")&&t.clipboard.initialize();n.printAsHtml&&this.modExists("print")&&t.print.initialize();n.tableBuilt.call(this)};n.prototype._loadInitialData=function(){var n=this;if(n.options.pagination&&n.modExists("page"))if(n.modules.page.reset(!0,!0),n.options.pagination=="local"){if(n.options.data.length)n.rowManager.setData(n.options.data,!1,!0);else{if((n.options.ajaxURL||n.options.ajaxURLGenerator)&&n.modExists("ajax")){n.modules.ajax.loadData(!1,!0).then(function(){}).catch(function(){n.options.paginationInitialPage&&n.modules.page.setPage(n.options.paginationInitialPage)});return}n.rowManager.setData(n.options.data,!1,!0)}n.options.paginationInitialPage&&n.modules.page.setPage(n.options.paginationInitialPage)}else n.options.ajaxURL?n.modules.page.setPage(n.options.paginationInitialPage).then(function(){}).catch(function(){}):n.rowManager.setData([],!1,!0);else n.options.data.length?n.rowManager.setData(n.options.data):(n.options.ajaxURL||n.options.ajaxURLGenerator)&&n.modExists("ajax")?n.modules.ajax.loadData(!1,!0).then(function(){}).catch(function(){}):n.rowManager.setData(n.options.data,!1,!0)};n.prototype.destroy=function(){var t=this.element;for(n.prototype.comms.deregister(this),this.options.reactiveData&&this.modExists("reactiveData",!0)&&this.modules.reactiveData.unwatchData(),this.rowManager.rows.forEach(function(n){n.wipe()}),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[],this.options.autoResize&&this.modExists("resizeTable")&&this.modules.resizeTable.clearBindings(),this.modExists("keybindings")&&this.modules.keybindings.clearBindings();t.firstChild;)t.removeChild(t.firstChild);t.classList.remove("tabulator")};n.prototype._detectBrowser=function(){var n=navigator.userAgent||navigator.vendor||window.opera;n.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):n.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):n.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1);this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4))};n.prototype.blockRedraw=function(){return this.rowManager.blockRedraw()};n.prototype.restoreRedraw=function(){return this.rowManager.restoreRedraw()};n.prototype.setDataFromLocalFile=function(n){var t=this;return new Promise(function(i,r){var u=document.createElement("input");u.type="file";u.accept=n||".json,application/json";u.addEventListener("change",function(){var e=u.files[0],n=new FileReader,f;n.readAsText(e);n.onload=function(u){try{f=JSON.parse(n.result)}catch(u){console.warn("File Load Error - File contents is invalid JSON",u);r(u);return}t.setData(f).then(function(n){i(n)}).catch(function(n){i(n)})};n.onerror=function(){console.warn("File Load Error - Unable to read file");r()}});u.click()})};n.prototype.setData=function(n,t,i){return this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this._setData(n,t,i,!1,!0)};n.prototype._setData=function(n,t,i,r,u){var f=this;if(typeof n=="string"){if(n.indexOf("{")==0||n.indexOf("[")==0)return f.rowManager.setData(JSON.parse(n),r,u);if(f.modExists("ajax",!0))return t&&f.modules.ajax.setParams(t),i&&f.modules.ajax.setConfig(i),f.modules.ajax.setUrl(n),f.options.pagination=="remote"&&f.modExists("page",!0)?(f.modules.page.reset(!0,!0),f.modules.page.setPage(1)):f.modules.ajax.loadData(r,u)}else return n?f.rowManager.setData(n,r,u):f.modExists("ajax")&&(f.modules.ajax.getUrl||f.options.ajaxURLGenerator)?f.options.pagination=="remote"&&f.modExists("page",!0)?(f.modules.page.reset(!0,!0),f.modules.page.setPage(1)):f.modules.ajax.loadData(r,u):f.rowManager.setData([],r,u)};n.prototype.clearData=function(){this.modExists("ajax")&&this.modules.ajax.blockActiveRequest();this.rowManager.clearData()};n.prototype.getData=function(n){return n===!0&&(console.warn("passing a boolean to the getData function is deprecated, you should now pass the string 'active'"),n="active"),this.rowManager.getData(n)};n.prototype.getDataCount=function(n){return n===!0&&(console.warn("passing a boolean to the getDataCount function is deprecated, you should now pass the string 'active'"),n="active"),this.rowManager.getDataCount(n)};n.prototype.searchRows=function(n,t,i){if(this.modExists("filter",!0))return this.modules.filter.search("rows",n,t,i)};n.prototype.searchData=function(n,t,i){if(this.modExists("filter",!0))return this.modules.filter.search("data",n,t,i)};n.prototype.getHtml=function(n,t,i){if(this.modExists("export",!0))return this.modules.export.getHtml(n,t,i)};n.prototype.print=function(n,t,i){if(this.modExists("print",!0))return this.modules.print.printFullscreen(n,t,i)};n.prototype.getAjaxUrl=function(){if(this.modExists("ajax",!0))return this.modules.ajax.getUrl()};n.prototype.replaceData=function(n,t,i){return this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this._setData(n,t,i,!0)};n.prototype.updateData=function(n){var i=this,r=this,t=0;return new Promise(function(u,f){i.modExists("ajax")&&i.modules.ajax.blockActiveRequest();typeof n=="string"&&(n=JSON.parse(n));n?n.forEach(function(n){var i=r.rowManager.findRow(n[r.options.index]);i&&(t++,i.updateData(n).then(function(){t--;t||u()}))}):(console.warn("Update Error - No data provided"),f("Update Error - No data provided"))})};n.prototype.addData=function(n,t,i){var r=this;return new Promise(function(u,f){r.modExists("ajax")&&r.modules.ajax.blockActiveRequest();typeof n=="string"&&(n=JSON.parse(n));n?r.rowManager.addRows(n,t,i).then(function(n){var t=[];n.forEach(function(n){t.push(n.getComponent())});u(t)}):(console.warn("Update Error - No data provided"),f("Update Error - No data provided"))})};n.prototype.updateOrAddData=function(n){var u=this,r=this,i=[],t=0;return new Promise(function(f,e){u.modExists("ajax")&&u.modules.ajax.blockActiveRequest();typeof n=="string"&&(n=JSON.parse(n));n?n.forEach(function(n){var u=r.rowManager.findRow(n[r.options.index]);t++;u?u.updateData(n).then(function(){t--;i.push(u.getComponent());t||f(i)}):r.rowManager.addRows(n).then(function(n){t--;i.push(n[0].getComponent());t||f(i)})}):(console.warn("Update Error - No data provided"),e("Update Error - No data provided"))})};n.prototype.getRow=function(n){var t=this.rowManager.findRow(n);return t?t.getComponent():(console.warn("Find Error - No matching row found:",n),!1)};n.prototype.getRowFromPosition=function(n,t){var i=this.rowManager.getRowFromPosition(n,t);return i?i.getComponent():(console.warn("Find Error - No matching row found:",n),!1)};n.prototype.deleteRow=function(n){var t=this;return new Promise(function(i,r){function f(){e++;e==n.length&&o&&(s.rowManager.reRenderInPosition(),i())}var s=t,e=0,o=0,u=[];Array.isArray(n)||(n=[n]);n.forEach(function(n){var i=t.rowManager.findRow(n,!0);i?u.push(i):(console.warn("Delete Error - No matching row found:",n),r("Delete Error - No matching row found"),f())});u.sort(function(n,i){return t.rowManager.rows.indexOf(n)>t.rowManager.rows.indexOf(i)?1:-1});u.forEach(function(n){n.delete().then(function(){o++;f()}).catch(function(n){f();r(n)})})})};n.prototype.addRow=function(n,t,i){var r=this;return new Promise(function(u){typeof n=="string"&&(n=JSON.parse(n));r.rowManager.addRows(n,t,i).then(function(n){r.modExists("columnCalcs")&&r.modules.columnCalcs.recalc(r.rowManager.activeRows);u(n[0].getComponent())})})};n.prototype.updateOrAddRow=function(n,t){var i=this;return new Promise(function(r,u){var f=i.rowManager.findRow(n);typeof t=="string"&&(t=JSON.parse(t));f?f.updateData(t).then(function(){i.modExists("columnCalcs")&&i.modules.columnCalcs.recalc(i.rowManager.activeRows);r(f.getComponent())}).catch(function(n){u(n)}):f=i.rowManager.addRows(t).then(function(n){i.modExists("columnCalcs")&&i.modules.columnCalcs.recalc(i.rowManager.activeRows);r(n[0].getComponent())}).catch(function(n){u(n)})})};n.prototype.updateRow=function(n,t){var i=this;return new Promise(function(r,u){var f=i.rowManager.findRow(n);typeof t=="string"&&(t=JSON.parse(t));f?f.updateData(t).then(function(){r(f.getComponent())}).catch(function(n){u(n)}):(console.warn("Update Error - No matching row found:",n),u("Update Error - No matching row found"))})};n.prototype.scrollToRow=function(n,t,i){var r=this;return new Promise(function(u,f){var e=r.rowManager.findRow(n);e?r.rowManager.scrollToRow(e,t,i).then(function(){u()}).catch(function(n){f(n)}):(console.warn("Scroll Error - No matching row found:",n),f("Scroll Error - No matching row found"))})};n.prototype.moveRow=function(n,t,i){var r=this.rowManager.findRow(n);r?r.moveToRow(t,i):console.warn("Move Error - No matching row found:",n)};n.prototype.getRows=function(n){return n===!0&&(console.warn("passing a boolean to the getRows function is deprecated, you should now pass the string 'active'"),n="active"),this.rowManager.getComponents(n)};n.prototype.getRowPosition=function(n,t){var i=this.rowManager.findRow(n);return i?this.rowManager.getRowPosition(i,t):(console.warn("Position Error - No matching row found:",n),!1)};n.prototype.copyToClipboard=function(n){this.modExists("clipboard",!0)&&this.modules.clipboard.copy(n)};n.prototype.setColumns=function(n){this.columnManager.setColumns(n)};n.prototype.getColumns=function(n){return this.columnManager.getComponents(n)};n.prototype.getColumn=function(n){var t=this.columnManager.findColumn(n);return t?t.getComponent():(console.warn("Find Error - No matching column found:",n),!1)};n.prototype.getColumnDefinitions=function(){return this.columnManager.getDefinitionTree()};n.prototype.getColumnLayout=function(){if(this.modExists("persistence",!0))return this.modules.persistence.parseColumns(this.columnManager.getColumns())};n.prototype.setColumnLayout=function(n){return this.modExists("persistence",!0)?(this.columnManager.setColumns(this.modules.persistence.mergeDefinition(this.options.columns,n)),!0):!1};n.prototype.showColumn=function(n){var t=this.columnManager.findColumn(n);if(t)t.show(),this.options.responsiveLayout&&this.modExists("responsiveLayout",!0)&&this.modules.responsiveLayout.update();else return console.warn("Column Show Error - No matching column found:",n),!1};n.prototype.hideColumn=function(n){var t=this.columnManager.findColumn(n);if(t)t.hide(),this.options.responsiveLayout&&this.modExists("responsiveLayout",!0)&&this.modules.responsiveLayout.update();else return console.warn("Column Hide Error - No matching column found:",n),!1};n.prototype.toggleColumn=function(n){var t=this.columnManager.findColumn(n);if(t)t.visible?t.hide():t.show();else return console.warn("Column Visibility Toggle Error - No matching column found:",n),!1};n.prototype.addColumn=function(n,t,i){var r=this;return new Promise(function(u,f){var e=r.columnManager.findColumn(i);r.columnManager.addColumn(n,t,e).then(function(n){u(n.getComponent())}).catch(function(n){f(n)})})};n.prototype.deleteColumn=function(n){var t=this;return new Promise(function(i,r){var u=t.columnManager.findColumn(n);u?u.delete().then(function(){i()}).catch(function(n){r(n)}):(console.warn("Column Delete Error - No matching column found:",n),r())})};n.prototype.updateColumnDefinition=function(n,t){var i=this;return new Promise(function(r,u){var f=i.columnManager.findColumn(n);f?f.updateDefinition(t).then(function(n){r(n)}).catch(function(n){u(n)}):(console.warn("Column Update Error - No matching column found:",n),u())})};n.prototype.moveColumn=function(n,t,i){var u=this.columnManager.findColumn(n),r=this.columnManager.findColumn(t);u?r?this.columnManager.moveColumn(u,r,i):console.warn("Move Error - No matching column found:",r):console.warn("Move Error - No matching column found:",n)};n.prototype.scrollToColumn=function(n,t,i){var r=this;return new Promise(function(u,f){var e=r.columnManager.findColumn(n);e?r.columnManager.scrollToColumn(e,t,i).then(function(){u()}).catch(function(n){f(n)}):(console.warn("Scroll Error - No matching column found:",n),f("Scroll Error - No matching column found"))})};n.prototype.setLocale=function(n){this.modules.localize.setLocale(n)};n.prototype.getLocale=function(){return this.modules.localize.getLocale()};n.prototype.getLang=function(n){return this.modules.localize.getLang(n)};n.prototype.redraw=function(n){this.columnManager.redraw(n);this.rowManager.redraw(n)};n.prototype.setHeight=function(n){this.rowManager.renderMode!=="classic"?(this.options.height=isNaN(n)?n:n+"px",this.element.style.height=this.options.height,this.rowManager.setRenderMode(),this.rowManager.redraw()):console.warn("setHeight function is not available in classic render mode")};n.prototype.setSort=function(n,t){this.modExists("sort",!0)&&(this.modules.sort.setSort(n,t),this.rowManager.sorterRefresh())};n.prototype.getSorters=function(){if(this.modExists("sort",!0))return this.modules.sort.getSort()};n.prototype.clearSort=function(){this.modExists("sort",!0)&&(this.modules.sort.clear(),this.rowManager.sorterRefresh())};n.prototype.setFilter=function(n,t,i,r){this.modExists("filter",!0)&&(this.modules.filter.setFilter(n,t,i,r),this.rowManager.filterRefresh())};n.prototype.refreshFilter=function(){this.modExists("filter",!0)&&this.rowManager.filterRefresh()};n.prototype.addFilter=function(n,t,i,r){this.modExists("filter",!0)&&(this.modules.filter.addFilter(n,t,i,r),this.rowManager.filterRefresh())};n.prototype.getFilters=function(n){if(this.modExists("filter",!0))return this.modules.filter.getFilters(n)};n.prototype.setHeaderFilterFocus=function(n){if(this.modExists("filter",!0)){var t=this.columnManager.findColumn(n);if(t)this.modules.filter.setHeaderFilterFocus(t);else return console.warn("Column Filter Focus Error - No matching column found:",n),!1}};n.prototype.getHeaderFilterValue=function(n){if(this.modExists("filter",!0)){var t=this.columnManager.findColumn(n);if(t)return this.modules.filter.getHeaderFilterValue(t);console.warn("Column Filter Error - No matching column found:",n)}};n.prototype.setHeaderFilterValue=function(n,t){if(this.modExists("filter",!0)){var i=this.columnManager.findColumn(n);if(i)this.modules.filter.setHeaderFilterValue(i,t);else return console.warn("Column Filter Error - No matching column found:",n),!1}};n.prototype.getHeaderFilters=function(){if(this.modExists("filter",!0))return this.modules.filter.getHeaderFilters()};n.prototype.removeFilter=function(n,t,i){this.modExists("filter",!0)&&(this.modules.filter.removeFilter(n,t,i),this.rowManager.filterRefresh())};n.prototype.clearFilter=function(n){this.modExists("filter",!0)&&(this.modules.filter.clearFilter(n),this.rowManager.filterRefresh())};n.prototype.clearHeaderFilter=function(){this.modExists("filter",!0)&&(this.modules.filter.clearHeaderFilter(),this.rowManager.filterRefresh())};n.prototype.selectRow=function(n){this.modExists("selectRow",!0)&&(n===!0&&(console.warn("passing a boolean to the selectRowselectRow function is deprecated, you should now pass the string 'active'"),n="active"),this.modules.selectRow.selectRows(n))};n.prototype.deselectRow=function(n){this.modExists("selectRow",!0)&&this.modules.selectRow.deselectRows(n)};n.prototype.toggleSelectRow=function(n){this.modExists("selectRow",!0)&&this.modules.selectRow.toggleRow(n)};n.prototype.getSelectedRows=function(){if(this.modExists("selectRow",!0))return this.modules.selectRow.getSelectedRows()};n.prototype.getSelectedData=function(){if(this.modExists("selectRow",!0))return this.modules.selectRow.getSelectedData()};n.prototype.getInvalidCells=function(){if(this.modExists("validate",!0))return this.modules.validate.getInvalidCells()};n.prototype.clearCellValidation=function(n){var t=this;this.modExists("validate",!0)&&(n||(n=this.modules.validate.getInvalidCells()),Array.isArray(n)||(n=[n]),n.forEach(function(n){t.modules.validate.clearValidation(n._getSelf())}))};n.prototype.validate=function(){var n=[];return this.rowManager.rows.forEach(function(t){var i=t.validate();i!==!0&&(n=n.concat(i))}),n.length?n:!0};n.prototype.setMaxPage=function(n){if(this.options.pagination&&this.modExists("page"))this.modules.page.setMaxPage(n);else return!1};n.prototype.setPage=function(n){return this.options.pagination&&this.modExists("page")?this.modules.page.setPage(n):new Promise(function(n,t){t()})};n.prototype.setPageToRow=function(n){var t=this;return new Promise(function(i,r){t.options.pagination&&t.modExists("page")?(n=t.rowManager.findRow(n),n?t.modules.page.setPageToRow(n).then(function(){i()}).catch(function(){r()}):r()):r()})};n.prototype.setPageSize=function(n){if(this.options.pagination&&this.modExists("page"))this.modules.page.setPageSize(n),this.modules.page.setPage(1).then(function(){}).catch(function(){});else return!1};n.prototype.getPageSize=function(){if(this.options.pagination&&this.modExists("page",!0))return this.modules.page.getPageSize()};n.prototype.previousPage=function(){if(this.options.pagination&&this.modExists("page"))this.modules.page.previousPage();else return!1};n.prototype.nextPage=function(){if(this.options.pagination&&this.modExists("page"))this.modules.page.nextPage();else return!1};n.prototype.getPage=function(){return this.options.pagination&&this.modExists("page")?this.modules.page.getPage():!1};n.prototype.getPageMax=function(){return this.options.pagination&&this.modExists("page")?this.modules.page.getPageMax():!1};n.prototype.setGroupBy=function(n){if(this.modExists("groupRows",!0))this.options.groupBy=n,this.modules.groupRows.initialize(),this.rowManager.refreshActiveData("display"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group");else return!1};n.prototype.setGroupValues=function(n){if(this.modExists("groupRows",!0))this.options.groupValues=n,this.modules.groupRows.initialize(),this.rowManager.refreshActiveData("display"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group");else return!1};n.prototype.setGroupStartOpen=function(n){if(this.modExists("groupRows",!0))this.options.groupStartOpen=n,this.modules.groupRows.initialize(),this.options.groupBy?(this.rowManager.refreshActiveData("group"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group")):console.warn("Grouping Update - cant refresh view, no groups have been set");else return!1};n.prototype.setGroupHeader=function(n){if(this.modExists("groupRows",!0))this.options.groupHeader=n,this.modules.groupRows.initialize(),this.options.groupBy?(this.rowManager.refreshActiveData("group"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group")):console.warn("Grouping Update - cant refresh view, no groups have been set");else return!1};n.prototype.getGroups=function(){return this.modExists("groupRows",!0)?this.modules.groupRows.getGroups(!0):!1};n.prototype.getGroupedData=function(){if(this.modExists("groupRows",!0))return this.options.groupBy?this.modules.groupRows.getGroupedData():this.getData()};n.prototype.getEditedCells=function(){if(this.modExists("edit",!0))return this.modules.edit.getEditedCells()};n.prototype.clearCellEdited=function(n){var t=this;this.modExists("edit",!0)&&(n||(n=this.modules.edit.getEditedCells()),Array.isArray(n)||(n=[n]),n.forEach(function(n){t.modules.edit.clearEdited(n._getSelf())}))};n.prototype.getCalcResults=function(){return this.modExists("columnCalcs",!0)?this.modules.columnCalcs.getResults():!1};n.prototype.recalc=function(){this.modExists("columnCalcs",!0)&&this.modules.columnCalcs.recalcAll(this.rowManager.activeRows)};n.prototype.navigatePrev=function(){var n=!1;return this.modExists("edit",!0)&&(n=this.modules.edit.currentCell,n)?n.nav().prev():!1};n.prototype.navigateNext=function(){var n=!1;return this.modExists("edit",!0)&&(n=this.modules.edit.currentCell,n)?n.nav().next():!1};n.prototype.navigateLeft=function(){var n=!1;return this.modExists("edit",!0)&&(n=this.modules.edit.currentCell,n)?(e.preventDefault(),n.nav().left()):!1};n.prototype.navigateRight=function(){var n=!1;return this.modExists("edit",!0)&&(n=this.modules.edit.currentCell,n)?(e.preventDefault(),n.nav().right()):!1};n.prototype.navigateUp=function(){var n=!1;return this.modExists("edit",!0)&&(n=this.modules.edit.currentCell,n)?(e.preventDefault(),n.nav().up()):!1};n.prototype.navigateDown=function(){var n=!1;return this.modExists("edit",!0)&&(n=this.modules.edit.currentCell,n)?(e.preventDefault(),n.nav().down()):!1};n.prototype.undo=function(){return this.options.history&&this.modExists("history",!0)?this.modules.history.undo():!1};n.prototype.redo=function(){return this.options.history&&this.modExists("history",!0)?this.modules.history.redo():!1};n.prototype.getHistoryUndoSize=function(){return this.options.history&&this.modExists("history",!0)?this.modules.history.getHistoryUndoSize():!1};n.prototype.getHistoryRedoSize=function(){return this.options.history&&this.modExists("history",!0)?this.modules.history.getHistoryRedoSize():!1};n.prototype.clearHistory=function(){return this.options.history&&this.modExists("history",!0)?this.modules.history.clear():!1};n.prototype.download=function(n,t,i,r){this.modExists("download",!0)&&this.modules.download.download(n,t,i,r)};n.prototype.downloadToTab=function(n,t,i,r){this.modExists("download",!0)&&this.modules.download.download(n,t,i,r,!0)};n.prototype.tableComms=function(n,t,i,r){this.modules.comms.receive(n,t,i,r)};n.prototype.moduleBindings={};n.prototype.extendModule=function(t,i,r){var u,f;if(n.prototype.moduleBindings[t])if(u=n.prototype.moduleBindings[t].prototype[i],u)if((typeof r=="undefined"?"undefined":_typeof(r))=="object")for(f in r)u[f]=r[f];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",i);else console.warn("Module Error - module does not exist:",t)};n.prototype.registerModule=function(t,i){var r=this;n.prototype.moduleBindings[t]=i};n.prototype.bindModules=function(){this.modules={};for(var t in n.prototype.moduleBindings)this.modules[t]=new n.prototype.moduleBindings[t](this)};n.prototype.modExists=function(n,t){return this.modules[n]?!0:(t&&console.error("Tabulator Module Not Installed: "+n),!1)};n.prototype.helpers={elVisible:function(n){return!(n.offsetWidth<=0&&n.offsetHeight<=0)},elOffset:function(n){var t=n.getBoundingClientRect();return{top:t.top+window.pageYOffset-document.documentElement.clientTop,left:t.left+window.pageXOffset-document.documentElement.clientLeft}},deepClone:function(n){var i=Object.assign(Array.isArray(n)?[]:{},n);for(var t in n)n[t]!=null&&_typeof(n[t])==="object"&&(i[t]=n[t]instanceof Date?new Date(n[t]):this.deepClone(n[t]));return i}};n.prototype.comms={tables:[],register:function(t){n.prototype.comms.tables.push(t)},deregister:function(t){var i=n.prototype.comms.tables.indexOf(t);i>-1&&n.prototype.comms.tables.splice(i,1)},lookupTable:function(t,i){var u=[],f,r,e;if(typeof t=="string"){if(f=document.querySelectorAll(t),f.length)for(e=0;e<f.length;e++)r=n.prototype.comms.matchElement(f[e]),r&&u.push(r)}else typeof HTMLElement!="undefined"&&t instanceof HTMLElement||t instanceof n?(r=n.prototype.comms.matchElement(t),r&&u.push(r)):Array.isArray(t)?t.forEach(function(t){u=u.concat(n.prototype.comms.lookupTable(t))}):i||console.warn("Table Connection Error - Invalid Selector",t);return u},matchElement:function(t){return n.prototype.comms.tables.find(function(i){return t instanceof n?i===t:i.element===t})}};n.prototype.findTable=function(t){var i=n.prototype.comms.lookupTable(t,!0);return Array.isArray(i)&&!i.length?!1:i};ti=function(n){this.table=n;this.mode=null};ti.prototype.initialize=function(n){this.modes[n]?this.mode=n:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+n),this.mode="fitData");this.table.element.setAttribute("tabulator-layout",this.mode)};ti.prototype.getMode=function(){return this.mode};ti.prototype.layout=function(){this.modes[this.mode].call(this,this.table.columnManager.columnsByIndex);this.mode.indexOf("fitData")===0&&this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns")};ti.prototype.modes={fitData:function(n){this.table.options.virtualDomHoz?this.table.vdomHoz.fitDataLayoutOverride():n.forEach(function(n){n.reinitializeWidth()});this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:function(n){n.forEach(function(n){n.reinitializeWidth()});this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataTable:function(n){n.forEach(function(n){n.reinitializeWidth()});this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataStretch:function(n){var u=this,r=0,f=this.table.rowManager.element.clientWidth,i=0,t=!1;n.forEach(function(n){n.widthFixed||n.reinitializeWidth();(u.table.options.responsiveLayout?n.modules.responsive.visible:n.visible)&&(t=n);n.visible&&(r+=n.getWidth())});t?(i=f-r+t.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(t.setWidth(0),this.table.modules.responsiveLayout.update()),i>0?t.setWidth(i):t.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(n){function a(n){return typeof n=="string"?n.indexOf("%")>-1?e/100*parseInt(n):parseInt(n):n}function h(n,t,i,r){function p(n){return i*(n.column.definition.widthGrow||1)}function w(n){return a(n.width)-i*(n.column.definition.widthShrink||0)}var e=[],y=0,f=0,s=0,c=o,l=0,u=0,v=[];return n.forEach(function(n){var f=r?w(n):p(n);n.column.minWidth>=f?e.push(n):n.column.maxWidth&&n.column.maxWidth<f?(n.width=n.column.maxWidth,t-=n.column.maxWidth,c-=r?n.column.definition.widthShrink||1:n.column.definition.widthGrow||1,c&&(i=Math.floor(t/c))):(v.push(n),u+=r?n.column.definition.widthShrink||1:n.column.definition.widthGrow||1)}),e.length?(e.forEach(function(n){y+=r?n.width-n.column.minWidth:n.column.minWidth;n.width=n.column.minWidth}),f=t-y,s=u?Math.floor(f/u):f,l=f-s*u+h(v,f,s,r)):(l=u?t-Math.floor(t/u)*u:t,v.forEach(function(n){n.width=r?w(n):p(n)})),l}var v=this,e=v.table.element.clientWidth,c=0,u=0,o=0,l=0,t=[],i=[],s=0,f=0,r=0;this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update();this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(e-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth);n.forEach(function(n){var f,r,u;n.visible&&(f=n.definition.width,r=parseInt(n.minWidth),f?(u=a(f),c+=u>r?u:r,n.definition.widthShrink&&(i.push({column:n,width:u>r?u:r}),s+=n.definition.widthShrink)):(t.push({column:n,width:0}),o+=n.definition.widthGrow||1))});u=e-c;l=Math.floor(u/o);r=h(t,u,l,!1);t.length&&r>0&&(t[t.length-1].width+=+r);t.forEach(function(n){u-=n.width});f=Math.abs(r)+u;f>0&&s&&(r=h(i,f,Math.floor(f/s),!0));i.length&&(i[i.length-1].width-=r);t.forEach(function(n){n.column.setWidth(n.width)});i.forEach(function(n){n.column.setWidth(n.width)})}};n.prototype.registerModule("layout",ti);it=function(n){this.table=n;this.locale="default";this.lang=!1;this.bindings={};this.langList={}};it.prototype.initialize=function(){this.langList=n.prototype.helpers.deepClone(this.langs)};it.prototype.setHeaderFilterPlaceholder=function(n){this.langList.default.headerFilters.default=n};it.prototype.setHeaderFilterColumnPlaceholder=function(n,t){this.langList.default.headerFilters.columns[n]=t;this.lang&&!this.lang.headerFilters.columns[n]&&(this.lang.headerFilters.columns[n]=t)};it.prototype.installLang=function(n,t){this.langList[n]?this._setLangProp(this.langList[n],t):this.langList[n]=t};it.prototype._setLangProp=function(n,t){for(var i in t)n[i]&&_typeof(n[i])=="object"?this._setLangProp(n[i],t[i]):n[i]=t[i]};it.prototype.setLocale=function(t){function u(n,t){for(var i in n)_typeof(n[i])=="object"?(t[i]||(t[i]={}),u(n[i],t[i])):t[i]=n[i]}var i=this,r;t=t||"default";t===!0&&navigator.language&&(t=navigator.language.toLowerCase());t&&(i.langList[t]||(r=t.split("-")[0],i.langList[r]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",t,r),t=r):(console.warn("Localization Error - Matching locale not found, using default: ",t),t="default")));i.locale=t;i.lang=n.prototype.helpers.deepClone(i.langList.default||{});t!="default"&&u(i.langList[t],i.lang);i.table.options.localized.call(i.table,i.locale,i.lang);i._executeBindings()};it.prototype.getLocale=function(){return self.locale};it.prototype.getLang=function(n){return n?this.langList[n]:this.lang};it.prototype.getText=function(n,t){var n=t?n+"|"+t:n,i=n.split("|"),r=this._getLangElement(i,this.locale);return r||""};it.prototype._getLangElement=function(n){var i=this,t=i.lang;return n.forEach(function(n){var i;t&&(i=t[n],t=typeof i!="undefined"?i:!1)}),t};it.prototype.bind=function(n,t){this.bindings[n]||(this.bindings[n]=[]);this.bindings[n].push(t);t(this.getText(n),this.lang)};it.prototype._executeBindings=function(){var n=this,t=function(t){n.bindings[t].forEach(function(i){i(n.getText(t),n.lang)})};for(var i in n.bindings)t(i)};it.prototype.langs={"default":{groups:{item:"item",items:"items"},columns:{},ajax:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{"default":"filter column...",columns:{}}}};n.prototype.registerModule("localize",it);ui=function(n){this.table=n};ui.prototype.getConnections=function(t){var u=this,i=[],r;return r=n.prototype.comms.lookupTable(t),r.forEach(function(n){u.table!==n&&i.push(n)}),i};ui.prototype.send=function(n,t,i,r){var f=this,u=this.getConnections(n);u.forEach(function(n){n.tableComms(f.table.element,t,i,r)});!u.length&&n&&console.warn("Table Connection Error - No tables matching selector found",n)};ui.prototype.receive=function(n,t,i,r){if(this.table.modExists(t))return this.table.modules[t].commsReceived(n,i,r);console.warn("Inter-table Comms Error - no such module:",t)};n.prototype.registerModule("comms",ui);ii=function(n){this.table=n;this.allowedTypes=["","data","download","clipboard","print","htmlOutput"]};ii.prototype.initializeColumn=function(n){var r=this,t=!1,i={};this.allowedTypes.forEach(function(u){var f="accessor"+(u.charAt(0).toUpperCase()+u.slice(1)),e;n.definition[f]&&(e=r.lookupAccessor(n.definition[f]),e&&(t=!0,i[f]={accessor:e,params:n.definition[f+"Params"]||{}}))});t&&(n.modules.accessor=i)};ii.prototype.lookupAccessor=function(n){var t=!1;switch(typeof n=="undefined"?"undefined":_typeof(n)){case"string":this.accessors[n]?t=this.accessors[n]:console.warn("Accessor Error - No such accessor found, ignoring: ",n);break;case"function":t=n}return t};ii.prototype.transformRow=function(t,i){var f="accessor"+(i.charAt(0).toUpperCase()+i.slice(1)),u=t.getComponent(),r=n.prototype.helpers.deepClone(t.data||{});return this.table.columnManager.traverse(function(n){var e,t,s,o;n.modules.accessor&&(t=n.modules.accessor[f]||n.modules.accessor.accessor||!1,t&&(e=n.getFieldValue(r),e!="undefined"&&(o=n.getComponent(),s=typeof t.params=="function"?t.params(e,r,i,o,u):t.params,n.setFieldValue(r,t.accessor(e,r,i,s,o,u)))))}),r};ii.prototype.accessors={};n.prototype.registerModule("accessor",ii);v=function(n){this.table=n;this.config=!1;this.url="";this.urlGenerator=!1;this.params=!1;this.loaderElement=this.createLoaderElement();this.msgElement=this.createMsgElement();this.loadingElement=!1;this.errorElement=!1;this.loaderPromise=!1;this.progressiveLoad=!1;this.loading=!1;this.requestOrder=0};v.prototype.initialize=function(){var n;this.loaderElement.appendChild(this.msgElement);this.table.options.ajaxLoaderLoading&&(typeof this.table.options.ajaxLoaderLoading=="string"?(n=document.createElement("template"),n.innerHTML=this.table.options.ajaxLoaderLoading.trim(),this.loadingElement=n.content.firstChild):this.loadingElement=this.table.options.ajaxLoaderLoading);this.loaderPromise=this.table.options.ajaxRequestFunc||this.defaultLoaderPromise;this.urlGenerator=this.table.options.ajaxURLGenerator||this.defaultURLGenerator;this.table.options.ajaxLoaderError&&(typeof this.table.options.ajaxLoaderError=="string"?(n=document.createElement("template"),n.innerHTML=this.table.options.ajaxLoaderError.trim(),this.errorElement=n.content.firstChild):this.errorElement=this.table.options.ajaxLoaderError);this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams);this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig);this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL);this.table.options.ajaxProgressiveLoad&&(this.table.options.pagination?(this.progressiveLoad=!1,console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time")):this.table.modExists("page")?(this.progressiveLoad=this.table.options.ajaxProgressiveLoad,this.table.modules.page.initializeProgressive(this.progressiveLoad)):console.error("Pagination plugin is required for progressive ajax loading"))};v.prototype.createLoaderElement=function(){var n=document.createElement("div");return n.classList.add("tabulator-loader"),n};v.prototype.createMsgElement=function(){var n=document.createElement("div");return n.classList.add("tabulator-loader-msg"),n.setAttribute("role","alert"),n};v.prototype.setParams=function(n,t){if(t){this.params=this.params||{};for(var i in n)this.params[i]=n[i]}else this.params=n};v.prototype.getParams=function(){return this.params||{}};v.prototype.setConfig=function(n){if(this._loadDefaultConfig(),typeof n=="string")this.config.method=n;else for(var t in n)this.config[t]=n[t]};v.prototype._loadDefaultConfig=function(n){var t=this,i;if(!t.config||n){t.config={};for(i in t.defaultConfig)t.config[i]=t.defaultConfig[i]}};v.prototype.setUrl=function(n){this.url=n};v.prototype.getUrl=function(){return this.url};v.prototype.loadData=function(n,t){var i=this;return this.progressiveLoad?this._loadDataProgressive():this._loadDataStandard(n,t)};v.prototype.nextPage=function(n){var t;this.loading||(t=this.table.options.ajaxProgressiveLoadScrollMargin||this.table.rowManager.getElement().clientHeight*2,n<t&&this.table.modules.page.nextPage().then(function(){}).catch(function(){}))};v.prototype.blockActiveRequest=function(){this.requestOrder++};v.prototype._loadDataProgressive=function(){return this.table.rowManager.setData([]),this.table.modules.page.setPage(1)};v.prototype._loadDataStandard=function(n,t){var i=this;return new Promise(function(r,u){i.sendRequest(n).then(function(f){i.table.rowManager.setData(f,n,t).then(function(){r()}).catch(function(n){u(n)})}).catch(function(n){u(n)})})};v.prototype.generateParamsList=function(n,t){var u=this,i=[],r;if(t=t||"",Array.isArray(n))n.forEach(function(n,r){i=i.concat(u.generateParamsList(n,t?t+"["+r+"]":r))});else if((typeof n=="undefined"?"undefined":_typeof(n))==="object")for(r in n)i=i.concat(u.generateParamsList(n[r],t?t+"["+r+"]":r));else i.push({key:t,value:n});return i};v.prototype.serializeParams=function(n){var i=this.generateParamsList(n),t=[];return i.forEach(function(n){t.push(encodeURIComponent(n.key)+"="+encodeURIComponent(n.value))}),t.join("&")};v.prototype.sendRequest=function(n){var i=this,t=this,u=t.url,r;return t.requestOrder++,r=t.requestOrder,t._loadDefaultConfig(),new Promise(function(f,e){t.table.options.ajaxRequesting.call(i.table,t.url,t.params)!==!1?(t.loading=!0,n||t.showLoader(),i.loaderPromise(u,t.config,t.params).then(function(n){r===t.requestOrder?(t.table.options.ajaxResponse&&(n=t.table.options.ajaxResponse.call(t.table,t.url,t.params,n)),f(n),t.hideLoader(),t.loading=!1):console.warn("Ajax Response Blocked - An active ajax request was blocked by an attempt to change table data while the request was being made")}).catch(function(n){console.error("Ajax Load Error: ",n);t.table.options.ajaxError.call(t.table,n);t.showError();setTimeout(function(){t.hideLoader()},3e3);t.loading=!1;e(n)})):e()})};v.prototype.showLoader=function(){var n=typeof this.table.options.ajaxLoader=="function"?this.table.options.ajaxLoader():this.table.options.ajaxLoader;if(n){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error");this.msgElement.classList.add("tabulator-loading");this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.table.modules.localize.getText("ajax|loading");this.table.element.appendChild(this.loaderElement)}};v.prototype.showError=function(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading");this.msgElement.classList.add("tabulator-error");this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.table.modules.localize.getText("ajax|error");this.table.element.appendChild(this.loaderElement)};v.prototype.hideLoader=function(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)};v.prototype.defaultConfig={method:"GET"};v.prototype.defaultURLGenerator=function(n,t,i){return n&&i&&Object.keys(i).length&&(t.method&&t.method.toLowerCase()!="get"||(t.method="get",n+=(n.includes("?")?"&":"?")+this.modules.ajax.serializeParams(i))),n};v.prototype.defaultLoaderPromise=function(n,t,i){var r=this,u;return new Promise(function(f,e){if(n=r.urlGenerator.call(r.table,n,t,i),t.method.toUpperCase()!="GET")if(u=_typeof(r.table.options.ajaxContentType)==="object"?r.table.options.ajaxContentType:r.contentTypeFormatters[r.table.options.ajaxContentType],u){for(var o in u.headers)t.headers||(t.headers={}),typeof t.headers[o]=="undefined"&&(t.headers[o]=u.headers[o]);t.body=u.body.call(r,n,t,i)}else console.warn("Ajax Error - Invalid ajaxContentType value:",r.table.options.ajaxContentType);n?(typeof t.headers=="undefined"&&(t.headers={}),typeof t.headers.Accept=="undefined"&&(t.headers.Accept="application/json"),typeof t.headers["X-Requested-With"]=="undefined"&&(t.headers["X-Requested-With"]="XMLHttpRequest"),typeof t.mode=="undefined"&&(t.mode="cors"),t.mode=="cors"?(typeof t.headers["Access-Control-Allow-Origin"]=="undefined"&&(t.headers["Access-Control-Allow-Origin"]=window.location.origin),typeof t.credentials=="undefined"&&(t.credentials="same-origin")):typeof t.credentials=="undefined"&&(t.credentials="include"),fetch(n,t).then(function(n){n.ok?n.json().then(function(n){f(n)}).catch(function(n){e(n);console.warn("Ajax Load Error - Invalid JSON returned",n)}):(console.error("Ajax Load Error - Connection Error: "+n.status,n.statusText),e(n))}).catch(function(n){console.error("Ajax Load Error - Connection Error: ",n);e(n)})):(console.warn("Ajax Load Error - No URL Set"),f([]))})};v.prototype.contentTypeFormatters={json:{headers:{"Content-Type":"application/json"},body:function(n,t,i){return JSON.stringify(i)}},form:{headers:{},body:function(n,t,i){var u=this.generateParamsList(i),r=new FormData;return u.forEach(function(n){r.append(n.key,n.value)}),r}}};n.prototype.registerModule("ajax",v);dt=function(n){this._row=n};dt.prototype.getData=function(n){return this._row.getData(n)};dt.prototype.getElement=function(){return this._row.getElement()};dt.prototype.getTable=function(){return this._row.table};dt.prototype.getCells=function(){var n=[];return this._row.getCells().forEach(function(t){n.push(t.getComponent())}),n};dt.prototype.getCell=function(n){var t=this._row.getCell(n);return t?t.getComponent():!1};dt.prototype._getSelf=function(){return this._row};w=function(n){this.table=n;this.topCalcs=[];this.botCalcs=[];this.genColumn=!1;this.topElement=this.createElement();this.botElement=this.createElement();this.topRow=!1;this.botRow=!1;this.topInitialized=!1;this.botInitialized=!1;this.initialize()};w.prototype.createElement=function(){var n=document.createElement("div");return n.classList.add("tabulator-calcs-holder"),n};w.prototype.initialize=function(){this.genColumn=new r({field:"value"},this)};w.prototype.registerColumnField=function(){};w.prototype.initializeColumn=function(n){var t=n.definition,i={topCalcParams:t.topCalcParams||{},botCalcParams:t.bottomCalcParams||{}};if(t.topCalc){switch(_typeof(t.topCalc)){case"string":this.calculations[t.topCalc]?i.topCalc=this.calculations[t.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",t.topCalc);break;case"function":i.topCalc=t.topCalc}i.topCalc&&(n.modules.columnCalcs=i,this.topCalcs.push(n),this.table.options.columnCalcs!="group"&&this.initializeTopRow())}if(t.bottomCalc){switch(_typeof(t.bottomCalc)){case"string":this.calculations[t.bottomCalc]?i.botCalc=this.calculations[t.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",t.bottomCalc);break;case"function":i.botCalc=t.bottomCalc}i.botCalc&&(n.modules.columnCalcs=i,this.botCalcs.push(n),this.table.options.columnCalcs!="group"&&this.initializeBottomRow())}};w.prototype.removeCalcs=function(){var n=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),n=!0);this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),n=!0);n&&this.table.rowManager.adjustTableSize()};w.prototype.initializeTopRow=function(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)};w.prototype.initializeBottomRow=function(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)};w.prototype.scrollHorizontal=function(n){this.botInitialized&&this.botRow&&(this.botRow.getElement().style.marginLeft=-n+"px")};w.prototype.recalc=function(n){var i,t;if(this.topInitialized||this.botInitialized){if(i=this.rowsToData(n),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),t=this.generateRow("top",this.rowsToData(n)),this.topRow=t;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(t.getElement());t.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),t=this.generateRow("bottom",this.rowsToData(n)),this.botRow=t;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(t.getElement());t.initialize(!0)}this.table.rowManager.adjustTableSize();this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}};w.prototype.recalcRowGroup=function(n){this.recalcGroup(this.table.modules.groupRows.getRowGroup(n))};w.prototype.recalcAll=function(){var t=this,n;(this.topCalcs.length||this.botCalcs.length)&&(this.table.options.columnCalcs!=="group"&&this.recalc(this.table.rowManager.activeRows),this.table.options.groupBy&&this.table.options.columnCalcs!=="table"&&(n=table.modules.groupRows.getChildGroups(),n.forEach(function(n){t.recalcGroup(n)})))};w.prototype.recalcGroup=function(n){var t,i;n&&n.calcs&&(n.calcs.bottom&&(t=this.rowsToData(n.rows),i=this.generateRowData("bottom",t),n.calcs.bottom.updateData(i),n.calcs.bottom.reinitialize()),n.calcs.top&&(t=this.rowsToData(n.rows),i=this.generateRowData("top",t),n.calcs.top.updateData(i),n.calcs.top.reinitialize()))};w.prototype.generateTopRow=function(n){return this.generateRow("top",this.rowsToData(n))};w.prototype.generateBottomRow=function(n){return this.generateRow("bottom",this.rowsToData(n))};w.prototype.rowsToData=function(n){var t=this,i=[];return n.forEach(function(n){if(i.push(n.getData()),t.table.options.dataTree&&t.table.options.dataTreeChildColumnCalcs&&n.modules.dataTree.open){var r=t.rowsToData(t.table.modules.dataTree.getFilteredTreeChildren(n));i=i.concat(r)}}),i};w.prototype.generateRow=function(n,t){var i=this,f=this.generateRowData(n,t),r;return i.table.modExists("mutator")&&i.table.modules.mutator.disable(),r=new u(f,this,"calc"),i.table.modExists("mutator")&&i.table.modules.mutator.enable(),r.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+n),r.component=!1,r.getComponent=function(){return this.component||(this.component=new dt(this)),this.component},r.generateCells=function(){var t=[];i.table.columnManager.columnsByIndex.forEach(function(u){i.genColumn.setField(u.getField());i.genColumn.hozAlign=u.hozAlign;i.genColumn.modules.format=u.definition[n+"CalcFormatter"]&&i.table.modExists("format")?{formatter:i.table.modules.format.getFormatter(u.definition[n+"CalcFormatter"]),params:u.definition[n+"CalcFormatterParams"]||{}}:{formatter:i.table.modules.format.getFormatter("plaintext"),params:{}};i.genColumn.definition.cssClass=u.definition.cssClass;var f=new s(i.genColumn,r);f.getElement();f.column=u;f.setWidth();u.cells.push(f);t.push(f);u.visible||f.hide()});this.cells=t},r};w.prototype.generateRowData=function(n,t){var u={},e=n=="top"?this.topCalcs:this.botCalcs,r=n=="top"?"topCalc":"botCalc",f,i;return e.forEach(function(n){var e=[];n.modules.columnCalcs&&n.modules.columnCalcs[r]&&(t.forEach(function(t){e.push(n.getFieldValue(t))}),i=r+"Params",f=typeof n.modules.columnCalcs[i]=="function"?n.modules.columnCalcs[i](e,t):n.modules.columnCalcs[i],n.setFieldValue(u,n.modules.columnCalcs[r](e,t,f)))}),u};w.prototype.hasTopCalcs=function(){return!!this.topCalcs.length};w.prototype.hasBottomCalcs=function(){return!!this.botCalcs.length};w.prototype.redraw=function(){this.topRow&&this.topRow.normalizeHeight(!0);this.botRow&&this.botRow.normalizeHeight(!0)};w.prototype.getResults=function(){var i=this,n={},t;return this.table.options.groupBy&&this.table.modExists("groupRows")?(t=this.table.modules.groupRows.getGroups(!0),t.forEach(function(t){n[t.getKey()]=i.getGroupResults(t)})):n={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},n};w.prototype.getGroupResults=function(n){var r=this,t=n._getSelf(),u=n.getSubGroups(),i={};return u.forEach(function(n){i[n.getKey()]=r.getGroupResults(n)}),{top:t.calcs.top?t.calcs.top.getData():{},bottom:t.calcs.bottom?t.calcs.bottom.getData():{},groups:i}};w.prototype.calculations={avg:function(n,t,i){var r=0,u=typeof i.precision!="undefined"?i.precision:2;return n.length&&(r=n.reduce(function(n,t){return Number(n)+Number(t)}),r=r/n.length,r=u!==!1?r.toFixed(u):r),parseFloat(r).toString()},max:function(n,t,i){var r=null,u=typeof i.precision!="undefined"?i.precision:!1;return n.forEach(function(n){n=Number(n);(n>r||r===null)&&(r=n)}),r!==null?u!==!1?r.toFixed(u):r:""},min:function(n,t,i){var r=null,u=typeof i.precision!="undefined"?i.precision:!1;return n.forEach(function(n){n=Number(n);(n<r||r===null)&&(r=n)}),r!==null?u!==!1?r.toFixed(u):r:""},sum:function(n,t,i){var r=0,u=typeof i.precision!="undefined"?i.precision:!1;return n.length&&n.forEach(function(n){n=Number(n);r+=isNaN(n)?0:Number(n)}),u!==!1?r.toFixed(u):r},concat:function(n){var t=0;return n.length&&(t=n.reduce(function(n,t){return String(n)+String(t)})),t},count:function(n){var t=0;return n.length&&n.forEach(function(n){n&&t++}),t}};n.prototype.registerModule("columnCalcs",w);et=function(n){this.table=n;this.mode=!0;this.pasteParser=function(){};this.pasteAction=function(){};this.customSelection=!1;this.rowRange=!1;this.blocked=!0};et.prototype.initialize=function(){var n=this;this.mode=this.table.options.clipboard;this.rowRange=this.table.options.clipboardCopyRowRange;(this.mode===!0||this.mode==="copy")&&this.table.element.addEventListener("copy",function(t){var i,r,u;n.blocked||(t.preventDefault(),n.customSelection?(i=n.customSelection,n.table.options.clipboardCopyFormatter&&(i=n.table.options.clipboardCopyFormatter("plain",i))):(u=n.table.modules.export.generateExportList(n.table.options.clipboardCopyConfig,n.table.options.clipboardCopyStyled,n.rowRange,"clipboard"),r=n.table.modules.export.genereateHTMLTable(u),i=r?n.generatePlainContent(u):"",n.table.options.clipboardCopyFormatter&&(i=n.table.options.clipboardCopyFormatter("plain",i),r=n.table.options.clipboardCopyFormatter("html",r))),window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",i):t.clipboardData&&t.clipboardData.setData?(t.clipboardData.setData("text/plain",i),r&&t.clipboardData.setData("text/html",r)):t.originalEvent&&t.originalEvent.clipboardData.setData&&(t.originalEvent.clipboardData.setData("text/plain",i),r&&t.originalEvent.clipboardData.setData("text/html",r)),n.table.options.clipboardCopied.call(n.table,i,r),n.reset())});(this.mode===!0||this.mode==="paste")&&this.table.element.addEventListener("paste",function(t){n.paste(t)});this.setPasteParser(this.table.options.clipboardPasteParser);this.setPasteAction(this.table.options.clipboardPasteAction)};et.prototype.reset=function(){this.blocked=!0;this.customSelection=!1};et.prototype.generatePlainContent=function(n){var t=[];return n.forEach(function(n){var i=[];n.columns.forEach(function(t){var r="";if(t)if(n.type==="group"&&(t.value=t.component.getKey()),t.value===null)r="";else switch(_typeof(t.value)){case"object":r=JSON.stringify(t.value);break;case"undefined":r="";break;default:r=t.value}i.push(r)});t.push(i.join("\t"))}),t.join("\n")};et.prototype.copy=function(n,t){var n,i,r;this.blocked=!1;this.customSelection=!1;(this.mode===!0||this.mode==="copy")&&(this.rowRange=n||this.table.options.clipboardCopyRowRange,typeof getSelection!="undefined"&&typeof document.createRange!="undefined"?(n=document.createRange(),n.selectNodeContents(this.table.element),i=window.getSelection(),i.toString()&&t&&(this.customSelection=i.toString()),i.removeAllRanges(),i.addRange(n)):typeof document.selection!="undefined"&&typeof document.body.createTextRange!="undefined"&&(r=document.body.createTextRange(),r.moveToElementText(this.table.element),r.select()),document.execCommand("copy"),i&&i.removeAllRanges())};et.prototype.setPasteAction=function(n){switch(typeof n=="undefined"?"undefined":_typeof(n)){case"string":this.pasteAction=this.pasteActions[n];this.pasteAction||console.warn("Clipboard Error - No such paste action found:",n);break;case"function":this.pasteAction=n}};et.prototype.setPasteParser=function(n){switch(typeof n=="undefined"?"undefined":_typeof(n)){case"string":this.pasteParser=this.pasteParsers[n];this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",n);break;case"function":this.pasteParser=n}};et.prototype.paste=function(n){var i,t,r;this.checkPaseOrigin(n)&&(i=this.getPasteData(n),t=this.pasteParser.call(this,i),t?(n.preventDefault(),this.table.modExists("mutator")&&(t=this.mutateData(t)),r=this.pasteAction.call(this,t),this.table.options.clipboardPasted.call(this.table,i,t,r)):this.table.options.clipboardPasteError.call(this.table,i))};et.prototype.mutateData=function(n){var i=this,t=[];return Array.isArray(n)?n.forEach(function(n){t.push(i.table.modules.mutator.transformRow(n,"clipboard"))}):t=n,t};et.prototype.checkPaseOrigin=function(n){var t=!0;return(n.target.tagName!="DIV"||this.table.modules.edit.currentCell)&&(t=!1),t};et.prototype.getPasteData=function(n){var t;return window.clipboardData&&window.clipboardData.getData?t=window.clipboardData.getData("Text"):n.clipboardData&&n.clipboardData.getData?t=n.clipboardData.getData("text/plain"):n.originalEvent&&n.originalEvent.clipboardData.getData&&(t=n.originalEvent.clipboardData.getData("text/plain")),t};et.prototype.pasteParsers={table:function(n){var t=[],e=!1,i=!0,u=this.table.columnManager.columns,r=[],f=[];return n=n.split("\n"),n.forEach(function(n){t.push(n.split("\t"))}),!t.length||t.length===1&&t[0].length<2?!1:(e=!0,t[0].forEach(function(n){var t=u.find(function(t){return n&&t.definition.title&&n.trim()&&t.definition.title.trim()===n.trim()});t?r.push(t):i=!1}),i||(i=!0,r=[],t[0].forEach(function(n){var t=u.find(function(t){return n&&t.field&&n.trim()&&t.field.trim()===n.trim()});t?r.push(t):i=!1}),i||(r=this.table.columnManager.columnsByIndex)),i&&t.shift(),t.forEach(function(n){var t={};n.forEach(function(n,i){r[i]&&(t[r[i].field]=n)});f.push(t)}),f)}};et.prototype.pasteActions={replace:function(n){return this.table.setData(n)},update:function(n){return this.table.updateOrAddData(n)},insert:function(n){return this.table.addData(n)}};n.prototype.registerModule("clipboard",et);b=function(n){this.table=n;this.indent=10;this.field="";this.collapseEl=null;this.expandEl=null;this.branchEl=null;this.elementField=!1;this.startOpen=function(){};this.displayIndex=0};b.prototype.initialize=function(){var t=null,i=this.table.columnManager.getFirstVisibileColumn(),n=this.table.options;this.field=n.dataTreeChildField;this.indent=n.dataTreeChildIndent;this.elementField=n.dataTreeElementColumn||(i?i.field:!1);n.dataTreeBranchElement&&(n.dataTreeBranchElement===!0?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):typeof n.dataTreeBranchElement=="string"?(t=document.createElement("div"),t.innerHTML=n.dataTreeBranchElement,this.branchEl=t.firstChild):this.branchEl=n.dataTreeBranchElement);n.dataTreeCollapseElement?typeof n.dataTreeCollapseElement=="string"?(t=document.createElement("div"),t.innerHTML=n.dataTreeCollapseElement,this.collapseEl=t.firstChild):this.collapseEl=n.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'><\/div>");n.dataTreeExpandElement?typeof n.dataTreeExpandElement=="string"?(t=document.createElement("div"),t.innerHTML=n.dataTreeExpandElement,this.expandEl=t.firstChild):this.expandEl=n.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'><\/div>");switch(_typeof(n.dataTreeStartExpanded)){case"boolean":this.startOpen=function(){return n.dataTreeStartExpanded};break;case"function":this.startOpen=n.dataTreeStartExpanded;break;default:this.startOpen=function(t,i){return n.dataTreeStartExpanded[i]}}};b.prototype.initializeRow=function(n){var i=n.getData()[this.field],r=Array.isArray(i),t=r||!r&&(typeof i=="undefined"?"undefined":_typeof(i))==="object"&&i!==null;!t&&n.modules.dataTree&&n.modules.dataTree.branchEl&&n.modules.dataTree.branchEl.parentNode.removeChild(n.modules.dataTree.branchEl);!t&&n.modules.dataTree&&n.modules.dataTree.controlEl&&n.modules.dataTree.controlEl.parentNode.removeChild(n.modules.dataTree.controlEl);n.modules.dataTree={index:n.modules.dataTree?n.modules.dataTree.index:0,open:t?n.modules.dataTree?n.modules.dataTree.open:this.startOpen(n.getComponent(),0):!1,controlEl:n.modules.dataTree&&t?n.modules.dataTree.controlEl:!1,branchEl:n.modules.dataTree&&t?n.modules.dataTree.branchEl:!1,parent:n.modules.dataTree?n.modules.dataTree.parent:!1,children:t}};b.prototype.layoutRow=function(n){var r=this.elementField?n.getCell(this.elementField):n.getCells()[0],i=r.getElement(),t=n.modules.dataTree;t.branchEl&&(t.branchEl.parentNode&&t.branchEl.parentNode.removeChild(t.branchEl),t.branchEl=!1);t.controlEl&&(t.controlEl.parentNode&&t.controlEl.parentNode.removeChild(t.controlEl),t.controlEl=!1);this.generateControlElement(n,i);n.getElement().classList.add("tabulator-tree-level-"+t.index);t.index&&(this.branchEl?(t.branchEl=this.branchEl.cloneNode(!0),i.insertBefore(t.branchEl,i.firstChild),this.table.rtl?t.branchEl.style.marginRight=(t.branchEl.offsetWidth+t.branchEl.style.marginLeft)*(t.index-1)+t.index*this.indent+"px":t.branchEl.style.marginLeft=(t.branchEl.offsetWidth+t.branchEl.style.marginRight)*(t.index-1)+t.index*this.indent+"px"):this.table.rtl?i.style.paddingRight=parseInt(window.getComputedStyle(i,null).getPropertyValue("padding-right"))+t.index*this.indent+"px":i.style.paddingLeft=parseInt(window.getComputedStyle(i,null).getPropertyValue("padding-left"))+t.index*this.indent+"px")};b.prototype.generateControlElement=function(n,t){var u=this,i=n.modules.dataTree,t=t||n.getCells()[0].getElement(),r=i.controlEl;i.children!==!1&&(i.open?(i.controlEl=this.collapseEl.cloneNode(!0),i.controlEl.addEventListener("click",function(t){t.stopPropagation();u.collapseRow(n)})):(i.controlEl=this.expandEl.cloneNode(!0),i.controlEl.addEventListener("click",function(t){t.stopPropagation();u.expandRow(n)})),i.controlEl.addEventListener("mousedown",function(n){n.stopPropagation()}),r&&r.parentNode===t?r.parentNode.replaceChild(i.controlEl,r):t.insertBefore(i.controlEl,t.firstChild))};b.prototype.setDisplayIndex=function(n){this.displayIndex=n};b.prototype.getDisplayIndex=function(){return this.displayIndex};b.prototype.getRows=function(n){var i=this,t=[];return n.forEach(function(n){var r,f;t.push(n);n instanceof u&&(n.create(),r=n.modules.dataTree.children,r.index||r.children===!1||(f=i.getChildren(n),f.forEach(function(n){n.create();t.push(n)})))}),t};b.prototype.getChildren=function(n){var u=this,t=n.modules.dataTree,i=[],r=[];return t.children!==!1&&t.open&&(Array.isArray(t.children)||(t.children=this.generateChildren(n)),i=this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(t.children):t.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(i),i.forEach(function(n){r.push(n);var t=u.getChildren(n);t.forEach(function(n){r.push(n)})})),r};b.prototype.generateChildren=function(n){var i=this,r=[],t=n.getData()[this.field];return Array.isArray(t)||(t=[t]),t.forEach(function(t){var f=new u(t||{},i.table.rowManager);f.create();f.modules.dataTree.index=n.modules.dataTree.index+1;f.modules.dataTree.parent=n;f.modules.dataTree.children&&(f.modules.dataTree.open=i.startOpen(f.getComponent(),f.modules.dataTree.index));r.push(f)}),r};b.prototype.expandRow=function(n){var t=n.modules.dataTree;t.children!==!1&&(t.open=!0,n.reinitialize(),this.table.rowManager.refreshActiveData("tree",!1,!0),this.table.options.dataTreeRowExpanded(n.getComponent(),n.modules.dataTree.index))};b.prototype.collapseRow=function(n){var t=n.modules.dataTree;t.children!==!1&&(t.open=!1,n.reinitialize(),this.table.rowManager.refreshActiveData("tree",!1,!0),this.table.options.dataTreeRowCollapsed(n.getComponent(),n.modules.dataTree.index))};b.prototype.toggleRow=function(n){var t=n.modules.dataTree;t.children!==!1&&(t.open?this.collapseRow(n):this.expandRow(n))};b.prototype.getTreeParent=function(n){return n.modules.dataTree.parent?n.modules.dataTree.parent.getComponent():!1};b.prototype.getFilteredTreeChildren=function(n){var t=n.modules.dataTree,i=[],r;return t.children&&(Array.isArray(t.children)||(t.children=this.generateChildren(n)),r=this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(t.children):t.children,r.forEach(function(n){n instanceof u&&i.push(n)})),i};b.prototype.rowDelete=function(n){var t=n.modules.dataTree.parent,i;t&&(i=this.findChildIndex(n,t),i!==!1&&t.data[this.field].splice(i,1),t.data[this.field].length||delete t.data[this.field],this.initializeRow(t),this.layoutRow(t));this.table.rowManager.refreshActiveData("tree",!1,!0)};b.prototype.addTreeChildRow=function(n,t,i,r){var u=!1;typeof t=="string"&&(t=JSON.parse(t));Array.isArray(n.data[this.field])||(n.data[this.field]=[],n.modules.dataTree.open=this.startOpen(n.getComponent(),n.modules.dataTree.index));typeof r!="undefined"&&(u=this.findChildIndex(r,n),u!==!1&&n.data[this.field].splice(i?u:u+1,0,t));u===!1&&(i?n.data[this.field].unshift(t):n.data[this.field].push(t));this.initializeRow(n);this.layoutRow(n);this.table.rowManager.refreshActiveData("tree",!1,!0)};b.prototype.findChildIndex=function(n,t){var r=this,i=!1;return(typeof n=="undefined"?"undefined":_typeof(n))=="object"?n instanceof u?i=n.data:n instanceof h?i=n._getSelf().data:typeof HTMLElement!="undefined"&&n instanceof HTMLElement&&t.modules.dataTree&&(i=t.modules.dataTree.children.find(function(t){return t instanceof u?t.element===n:!1}),i&&(i=i.data)):i=typeof n=="undefined"||n===null?!1:t.data[this.field].find(function(t){return t.data[r.table.options.index]==n}),i&&(Array.isArray(t.data[this.field])&&(i=t.data[this.field].indexOf(i)),i==-1&&(i=!1)),i};b.prototype.getTreeChildren=function(n,t,i){var e=this,r=n.modules.dataTree,f=[];return r.children&&(Array.isArray(r.children)||(r.children=this.generateChildren(n)),r.children.forEach(function(n){n instanceof u&&(f.push(t?n.getComponent():n),i&&(f=f.concat(e.getTreeChildren(n,t,i))))})),f};b.prototype.checkForRestyle=function(n){n.row.cells.indexOf(n)||n.row.reinitialize()};b.prototype.getChildField=function(){return this.field};b.prototype.redrawNeeded=function(n){return(this.field?typeof n[this.field]!="undefined":!1)||(this.elementField?typeof n[this.elementField]!="undefined":!1)};n.prototype.registerModule("dataTree",b);ni=function(n){this.table=n};ni.prototype.download=function(n,t,i,r,u){function s(i,r){u?u===!0?f.triggerDownload(i,r,n,t,!0):u(i):f.triggerDownload(i,r,n,t)}var f=this,e=!1,o;typeof n=="function"?e=n:f.downloaders[n]?e=f.downloaders[n]:console.warn("Download Error - No such download type found: ",n);e&&(o=this.generateExportList(r),e.call(this.table,o,i||{},s))};ni.prototype.generateExportList=function(n){var i=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,n||this.table.options.downloadRowRange,"download"),t=this.table.options.groupHeaderDownload;return t&&!Array.isArray(t)&&(t=[t]),i.forEach(function(n){var i;n.type==="group"&&(i=n.columns[0],t&&t[n.indent]&&(i.value=t[n.indent](i.value,n.component._group.getRowCount(),n.component._group.getData(),n.component)))}),i};ni.prototype.triggerDownload=function(n,t,i,r,u){var f=document.createElement("a"),e=new Blob([n],{type:t}),r=r||"Tabulator."+(typeof i=="function"?"txt":i);e=this.table.options.downloadReady.call(this.table,n,e);e&&(u?window.open(window.URL.createObjectURL(e)):navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(e,r):(f.setAttribute("href",window.URL.createObjectURL(e)),f.setAttribute("download",r),f.style.display="none",document.body.appendChild(f),f.click(),document.body.removeChild(f)),this.table.options.downloadComplete&&this.table.options.downloadComplete())};ni.prototype.commsReceived=function(n,t,i){switch(t){case"intercept":this.download(i.type,"",i.options,i.active,i.intercept)}};ni.prototype.downloaders={csv:function(n,t,i){var f=t&&t.delimiter?t.delimiter:",",r=[],u=[];n.forEach(function(n){var t=[];switch(n.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":n.columns.forEach(function(n,t){n&&n.depth===1&&(u[t]=typeof n.value=="undefined"||n.value===null?"":'"'+String(n.value).split('"').join('""')+'"')});break;case"row":n.columns.forEach(function(n){if(n){switch(_typeof(n.value)){case"object":n.value=JSON.stringify(n.value);break;case"undefined":case"null":n.value=""}t.push('"'+String(n.value).split('"').join('""')+'"')}});r.push(t.join(f))}});u.length&&r.unshift(u.join(f));r=r.join("\n");t.bom&&(r=""+r);i(r,"text/csv")},json:function(n,t,i){var r=[];n.forEach(function(n){var t={};switch(n.type){case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":n.columns.forEach(function(n){n&&(t[n.component.getField()]=n.value)});r.push(t)}});r=JSON.stringify(r,null,"\t");i(r,"application/json")},pdf:function(n,t,i){function o(n,t){var i=[];return n.columns.forEach(function(n){var r;if(n){switch(_typeof(n.value)){case"object":n.value=JSON.stringify(n.value);break;case"undefined":case"null":n.value=""}r={content:n.value,colSpan:n.width,rowSpan:n.height};t&&(r.styles=t);i.push(r)}else i.push("")}),i}var s=[],e=[],u={},c=t.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},l=t.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},f=t.jsPDF||{},h=t&&t.title?t.title:"",r;f.orientation||(f.orientation=t.orientation||"landscape");f.unit||(f.unit="pt");n.forEach(function(n){switch(n.type){case"header":s.push(o(n));break;case"group":e.push(o(n,c));break;case"calc":e.push(o(n,l));break;case"row":e.push(o(n))}});r=new jsPDF(f);t&&t.autoTable&&(u=typeof t.autoTable=="function"?t.autoTable(r)||{}:t.autoTable);h&&(u.addPageContent=function(){r.text(h,40,30)});u.head=s;u.body=e;r.autoTable(u);t&&t.documentProcessing&&t.documentProcessing(r);i(r.output("arraybuffer"),"application/pdf")},xlsx:function(n,t,i){function f(){var r=[],i=[],t={},u={s:{c:0,r:0},e:{c:n[0]?n[0].columns.reduce(function(n,t){return n+(t&&t.width?t.width:1)},0):0,r:n.length}};return n.forEach(function(n,t){var u=[];n.columns.forEach(function(n,r){n?(u.push(!(n.value instanceof Date)&&_typeof(n.value)==="object"?JSON.stringify(n.value):n.value),(n.width>1||n.height>-1)&&i.push({s:{r:t,c:r},e:{r:t+n.height-1,c:r+n.width-1}})):u.push("")});r.push(u)}),XLSX.utils.sheet_add_aoa(t,r),t["!ref"]=XLSX.utils.encode_range(u),i.length&&(t["!merges"]=i),t}function h(n){for(var i=new ArrayBuffer(n.length),r=new Uint8Array(i),t=0;t!=n.length;++t)r[t]=n.charCodeAt(t)&255;return i}var s=this,e=t.sheetName||"Sheet1",r=XLSX.utils.book_new(),o,u;if(r.SheetNames=[],r.Sheets={},t.sheetOnly){i(f());return}if(t.sheets)for(u in t.sheets)t.sheets[u]===!0?(r.SheetNames.push(u),r.Sheets[u]=f()):(r.SheetNames.push(u),this.modules.comms.send(t.sheets[u],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:s.active,intercept:function(n){r.Sheets[u]=n}}));else r.SheetNames.push(e),r.Sheets[e]=f();t.documentProcessing&&(r=t.documentProcessing(r));o=XLSX.write(r,{bookType:"xlsx",bookSST:!0,type:"binary"});i(h(o),"application/octet-stream")},html:function(n,t,i){this.modExists("export",!0)&&i(this.modules.export.genereateHTMLTable(n),"text/html")}};n.prototype.registerModule("download",ni);rt=function(n){this.table=n;this.currentCell=!1;this.mouseClick=!1;this.recursionBlock=!1;this.invalidEdit=!1;this.editedCells=[]};rt.prototype.initializeColumn=function(n){var t=this,i={editor:!1,blocked:!1,check:n.definition.editable,params:n.definition.editorParams||{}};switch(_typeof(n.definition.editor)){case"string":n.definition.editor==="tick"&&(n.definition.editor="tickCross",console.warn("DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor"));t.editors[n.definition.editor]?i.editor=t.editors[n.definition.editor]:console.warn("Editor Error - No such editor found: ",n.definition.editor);break;case"function":i.editor=n.definition.editor;break;case"boolean":n.definition.editor===!0&&(typeof n.definition.formatter!="function"?(n.definition.formatter==="tick"&&(n.definition.formatter="tickCross",console.warn("DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor")),i.editor=t.editors[n.definition.formatter]?t.editors[n.definition.formatter]:t.editors.input):console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",n.definition.formatter))}i.editor&&(n.modules.edit=i)};rt.prototype.getCurrentCell=function(){return this.currentCell?this.currentCell.getComponent():!1};rt.prototype.clearEditor=function(n){var i=this.currentCell,t;if(this.invalidEdit=!1,i){for(this.currentCell=!1,t=i.getElement(),n?i.validate():t.classList.remove("tabulator-validation-fail"),t.classList.remove("tabulator-editing");t.firstChild;)t.removeChild(t.firstChild);i.row.getElement().classList.remove("tabulator-row-editing")}};rt.prototype.cancelEdit=function(){if(this.currentCell){var n=this.currentCell,t=this.currentCell.getComponent();this.clearEditor(!0);n.setValueActual(n.getValue());n.cellRendered();(n.column.definition.editor=="textarea"||n.column.definition.variableHeight)&&n.row.normalizeHeight(!0);n.column.cellEvents.cellEditCancelled&&n.column.cellEvents.cellEditCancelled.call(this.table,t);this.table.options.cellEditCancelled.call(this.table,t)}};rt.prototype.bindEditor=function(n){var i=this,t=n.getElement(!0);t.setAttribute("tabindex",0);t.addEventListener("click",function(){t.classList.contains("tabulator-editing")||t.focus({preventScroll:!0})});t.addEventListener("mousedown",function(n){n.button===2?n.preventDefault():i.mouseClick=!0});t.addEventListener("focus",function(t){i.recursionBlock||i.edit(n,t,!1)})};rt.prototype.focusCellNoEvent=function(n,t){this.recursionBlock=!0;t&&this.table.browser==="ie"||n.getElement().focus({preventScroll:!0});this.recursionBlock=!1};rt.prototype.editCell=function(n,t){this.focusCellNoEvent(n);this.edit(n,!1,t)};rt.prototype.focusScrollAdjust=function(n){if(this.table.rowManager.getRenderMode()=="virtual"){var f=this.table.rowManager.element.scrollTop,e=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,t=n.row.getElement(),o=t.offsetTop;t.offsetTop<f?this.table.rowManager.element.scrollTop-=f-t.offsetTop:t.offsetTop+t.offsetHeight>e&&(this.table.rowManager.element.scrollTop+=t.offsetTop+t.offsetHeight-e);var r=this.table.rowManager.element.scrollLeft,u=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,i=n.getElement(),o=i.offsetLeft;this.table.modExists("frozenColumns")&&(r+=parseInt(this.table.modules.frozenColumns.leftMargin),u-=parseInt(this.table.modules.frozenColumns.rightMargin));i.offsetLeft<r?this.table.rowManager.element.scrollLeft-=r-i.offsetLeft:i.offsetLeft+i.offsetWidth>u&&(this.table.rowManager.element.scrollLeft+=i.offsetLeft+i.offsetWidth-u)}};rt.prototype.edit=function(n,t,i){function a(t){if(r.currentCell===n){var i=!0;return n.column.modules.validate&&r.table.modExists("validate")&&r.table.options.validationMode!="manual"&&(i=r.table.modules.validate.validate(n.column.modules.validate,n,t)),i===!0||r.table.options.validationMode==="highlight"?(r.clearEditor(),n.modules.edit||(n.modules.edit={}),n.modules.edit.edited=!0,r.editedCells.indexOf(n)==-1&&r.editedCells.push(n),n.setValue(t,!0),r.table.options.dataTree&&r.table.modExists("dataTree")&&r.table.modules.dataTree.checkForRestyle(n),i!==!0)?(u.classList.add("tabulator-validation-fail"),r.table.options.validationFailed.call(r.table,n.getComponent(),t,i),!1):!0:(r.invalidEdit=!0,u.classList.add("tabulator-validation-fail"),r.focusCellNoEvent(n,!0),h(),r.table.options.validationFailed.call(r.table,n.getComponent(),t,i),!1)}}function v(){r.currentCell===n&&(r.cancelEdit(),r.table.options.dataTree&&r.table.modExists("dataTree")&&r.table.modules.dataTree.checkForRestyle(n))}function y(n){h=n}var r=this,s=!0,h=function(){},u=n.getElement(),e,f,l,c,o;if(this.currentCell){this.invalidEdit||this.cancelEdit();return}if(n.column.modules.edit.blocked)return this.mouseClick=!1,u.blur(),!1;t&&t.stopPropagation();switch(_typeof(n.column.modules.edit.check)){case"function":s=n.column.modules.edit.check(n.getComponent());break;case"boolean":s=n.column.modules.edit.check}if(s||i){if(r.cancelEdit(),r.currentCell=n,this.focusScrollAdjust(n),f=n.getComponent(),this.mouseClick&&(this.mouseClick=!1,n.column.cellEvents.cellClick&&n.column.cellEvents.cellClick.call(this.table,t,f)),n.column.cellEvents.cellEditing&&n.column.cellEvents.cellEditing.call(this.table,f),r.table.options.cellEditing.call(this.table,f),l=typeof n.column.modules.edit.params=="function"?n.column.modules.edit.params(f):n.column.modules.edit.params,e=n.column.modules.edit.editor.call(r,f,y,a,v,l),e!==!1)if(e instanceof Node){for(u.classList.add("tabulator-editing"),n.row.getElement().classList.add("tabulator-row-editing");u.firstChild;)u.removeChild(u.firstChild);for(u.appendChild(e),h(),c=u.children,o=0;o<c.length;o++)c[o].addEventListener("click",function(n){n.stopPropagation()})}else return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",e),u.blur(),!1;else return u.blur(),!1;return!0}return this.mouseClick=!1,u.blur(),!1};rt.prototype.maskInput=function(n,t){function u(t){var r=i[t];typeof r!="undefined"&&r!==o&&r!==f&&r!==e&&(n.value=n.value+""+r,u(t+1))}var i=t.mask,f=typeof t.maskLetterChar!="undefined"?t.maskLetterChar:"A",e=typeof t.maskNumberChar!="undefined"?t.maskNumberChar:"9",o=typeof t.maskWildcardChar!="undefined"?t.maskWildcardChar:"*",r=!1;n.addEventListener("keydown",function(t){var s=n.value.length,u=t.key;if(t.keyCode>46){if(s>=i.length)return t.preventDefault(),t.stopPropagation(),r=!1,!1;switch(i[s]){case f:if(u.toUpperCase()==u.toLowerCase())return t.preventDefault(),t.stopPropagation(),r=!1,!1;break;case e:if(isNaN(u))return t.preventDefault(),t.stopPropagation(),r=!1,!1;break;case o:break;default:if(u!==i[s])return t.preventDefault(),t.stopPropagation(),r=!1,!1}r=!0}return});n.addEventListener("keyup",function(i){i.keyCode>46&&t.maskAutoFill&&u(n.value.length)});n.placeholder||(n.placeholder=i);t.maskAutoFill&&u(n.value.length)};rt.prototype.getEditedCells=function(){var n=[];return this.editedCells.forEach(function(t){n.push(t.getComponent())}),n};rt.prototype.clearEdited=function(n){var t;n.modules.edit&&n.modules.edit.edited&&(n.modules.edit.edited=!1,n.modules.validate&&(n.modules.validate.invalid=!1));t=this.editedCells.indexOf(n);t>-1&&this.editedCells.splice(t,1)};rt.prototype.editors={input:function(n,t,i,r,u){function s(){(o===null||typeof o=="undefined")&&f.value!==""||f.value!==o?i(f.value)&&(o=f.value):r()}var o=n.getValue(),f=document.createElement("input"),e;if(f.setAttribute("type",u.search?"search":"text"),f.style.padding="4px",f.style.width="100%",f.style.boxSizing="border-box",u.elementAttributes&&_typeof(u.elementAttributes)=="object")for(e in u.elementAttributes)e.charAt(0)=="+"?(e=e.slice(1),f.setAttribute(e,f.getAttribute(e)+u.elementAttributes["+"+e])):f.setAttribute(e,u.elementAttributes[e]);return f.value=typeof o!="undefined"?o:"",t(function(){f.focus({preventScroll:!0});f.style.height="100%"}),f.addEventListener("change",s),f.addEventListener("blur",s),f.addEventListener("keydown",function(n){switch(n.keyCode){case 13:s(n);break;case 27:r();break;case 35:case 36:n.stopPropagation()}}),u.mask&&this.table.modules.edit.maskInput(f,u),f},textarea:function(n,t,i,r,u){function l(){(o===null||typeof o=="undefined")&&f.value!==""||f.value!==o?(i(f.value)&&(o=f.value),setTimeout(function(){n.getRow().normalizeHeight()},300)):r()}var a=this,o=n.getValue(),s=u.verticalNavigation||"hybrid",h=String(o!==null&&typeof o!="undefined"?o:""),v=(h.match(/(?:\r\n|\r|\n)/g)||[]).length+1,f=document.createElement("textarea"),c=0,e;if(f.style.display="block",f.style.padding="2px",f.style.height="100%",f.style.width="100%",f.style.boxSizing="border-box",f.style.whiteSpace="pre-wrap",f.style.resize="none",u.elementAttributes&&_typeof(u.elementAttributes)=="object")for(e in u.elementAttributes)e.charAt(0)=="+"?(e=e.slice(1),f.setAttribute(e,f.getAttribute(e)+u.elementAttributes["+"+e])):f.setAttribute(e,u.elementAttributes[e]);return f.value=h,t(function(){f.focus({preventScroll:!0});f.style.height="100%";f.scrollHeight;f.style.height=f.scrollHeight+"px";n.getRow().normalizeHeight()}),f.addEventListener("change",l),f.addEventListener("blur",l),f.addEventListener("keyup",function(){f.style.height="";var t=f.scrollHeight;f.style.height=t+"px";t!=c&&(c=t,n.getRow().normalizeHeight())}),f.addEventListener("keydown",function(n){switch(n.keyCode){case 27:r();break;case 38:(s=="editor"||s=="hybrid"&&f.selectionStart)&&(n.stopImmediatePropagation(),n.stopPropagation());break;case 40:(s=="editor"||s=="hybrid"&&f.selectionStart!==f.value.length)&&(n.stopImmediatePropagation(),n.stopPropagation());break;case 35:case 36:n.stopPropagation()}}),u.mask&&this.table.modules.edit.maskInput(f,u),f},number:function(n,t,i,r,u){function h(){var n=f.value;isNaN(n)||n===""||(n=Number(n));n!==o?i(n)&&(o=n):r()}var o=n.getValue(),c=u.verticalNavigation||"editor",f=document.createElement("input"),e,s;if(f.setAttribute("type","number"),typeof u.max!="undefined"&&f.setAttribute("max",u.max),typeof u.min!="undefined"&&f.setAttribute("min",u.min),typeof u.step!="undefined"&&f.setAttribute("step",u.step),f.style.padding="4px",f.style.width="100%",f.style.boxSizing="border-box",u.elementAttributes&&_typeof(u.elementAttributes)=="object")for(e in u.elementAttributes)e.charAt(0)=="+"?(e=e.slice(1),f.setAttribute(e,f.getAttribute(e)+u.elementAttributes["+"+e])):f.setAttribute(e,u.elementAttributes[e]);return f.value=o,s=function(){h()},t(function(){f.removeEventListener("blur",s);f.focus({preventScroll:!0});f.style.height="100%";f.addEventListener("blur",s)}),f.addEventListener("keydown",function(n){switch(n.keyCode){case 13:h();break;case 27:r();break;case 38:case 40:c=="editor"&&(n.stopImmediatePropagation(),n.stopPropagation());break;case 35:case 36:n.stopPropagation()}}),u.mask&&this.table.modules.edit.maskInput(f,u),f},range:function(n,t,i,r,u){function s(){var n=f.value;isNaN(n)||n===""||(n=Number(n));n!=o?i(n)&&(o=n):r()}var o=n.getValue(),f=document.createElement("input"),e;if(f.setAttribute("type","range"),typeof u.max!="undefined"&&f.setAttribute("max",u.max),typeof u.min!="undefined"&&f.setAttribute("min",u.min),typeof u.step!="undefined"&&f.setAttribute("step",u.step),f.style.padding="4px",f.style.width="100%",f.style.boxSizing="border-box",u.elementAttributes&&_typeof(u.elementAttributes)=="object")for(e in u.elementAttributes)e.charAt(0)=="+"?(e=e.slice(1),f.setAttribute(e,f.getAttribute(e)+u.elementAttributes["+"+e])):f.setAttribute(e,u.elementAttributes[e]);return f.value=o,t(function(){f.focus({preventScroll:!0});f.style.height="100%"}),f.addEventListener("blur",function(){s()}),f.addEventListener("keydown",function(n){switch(n.keyCode){case 13:s();break;case 27:r()}}),f},select:function(t,i,r,u,f){function ht(n){var r={},u=y.table.getData(),i;return i=n?y.table.columnManager.getColumnByField(n):t.getColumn()._getSelf(),i?u.forEach(function(n){var t=i.getFieldValue(n);t!==null&&typeof t!="undefined"&&t!==""&&(r[t]=!0)}):console.warn("unable to find matching column to create select lookup list:",n),Object.keys(r)}function rt(n,i){function s(n){var n={label:n.label,value:n.value,itemParams:n.itemParams,elementAttributes:n.elementAttributes,element:!1};return i.indexOf(n.value)>-1&&d(n),u.push(n),r.push(n),n}var u=[],r=[],o,e;if(typeof n=="function"&&(n=n(t)),Array.isArray(n))n.forEach(function(n){var t;(typeof n=="undefined"?"undefined":_typeof(n))==="object"?n.options?(t={label:n.label,group:!0,itemParams:n.itemParams,elementAttributes:n.elementAttributes,element:!1},r.push(t),n.options.forEach(function(n){s(n)})):s(n):(t={label:n,value:n,element:!1},i.indexOf(t.value)>-1&&d(t),u.push(t),r.push(t))});else for(o in n)e={label:n[o],value:o,element:!1},i.indexOf(e.value)>-1&&d(e),u.push(e),r.push(e);f.sortValuesList&&(u.sort(function(n,t){return n.label<t.label?-1:n.label>t.label?1:0}),r.sort(function(n,t){return n.label<t.label?-1:n.label>t.label?1:0}),f.sortValuesList!=="asc"&&(u.reverse(),r.reverse()));l=u;ot=r;yt()}function yt(){while(o.firstChild)o.removeChild(o.firstChild);ot.forEach(function(n){var i=n.element,r;if(!i){if(i=document.createElement("div"),n.label=f.listItemFormatter?f.listItemFormatter(n.value,n.label,t,i,n.itemParams):n.label,n.group?(i.classList.add("tabulator-edit-select-list-group"),i.tabIndex=0,i.innerHTML=n.label===""?"&nbsp;":n.label):(i.classList.add("tabulator-edit-select-list-item"),i.tabIndex=0,i.innerHTML=n.label===""?"&nbsp;":n.label,i.addEventListener("click",function(){tt=!0;setTimeout(function(){tt=!1},10);c?(ct(n),e.focus()):lt(n)}),h.indexOf(n)>-1&&i.classList.add("active")),n.elementAttributes&&_typeof(n.elementAttributes)=="object")for(r in n.elementAttributes)r.charAt(0)=="+"?(r=r.slice(1),i.setAttribute(r,e.getAttribute(r)+n.elementAttributes["+"+r])):i.setAttribute(r,n.elementAttributes[r]);i.addEventListener("mousedown",function(){w=!1;setTimeout(function(){w=!0},10)});n.element=i}o.appendChild(i)})}function b(n,t){!c&&s&&s.element&&s.element.classList.remove("active");s&&s.element&&s.element.classList.remove("focused");s=n;n.element&&(n.element.classList.add("focused"),t&&n.element.classList.add("active"));n&&n.element&&n.element.scrollIntoView&&n.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function d(n){var t=h.indexOf(n);t==-1&&(h.push(n),b(n,!0));at()}function ut(n){var t=h[n];n>-1&&(h.splice(n,1),t.element&&t.element.classList.remove("active"))}function ct(n){n||(n=s);var t=h.indexOf(n);t>-1?ut(t):(c!==!0&&h.length>=c&&ut(0),d(n));at()}function lt(n){et();n||(n=s);n&&(e.value=n.label,r(n.value));p=e.value}function ft(n){n||et();var t=[];h.forEach(function(n){t.push(n.value)});p=e.value;r(t)}function at(){var n=[];h.forEach(function(t){n.push(t.label)});e.value=n.join(", ");y.currentCell===!1&&ft(!0)}function pt(){for(var t=h.length,n=0;n<t;n++)ut(0)}function g(){et();u()}function wt(){if(h=[],!o.parentNode){f.values===!0?rt(ht(),p):typeof f.values=="string"?rt(ht(f.values),p):rt(f.values||[],p);var t=n.prototype.helpers.elOffset(nt);o.style.minWidth=nt.offsetWidth+"px";o.style.top=t.top+nt.offsetHeight+"px";o.style.left=t.left+"px";o.addEventListener("mousedown",function(){w=!1;setTimeout(function(){w=!0},10)});document.body.appendChild(o)}}function et(){o.parentNode&&o.parentNode.removeChild(o);bt()}function bt(){y.table.rowManager.element.removeEventListener("scroll",g)}function kt(){var t,n;clearTimeout(st);t=String.fromCharCode(event.keyCode).toLowerCase();it+=t.toLowerCase();n=l.find(function(n){return typeof n.label!="undefined"&&n.label.toLowerCase().startsWith(it)});n&&b(n,!c);st=setTimeout(function(){it=""},800)}var vt=this,y=this,nt=t.getElement(),v=t.getValue(),k=f.verticalNavigation||"editor",p=typeof v!="undefined"||v===null?Array.isArray(v)?v:[v]:typeof f.defaultValue!="undefined"?f.defaultValue:[],e=document.createElement("input"),o=document.createElement("div"),c=f.multiselect,l=[],s={},ot=[],h=[],w=!0,tt=!1,it="",st=null,a;if(!Array.isArray(f)&&(Array.isArray(f)||(typeof f=="undefined"?"undefined":_typeof(f))!=="object"||f.values)||(console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),f={values:f}),e.setAttribute("type","text"),e.style.padding="4px",e.style.width="100%",e.style.boxSizing="border-box",e.style.cursor="default",e.readOnly=this.currentCell!=!1,f.elementAttributes&&_typeof(f.elementAttributes)=="object")for(a in f.elementAttributes)a.charAt(0)=="+"?(a=a.slice(1),e.setAttribute(a,e.getAttribute(a)+f.elementAttributes["+"+a])):e.setAttribute(a,f.elementAttributes[a]);return e.value=typeof v!="undefined"||v===null?v:"",e.addEventListener("search",function(){e.value||(pt(),ft())}),e.addEventListener("keydown",function(n){var t;switch(n.keyCode){case 38:t=l.indexOf(s);(k=="editor"||k=="hybrid"&&t)&&(n.stopImmediatePropagation(),n.stopPropagation(),n.preventDefault(),t>0&&b(l[t-1],!c));break;case 40:t=l.indexOf(s);(k=="editor"||k=="hybrid"&&t<l.length-1)&&(n.stopImmediatePropagation(),n.stopPropagation(),n.preventDefault(),t<l.length-1&&(t==-1?b(l[0],!c):b(l[t+1],!c)));break;case 37:case 39:n.stopImmediatePropagation();n.stopPropagation();n.preventDefault();break;case 13:c?ct():lt();break;case 27:g();break;case 9:break;default:y.currentCell===!1&&n.preventDefault();n.keyCode>=38&&n.keyCode<=90&&kt(n.keyCode)}}),e.addEventListener("blur",function(){w&&(c?ft():g())}),e.addEventListener("focus",function(){tt||wt()}),o=document.createElement("div"),o.classList.add("tabulator-edit-select-list"),i(function(){e.style.height="100%";e.focus({preventScroll:!0})}),setTimeout(function(){vt.table.rowManager.element.addEventListener("scroll",g)},10),e},autocomplete:function(t,i,r,u,f){function rt(){f.values===!0?p=ut():typeof f.values=="string"&&(p=ut(f.values))}function ut(n){var i={},u=b.table.getData(),r;return r=n?b.table.columnManager.getColumnByField(n):t.getColumn()._getSelf(),r?(u.forEach(function(n){var t=r.getFieldValue(n);t!==null&&typeof t!="undefined"&&t!==""&&(i[t]=!0)}),i=f.sortValuesList?f.sortValuesList=="asc"?Object.keys(i).sort():Object.keys(i).sort().reverse():Object.keys(i)):console.warn("unable to find matching column to create autocomplete lookup list:",n),i}function w(n,t){var i=[],r,u;r=p?p:f.values||[];f.searchFunc?(i=f.searchFunc(n,r),i instanceof Promise?(ft(typeof f.searchingPlaceholder!="undefined"?f.searchingPlaceholder:"Searching..."),i.then(function(n){nt(g(n),t)}).catch(function(n){console.err("error in autocomplete search promise:",n)})):nt(g(i),t)):(u=g(r),n===""?f.showListOnEmpty&&(i=u):u.forEach(function(t){(t.value!==null||typeof t.value!="undefined")&&(String(t.value).toLowerCase().indexOf(String(n).toLowerCase())>-1||String(t.title).toLowerCase().indexOf(String(n).toLowerCase())>-1)&&i.push(t)}),nt(i,t))}function ft(n){var t=document.createElement("div");et();n!==!1&&(t.classList.add("tabulator-edit-select-list-notice"),t.tabIndex=0,n instanceof Node?t.appendChild(n):t.innerHTML=n,o.appendChild(t))}function g(n){var i=[],t,r;if(Array.isArray(n))n.forEach(function(n){var t={};(typeof n=="undefined"?"undefined":_typeof(n))==="object"?(t.title=f.listItemFormatter?f.listItemFormatter(n.value,n.label):n.label,t.value=n.value):(t.title=f.listItemFormatter?f.listItemFormatter(n,n):n,t.value=n);i.push(t)});else for(t in n)r={title:f.listItemFormatter?f.listItemFormatter(t,n[t]):n[t],value:t},i.push(r);return i}function et(){while(o.firstChild)o.removeChild(o.firstChild)}function nt(n,t){n.length?ht(n,t):f.emptyPlaceholder&&ft(f.emptyPlaceholder)}function ht(n,t){var i=!1;et();h=n;h.forEach(function(n){var r=n.element;r||(r=document.createElement("div"),r.classList.add("tabulator-edit-select-list-item"),r.tabIndex=0,r.innerHTML=n.title,r.addEventListener("click",function(){a(n);tt()}),r.addEventListener("mousedown",function(){v=!1;setTimeout(function(){v=!0},10)}),n.element=r,t&&n.value==l&&(e.value=n.title,n.element.classList.add("active"),i=!0),n===s&&(n.element.classList.add("active"),i=!0));o.appendChild(r)});i||a(!1)}function tt(){ot();s?l!==s.value?(l=s.value,e.value=s.title,r(s.value)):u():f.freetext?(l=e.value,r(e.value)):f.allowEmpty&&e.value===""?(l=e.value,r(e.value)):u()}function ct(){if(!o.parentNode){while(o.firstChild)o.removeChild(o.firstChild);var t=n.prototype.helpers.elOffset(k);o.style.minWidth=k.offsetWidth+"px";o.style.top=t.top+k.offsetHeight+"px";o.style.left=t.left+"px";document.body.appendChild(o)}}function a(n){s&&s.element&&s.element.classList.remove("active");s=n;n&&n.element&&n.element.classList.add("active");n&&n.element&&n.element.scrollIntoView&&n.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function ot(){o.parentNode&&o.parentNode.removeChild(o);lt()}function it(){ot();u()}function lt(){b.table.rowManager.element.removeEventListener("scroll",it)}var st=this,b=this,k=t.getElement(),l=t.getValue(),y=f.verticalNavigation||"editor",d=typeof l!="undefined"||l===null?l:typeof f.defaultValue!="undefined"?f.defaultValue:"",e=document.createElement("input"),o=document.createElement("div"),h=[],s=!1,v=!0,p=!1,c;if(e.setAttribute("type","search"),e.style.padding="4px",e.style.width="100%",e.style.boxSizing="border-box",f.elementAttributes&&_typeof(f.elementAttributes)=="object")for(c in f.elementAttributes)c.charAt(0)=="+"?(c=c.slice(1),e.setAttribute(c,e.getAttribute(c)+f.elementAttributes["+"+c])):e.setAttribute(c,f.elementAttributes[c]);return o.classList.add("tabulator-edit-select-list"),o.addEventListener("mousedown",function(){v=!1;setTimeout(function(){v=!0},10)}),e.addEventListener("keydown",function(n){var t;switch(n.keyCode){case 38:t=h.indexOf(s);(y=="editor"||y=="hybrid"&&t)&&(n.stopImmediatePropagation(),n.stopPropagation(),n.preventDefault(),t>0?a(h[t-1]):a(!1));break;case 40:t=h.indexOf(s);(y=="editor"||y=="hybrid"&&t<h.length-1)&&(n.stopImmediatePropagation(),n.stopPropagation(),n.preventDefault(),t<h.length-1&&(t==-1?a(h[0]):a(h[t+1])));break;case 37:case 39:n.stopImmediatePropagation();n.stopPropagation();break;case 13:tt();break;case 27:it();break;case 36:case 35:n.stopImmediatePropagation()}}),e.addEventListener("keyup",function(n){switch(n.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:w(e.value)}}),e.addEventListener("search",function(){w(e.value)}),e.addEventListener("blur",function(){v&&tt()}),e.addEventListener("focus",function(){var n=d;rt();ct();e.value=n;w(n,!0)}),i(function(){e.style.height="100%";e.focus({preventScroll:!0})}),f.mask&&this.table.modules.edit.maskInput(e,f),setTimeout(function(){st.table.rowManager.element.addEventListener("scroll",it)},10),rt(),e.value=d,w(d,!0),e},star:function(n,t,i,r,u){function c(n){p.forEach(function(t,i){i<n?(a.table.browser=="ie"?t.setAttribute("class","tabulator-star-active"):t.classList.replace("tabulator-star-inactive","tabulator-star-active"),t.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):(a.table.browser=="ie"?t.setAttribute("class","tabulator-star-inactive"):t.classList.replace("tabulator-star-active","tabulator-star-inactive"),t.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function b(n){var t=document.createElement("span"),r=h.cloneNode(!0);p.push(r);t.addEventListener("mouseenter",function(t){t.stopPropagation();t.stopImmediatePropagation();c(n)});t.addEventListener("mousemove",function(n){n.stopPropagation();n.stopImmediatePropagation()});t.addEventListener("click",function(t){t.stopPropagation();t.stopImmediatePropagation();i(n);e.blur()});t.appendChild(r);f.appendChild(t)}function w(n){s=n;c(n)}var a=this,e=n.getElement(),s=n.getValue(),v=e.getElementsByTagName("svg").length||5,y=e.getElementsByTagName("svg")[0]?e.getElementsByTagName("svg")[0].getAttribute("width"):14,p=[],f=document.createElement("div"),h=document.createElementNS("http://www.w3.org/2000/svg","svg"),o,l;if(e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.style.textOverflow="ellipsis",f.style.verticalAlign="middle",f.style.display="inline-block",f.style.padding="4px",h.setAttribute("width",y),h.setAttribute("height",y),h.setAttribute("viewBox","0 0 512 512"),h.setAttribute("xml:space","preserve"),h.style.padding="0 1px",u.elementAttributes&&_typeof(u.elementAttributes)=="object")for(o in u.elementAttributes)o.charAt(0)=="+"?(o=o.slice(1),f.setAttribute(o,f.getAttribute(o)+u.elementAttributes["+"+o])):f.setAttribute(o,u.elementAttributes[o]);for(l=1;l<=v;l++)b(l);return s=Math.min(parseInt(s),v),c(s),f.addEventListener("mousemove",function(){c(0)}),f.addEventListener("click",function(){i(0)}),e.addEventListener("blur",function(){r()}),e.addEventListener("keydown",function(n){switch(n.keyCode){case 39:w(s+1);break;case 37:w(s-1);break;case 13:i(s);break;case 27:r()}}),f},progress:function(n,t,i,r,u){function p(){var n=window.getComputedStyle(e,null),t=y*Math.round(f.offsetWidth/((e.clientWidth-parseInt(n.getPropertyValue("padding-left"))-parseInt(n.getPropertyValue("padding-right")))/100))+c;i(t);e.setAttribute("aria-valuenow",t);e.setAttribute("aria-label",h)}var e=n.getElement(),a=typeof u.max=="undefined"?e.getElementsByTagName("div")[0].getAttribute("max")||100:u.max,c=typeof u.min=="undefined"?e.getElementsByTagName("div")[0].getAttribute("min")||0:u.min,y=(a-c)/100,h=n.getValue()||0,o=document.createElement("div"),f=document.createElement("div"),l,v,s;if(o.style.position="absolute",o.style.right="0",o.style.top="0",o.style.bottom="0",o.style.width="5px",o.classList.add("tabulator-progress-handle"),f.style.display="inline-block",f.style.position="relative",f.style.height="100%",f.style.backgroundColor="#488CE9",f.style.maxWidth="100%",f.style.minWidth="0%",u.elementAttributes&&_typeof(u.elementAttributes)=="object")for(s in u.elementAttributes)s.charAt(0)=="+"?(s=s.slice(1),f.setAttribute(s,f.getAttribute(s)+u.elementAttributes["+"+s])):f.setAttribute(s,u.elementAttributes[s]);return e.style.padding="4px 4px",h=Math.min(parseFloat(h),a),h=Math.max(parseFloat(h),c),h=Math.round((h-c)/y),f.style.width=h+"%",e.setAttribute("aria-valuemin",c),e.setAttribute("aria-valuemax",a),f.appendChild(o),o.addEventListener("mousedown",function(n){l=n.screenX;v=f.offsetWidth}),o.addEventListener("mouseover",function(){o.style.cursor="ew-resize"}),e.addEventListener("mousemove",function(n){l&&(f.style.width=v+n.screenX-l+"px")}),e.addEventListener("mouseup",function(n){l&&(n.stopPropagation(),n.stopImmediatePropagation(),l=!1,v=!1,p())}),e.addEventListener("keydown",function(n){switch(n.keyCode){case 39:n.preventDefault();f.style.width=f.clientWidth+e.clientWidth/100+"px";break;case 37:n.preventDefault();f.style.width=f.clientWidth-e.clientWidth/100+"px";break;case 9:case 13:p();break;case 27:r()}}),e.addEventListener("blur",function(){r()}),f},tickCross:function(n,t,i,r,u){function c(n){return l?n?s?h:f.checked:f.checked&&!s?(f.checked=!1,f.indeterminate=!0,s=!0,h):(s=!1,f.checked):f.checked}var o=n.getValue(),f=document.createElement("input"),l=u.tristate,h=typeof u.indeterminateValue=="undefined"?null:u.indeterminateValue,s=!1,e;if(f.setAttribute("type","checkbox"),f.style.marginTop="5px",f.style.boxSizing="border-box",u.elementAttributes&&_typeof(u.elementAttributes)=="object")for(e in u.elementAttributes)e.charAt(0)=="+"?(e=e.slice(1),f.setAttribute(e,f.getAttribute(e)+u.elementAttributes["+"+e])):f.setAttribute(e,u.elementAttributes[e]);return f.value=o,l&&(typeof o=="undefined"||o===h||o==="")&&(s=!0,f.indeterminate=!0),this.table.browser!="firefox"&&t(function(){f.focus({preventScroll:!0})}),f.checked=o===!0||o==="true"||o==="True"||o===1,t(function(){f.focus()}),f.addEventListener("change",function(){i(c())}),f.addEventListener("blur",function(){i(c(!0))}),f.addEventListener("keydown",function(n){n.keyCode==13&&i(c());n.keyCode==27&&r()}),f}};n.prototype.registerModule("edit",rt);var hi=function(n,t,i,r){this.type=n;this.columns=t;this.component=i||!1;this.indent=r||0},si=function(n,t,i,r,u){this.value=n;this.component=t||!1;this.width=i;this.height=r;this.depth=u},g=function(n){this.table=n;this.config={};this.cloneTableStyle=!0;this.colVisProp=""};return g.prototype.generateExportList=function(n,t,i,r){this.cloneTableStyle=t;this.config=n||{};this.colVisProp=r;var u=this.config.columnHeaders!==!1?this.headersToExportRows(this.generateColumnGroupHeaders()):[],f=this.bodyToExportRows(this.rowLookup(i));return u.concat(f)},g.prototype.genereateTable=function(n,t,i,r){var u=this.generateExportList(n,t,i,r);return this.genereateTableElement(u)},g.prototype.rowLookup=function(n){var i=this,t=[];if(typeof n=="function")n.call(this.table).forEach(function(n){n=i.table.rowManager.findRow(n);n&&t.push(n)});else switch(n){case!0:case"visible":t=this.table.rowManager.getVisibleRows(!0);break;case"all":t=this.table.rowManager.rows;break;case"selected":t=this.table.modules.selectRow.selectedRows;break;case"active":default:t=this.table.options.pagination?this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length-2):this.table.rowManager.getDisplayRows()}return Object.assign([],t)},g.prototype.generateColumnGroupHeaders=function(){var t=this,n=[],i=this.config.columnGroups!==!1?this.table.columnManager.columns:this.table.columnManager.columnsByIndex;return i.forEach(function(i){var r=t.processColumnGroup(i);r&&n.push(r)}),n},g.prototype.processColumnGroup=function(n){var u=this,r=n.columns,i=0,f=n.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||n.definition.title,t={title:f,column:n,depth:1};if(r.length){if(t.subGroups=[],t.width=0,r.forEach(function(n){var r=u.processColumnGroup(n);r&&(t.width+=r.width,t.subGroups.push(r),r.depth>i&&(i=r.depth))}),t.depth+=i,!t.width)return!1}else if(this.columnVisCheck(n))t.width=1;else return!1;return t},g.prototype.columnVisCheck=function(n){return n.definition[this.colVisProp]!==!1&&(n.visible||!n.visible&&n.definition[this.colVisProp])},g.prototype.headersToExportRows=function(n){function u(n,r){var o=i-r,f,e;if(typeof t[r]=="undefined"&&(t[r]=[]),n.height=n.subGroups?1:o-n.depth+1,t[r].push(n),n.height>1)for(f=1;f<n.height;f++)typeof t[r+f]=="undefined"&&(t[r+f]=[]),t[r+f].push(!1);if(n.width>1)for(e=1;e<n.width;e++)t[r].push(!1);n.subGroups&&n.subGroups.forEach(function(n){u(n,r+1)})}var t=[],i=0,r=[];return n.forEach(function(n){n.depth>i&&(i=n.depth)}),n.forEach(function(n){u(n,0)}),t.forEach(function(n){var t=[];n.forEach(function(n){n?t.push(new si(n.title,n.column.getComponent(),n.width,n.height,n.depth)):t.push(null)});r.push(new hi("header",t))}),r},g.prototype.bodyToExportRows=function(n){var t=this,i=[],r=[];return this.table.columnManager.columnsByIndex.forEach(function(n){t.columnVisCheck(n)&&i.push(n.getComponent())}),this.config.columnCalcs!==!1&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&n.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&n.push(this.table.modules.columnCalcs.botRow)),n=n.filter(function(n){switch(n.type){case"group":return t.config.rowGroups!==!1;case"calc":return t.config.columnCalcs!==!1;case"row":return!(t.table.options.dataTree&&t.config.dataTree===!1&&n.modules.dataTree.parent)}return!0}),n.forEach(function(n){var e=n.getData(t.colVisProp),u=[],f=0;switch(n.type){case"group":f=n.level;u.push(new si(n.key,n.getComponent(),i.length,1));break;case"calc":case"row":i.forEach(function(n){u.push(new si(n._column.getFieldValue(e),n,1,1))});t.table.options.dataTree&&t.config.dataTree!==!1&&(f=n.modules.dataTree.index)}r.push(new hi(n.type,u,n.getComponent(),f))}),r},g.prototype.genereateTableElement=function(n){var r=this,u=document.createElement("table"),f=document.createElement("thead"),e=document.createElement("tbody"),i=this.lookupTableStyles(),o=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],t={};return t.rowFormatter=o!==null?o:this.table.options.rowFormatter,this.table.options.dataTree&&this.config.dataTree!==!1&&this.table.modExists("columnCalcs")&&(t.treeElementField=this.table.modules.dataTree.elementField),t.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],t.groupHeader&&!Array.isArray(t.groupHeader)&&(t.groupHeader=[t.groupHeader]),u.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),f,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),n.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),n.forEach(function(n,u){switch(n.type){case"header":f.appendChild(r.genereateHeaderElement(n,t,i));break;case"group":e.appendChild(r.genereateGroupElement(n,t,i));break;case"calc":e.appendChild(r.genereateCalcElement(n,t,i));break;case"row":var o=r.genereateRowElement(n,t,i);r.mapElementStyles(u%2&&i.evenRow?i.evenRow:i.oddRow,o,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]);e.appendChild(o)}}),f.innerHTML&&u.appendChild(f),u.appendChild(e),this.mapElementStyles(this.table.element,u,["border-top","border-left","border-right","border-bottom"]),u},g.prototype.lookupTableStyles=function(){var n={};return this.cloneTableStyle&&window.getComputedStyle&&(n.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),n.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),n.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),n.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),n.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],n.firstRow&&(n.styleCells=n.firstRow.getElementsByClassName("tabulator-cell"),n.firstCell=n.styleCells[0],n.lastCell=n.styleCells[n.styleCells.length-1])),n},g.prototype.genereateHeaderElement=function(n){var t=this,i=document.createElement("tr");return n.columns.forEach(function(n){if(n){var r=document.createElement("th"),u=n.component._column.definition.cssClass?n.component._column.definition.cssClass.split(" "):[];r.colSpan=n.width;r.rowSpan=n.height;r.innerHTML=n.value;t.cloneTableStyle&&(r.style.boxSizing="border-box");u.forEach(function(n){r.classList.add(n)});t.mapElementStyles(n.component.getElement(),r,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]);t.mapElementStyles(n.component._column.contentElement,r,["padding-top","padding-left","padding-right","padding-bottom"]);n.component._column.visible?t.mapElementStyles(n.component.getElement(),r,["width"]):n.component._column.definition.width&&(r.style.width=n.component._column.definition.width+"px");n.component._column.parent&&t.mapElementStyles(n.component._column.parent.groupElement,r,["border-top"]);i.appendChild(r)}}),i},g.prototype.genereateGroupElement=function(n,t,i){var r=document.createElement("tr"),f=document.createElement("td"),u=n.columns[0];return r.classList.add("tabulator-print-table-row"),u.value=t.groupHeader&&t.groupHeader[n.indent]?t.groupHeader[n.indent](u.value,n.component._group.getRowCount(),n.component._group.getData(),n.component):t.groupHeader===!1?u.value:n.component._group.generator(u.value,n.component._group.getRowCount(),n.component._group.getData(),n.component),f.colSpan=u.width,f.innerHTML=u.value,r.classList.add("tabulator-print-table-group"),r.classList.add("tabulator-group-level-"+n.indent),u.component.isVisible()&&r.classList.add("tabulator-group-visible"),this.mapElementStyles(i.firstGroup,r,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(i.firstGroup,f,["padding-top","padding-left","padding-right","padding-bottom"]),r.appendChild(f),r},g.prototype.genereateCalcElement=function(n,t,i){var r=this.genereateRowElement(n,t,i);return r.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(i.calcRow,r,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),r},g.prototype.genereateRowElement=function(n,t,r){var u=this,f=document.createElement("tr");return f.classList.add("tabulator-print-table-row"),n.columns.forEach(function(e){if(e){var s=document.createElement("td"),h=e.component._column,o=e.value,c={modules:{},getValue:function(){return o},getField:function(){return h.definition.field},getElement:function(){return s},getColumn:function(){return h.getComponent()},getData:function(){return n.component.getData()},getRow:function(){return n.component},getComponent:function(){return c},column:h},l=h.definition.cssClass?h.definition.cssClass.split(" "):[];if(l.forEach(function(n){s.classList.add(n)}),u.table.modExists("format")&&u.config.formatCells!==!1)o=u.table.modules.format.formatExportValue(c,u.colVisProp);else switch(typeof o=="undefined"?"undefined":_typeof(o)){case"object":o=JSON.stringify(o);break;case"undefined":case"null":o="";break;default:o=o}o instanceof Node?s.appendChild(o):s.innerHTML=o;r.firstCell&&(u.mapElementStyles(r.firstCell,s,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),h.definition.align&&(s.style.textAlign=h.definition.align));u.table.options.dataTree&&u.config.dataTree!==!1&&(t.treeElementField&&t.treeElementField==h.field||!t.treeElementField&&i==0)&&(n.component._row.modules.dataTree.controlEl&&s.insertBefore(n.component._row.modules.dataTree.controlEl.cloneNode(!0),s.firstChild),n.component._row.modules.dataTree.branchEl&&s.insertBefore(n.component._row.modules.dataTree.branchEl.cloneNode(!0),s.firstChild));f.appendChild(s);c.modules.format&&c.modules.format.renderedCallback&&c.modules.format.renderedCallback();t.rowFormatter&&u.config.formatCells!==!1&&t.rowFormatter(n.component)}}),f},g.prototype.genereateHTMLTable=function(n){var t=document.createElement("div");return t.appendChild(this.genereateTableElement(n)),t.innerHTML},g.prototype.getHtml=function(n,t,i,r){var u=this.generateExportList(i||this.table.options.htmlOutputConfig,t,n,r||"htmlOutput");return this.genereateHTMLTable(u)},g.prototype.mapElementStyles=function(n,t,i){var r,u;this.cloneTableStyle&&n&&t&&(r={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"},window.getComputedStyle&&(u=window.getComputedStyle(n),i.forEach(function(n){t.style[r[n]]=u.getPropertyValue(n)})))},n.prototype.registerModule("export",g),y=function(n){this.table=n;this.filterList=[];this.headerFilters={};this.headerFilterColumns=[];this.prevHeaderFilterChangeCheck="";this.prevHeaderFilterChangeCheck="{}";this.changed=!1},y.prototype.initializeColumn=function(n){function u(u){var s=n.modules.filter.tagType=="input"&&n.modules.filter.attrType=="text"||n.modules.filter.tagType=="textarea"?"partial":"match",e="",o="",f;if(typeof n.modules.filter.prevSuccess=="undefined"||n.modules.filter.prevSuccess!==u){if(n.modules.filter.prevSuccess=u,n.modules.filter.emptyFunc(u))delete t.headerFilters[i];else{n.modules.filter.value=u;switch(_typeof(n.definition.headerFilterFunc)){case"string":t.filters[n.definition.headerFilterFunc]?(e=n.definition.headerFilterFunc,f=function(i){var r=n.definition.headerFilterFuncParams||{},f=n.getFieldValue(i);return r=typeof r=="function"?r(u,f,i):r,t.filters[n.definition.headerFilterFunc](u,f,i,r)}):console.warn("Header Filter Error - Matching filter function not found: ",n.definition.headerFilterFunc);break;case"function":f=function(t){var i=n.definition.headerFilterFuncParams||{},r=n.getFieldValue(t);return i=typeof i=="function"?i(u,r,t):i,n.definition.headerFilterFunc(u,r,t,i)};e=f}if(!f)switch(s){case"partial":f=function(t){var i=n.getFieldValue(t);return typeof i!="undefined"&&i!==null?String(i).toLowerCase().indexOf(String(u).toLowerCase())>-1:!1};e="like";break;default:f=function(t){return n.getFieldValue(t)==u};e="="}t.headerFilters[i]={value:u,func:f,type:e,params:r||{}}}o=JSON.stringify(t.headerFilters);t.prevHeaderFilterChangeCheck!==o&&(t.prevHeaderFilterChangeCheck=o,t.changed=!0,t.table.rowManager.filterRefresh())}return!0}var t=this,i=n.getField(),r;n.modules.filter={success:u,attrType:!1,tagType:!1,emptyFunc:!1};this.generateHeaderFilterElement(n)},y.prototype.generateHeaderFilterElement=function(n,t,i){function y(){}var s=this,u=this,l=n.modules.filter.success,h=n.getField(),o,f,r,v,c,a,e;if(n.modules.filter.headerElement&&n.modules.filter.headerElement.parentNode&&n.contentElement.removeChild(n.modules.filter.headerElement.parentNode),h){n.modules.filter.emptyFunc=n.definition.headerFilterEmptyCheck||function(n){return!n&&n!=="0"};o=document.createElement("div");o.classList.add("tabulator-header-filter");switch(_typeof(n.definition.headerFilter)){case"string":u.table.modules.edit.editors[n.definition.headerFilter]?(f=u.table.modules.edit.editors[n.definition.headerFilter],n.definition.headerFilter!=="tick"&&n.definition.headerFilter!=="tickCross"||n.definition.headerFilterEmptyCheck||(n.modules.filter.emptyFunc=function(n){return n!==!0&&n!==!1})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",n.definition.editor);break;case"function":f=n.definition.headerFilter;break;case"boolean":n.modules.edit&&n.modules.edit.editor?f=n.modules.edit.editor:n.definition.formatter&&u.table.modules.edit.editors[n.definition.formatter]?(f=u.table.modules.edit.editors[n.definition.formatter],n.definition.formatter!=="tick"&&n.definition.formatter!=="tickCross"||n.definition.headerFilterEmptyCheck||(n.modules.filter.emptyFunc=function(n){return n!==!0&&n!==!1})):f=u.table.modules.edit.editors.input}if(f){if(v={getValue:function(){return typeof t!="undefined"?t:""},getField:function(){return n.definition.field},getElement:function(){return o},getColumn:function(){return n.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},e=n.definition.headerFilterParams||{},e=typeof e=="function"?e.call(u.table):e,r=f.call(this.table.modules.edit,v,function(){},l,y,e),!r){console.warn("Filter Error - Cannot add filter to "+h+" column, editor returned a value of false");return}if(!(r instanceof Node)){console.warn("Filter Error - Cannot add filter to "+h+" column, editor should return an instance of Node, the editor returned:",r);return}h?u.table.modules.localize.bind("headerFilters|columns|"+n.definition.field,function(n){r.setAttribute("placeholder",typeof n!="undefined"&&n?n:u.table.modules.localize.getText("headerFilters|default"))}):u.table.modules.localize.bind("headerFilters|default",function(n){r.setAttribute("placeholder",typeof u.column.definition.headerFilterPlaceholder!="undefined"&&u.column.definition.headerFilterPlaceholder?u.column.definition.headerFilterPlaceholder:n)});r.addEventListener("click",function(n){n.stopPropagation();r.focus()});r.addEventListener("focus",function(){var n=s.table.columnManager.element.scrollLeft;n!==s.table.rowManager.element.scrollLeft&&(s.table.rowManager.scrollHorizontal(n),s.table.columnManager.scrollHorizontal(n))});c=!1;a=function(){c&&clearTimeout(c);c=setTimeout(function(){l(r.value)},u.table.options.headerFilterLiveFilterDelay)};n.modules.filter.headerElement=r;n.modules.filter.attrType=r.hasAttribute("type")?r.getAttribute("type").toLowerCase():"";n.modules.filter.tagType=r.tagName.toLowerCase();n.definition.headerFilterLiveFilter!==!1&&(n.definition.headerFilter==="autocomplete"||n.definition.headerFilter==="tickCross"||(n.definition.editor==="autocomplete"||n.definition.editor==="tickCross")&&n.definition.headerFilter===!0||(r.addEventListener("keyup",a),r.addEventListener("search",a),n.modules.filter.attrType=="number"&&r.addEventListener("change",function(){l(r.value)}),n.modules.filter.attrType=="text"&&this.table.browser!=="ie"&&r.setAttribute("type","search")),(n.modules.filter.tagType=="input"||n.modules.filter.tagType=="select"||n.modules.filter.tagType=="textarea")&&r.addEventListener("mousedown",function(n){n.stopPropagation()}));o.appendChild(r);n.contentElement.appendChild(o);i||u.headerFilterColumns.push(n)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",n.definition.title)},y.prototype.hideHeaderFilterElements=function(){this.headerFilterColumns.forEach(function(n){n.modules.filter&&n.modules.filter.headerElement&&(n.modules.filter.headerElement.style.display="none")})},y.prototype.showHeaderFilterElements=function(){this.headerFilterColumns.forEach(function(n){n.modules.filter&&n.modules.filter.headerElement&&(n.modules.filter.headerElement.style.display="")})},y.prototype.setHeaderFilterFocus=function(n){n.modules.filter&&n.modules.filter.headerElement?n.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",n.getField())},y.prototype.getHeaderFilterValue=function(n){if(n.modules.filter&&n.modules.filter.headerElement)return n.modules.filter.headerElement.value;console.warn("Column Filter Error - No header filter set on column:",n.getField())},y.prototype.setHeaderFilterValue=function(n,t){n&&(n.modules.filter&&n.modules.filter.headerElement?(this.generateHeaderFilterElement(n,t,!0),n.modules.filter.success(t)):console.warn("Column Filter Error - No header filter set on column:",n.getField()))},y.prototype.reloadHeaderFilter=function(n){n&&(n.modules.filter&&n.modules.filter.headerElement?this.generateHeaderFilterElement(n,n.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",n.getField()))},y.prototype.hasChanged=function(){var n=this.changed;return this.changed=!1,n},y.prototype.setFilter=function(n,t,i,r){var u=this;u.filterList=[];Array.isArray(n)||(n=[{field:n,type:t,value:i,params:r}]);u.addFilter(n)},y.prototype.addFilter=function(n,t,i,r){var u=this;Array.isArray(n)||(n=[{field:n,type:t,value:i,params:r}]);n.forEach(function(n){n=u.findFilter(n);n&&(u.filterList.push(n),u.changed=!0)});this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter&&this.table.modules.persistence.save("filter")},y.prototype.findFilter=function(n){var t=this,r,i;return Array.isArray(n)?this.findSubFilters(n):(i=!1,typeof n.field=="function"?i=function(t){return n.field(t,n.type||{})}:t.filters[n.type]?(r=t.table.columnManager.getColumnByField(n.field),i=r?function(i){return t.filters[n.type](n.value,r.getFieldValue(i),i,n.params||{})}:function(i){return t.filters[n.type](n.value,i[n.field],i,n.params||{})}):console.warn("Filter Error - No such filter type found, ignoring: ",n.type),n.func=i,n.func?n:!1)},y.prototype.findSubFilters=function(n){var i=this,t=[];return n.forEach(function(n){n=i.findFilter(n);n&&t.push(n)}),t.length?t:!1},y.prototype.getFilters=function(n,t){var i=[];return n&&(i=this.getHeaderFilters()),t&&i.forEach(function(n){typeof n.type=="function"&&(n.type="function")}),i.concat(this.filtersToArray(this.filterList,t))},y.prototype.filtersToArray=function(n,t){var r=this,i=[];return n.forEach(function(n){var u;Array.isArray(n)?i.push(r.filtersToArray(n,t)):(u={field:n.field,type:n.type,value:n.value},t&&typeof u.type=="function"&&(u.type="function"),i.push(u))}),i},y.prototype.getHeaderFilters=function(){var i=this,t=[];for(var n in this.headerFilters)t.push({field:n,type:this.headerFilters[n].type,value:this.headerFilters[n].value});return t},y.prototype.removeFilter=function(n,t,i){var r=this;Array.isArray(n)||(n=[{field:n,type:t,value:i}]);n.forEach(function(n){var t=-1;t=_typeof(n.field)=="object"?r.filterList.findIndex(function(t){return n===t}):r.filterList.findIndex(function(t){return n.field===t.field&&n.type===t.type&&n.value===t.value});t>-1?(r.filterList.splice(t,1),r.changed=!0):console.warn("Filter Error - No matching filter type found, ignoring: ",n.type)});this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter&&this.table.modules.persistence.save("filter")},y.prototype.clearFilter=function(n){this.filterList=[];n&&this.clearHeaderFilter();this.changed=!0;this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter&&this.table.modules.persistence.save("filter")},y.prototype.clearHeaderFilter=function(){var n=this;this.headerFilters={};n.prevHeaderFilterChangeCheck="{}";this.headerFilterColumns.forEach(function(t){t.modules.filter.value=null;t.modules.filter.prevSuccess=undefined;n.reloadHeaderFilter(t)});this.changed=!0},y.prototype.search=function(n,t,i,r){var u=this,f=[],e=[];return Array.isArray(t)||(t=[{field:t,type:i,value:r}]),t.forEach(function(n){n=u.findFilter(n);n&&e.push(n)}),this.table.rowManager.rows.forEach(function(t){var i=!0;e.forEach(function(n){u.filterRecurse(n,t.getData())||(i=!1)});i&&f.push(n==="data"?t.getData("data"):t.getComponent())}),f},y.prototype.filter=function(n){var t=this,i=[],r=[];return t.table.options.dataFiltering&&t.table.options.dataFiltering.call(t.table,t.getFilters()),!t.table.options.ajaxFiltering&&(t.filterList.length||Object.keys(t.headerFilters).length)?n.forEach(function(n){t.filterRow(n)&&i.push(n)}):i=n.slice(0),t.table.options.dataFiltered&&(i.forEach(function(n){r.push(n.getComponent())}),t.table.options.dataFiltered.call(t.table,t.getFilters(),r)),i},y.prototype.filterRow=function(n){var t=this,i=!0,r=n.getData(),u;t.filterList.forEach(function(n){t.filterRecurse(n,r)||(i=!1)});for(u in t.headerFilters)t.headerFilters[u].func(r)||(i=!1);return i},y.prototype.filterRecurse=function(n,t){var r=this,i=!1;return Array.isArray(n)?n.forEach(function(n){r.filterRecurse(n,t)&&(i=!0)}):i=n.func(t),i},y.prototype.filters={"=":function(n,t){return t==n?!0:!1},"<":function(n,t){return t<n?!0:!1},"<=":function(n,t){return t<=n?!0:!1},">":function(n,t){return t>n?!0:!1},">=":function(n,t){return t>=n?!0:!1},"!=":function(n,t){return t!=n?!0:!1},regex:function(n,t){return typeof n=="string"&&(n=new RegExp(n)),n.test(t)},like:function(n,t){return n===null||typeof n=="undefined"?t===n?!0:!1:typeof t!="undefined"&&t!==null?String(t).toLowerCase().indexOf(n.toLowerCase())>-1:!1},keywords:function(n,t,i,r){var f=n.toLowerCase().split(typeof r.separator=="undefined"?" ":r.separator),e=String(t===null||typeof t=="undefined"?"":t).toLowerCase(),u=[];return f.forEach(function(n){e.includes(n)&&u.push(!0)}),r.matchAll?u.length===f.length:!!u.length},starts:function(n,t){return n===null||typeof n=="undefined"?t===n?!0:!1:typeof t!="undefined"&&t!==null?String(t).toLowerCase().startsWith(n.toLowerCase()):!1},ends:function(n,t){return n===null||typeof n=="undefined"?t===n?!0:!1:typeof t!="undefined"&&t!==null?String(t).toLowerCase().endsWith(n.toLowerCase()):!1},"in":function(n,t){return Array.isArray(n)?n.length?n.indexOf(t)>-1:!0:(console.warn("Filter Error - filter value is not an array:",n),!1)}},n.prototype.registerModule("filter",y),at=function(n){this.table=n},at.prototype.initializeColumn=function(n){n.modules.format=this.lookupFormatter(n,"");typeof n.definition.formatterPrint!="undefined"&&(n.modules.format.print=this.lookupFormatter(n,"Print"));typeof n.definition.formatterClipboard!="undefined"&&(n.modules.format.clipboard=this.lookupFormatter(n,"Clipboard"));typeof n.definition.formatterHtmlOutput!="undefined"&&(n.modules.format.htmlOutput=this.lookupFormatter(n,"HtmlOutput"))},at.prototype.lookupFormatter=function(n,t){var r={params:n.definition["formatter"+t+"Params"]||{}},i=n.definition["formatter"+t];switch(typeof i=="undefined"?"undefined":_typeof(i)){case"string":i==="tick"&&(i="tickCross",typeof r.params.crossElement=="undefined"&&(r.params.crossElement=!1),console.warn("DEPRECATION WARNING - the tick formatter has been deprecated, please use the tickCross formatter with the crossElement param set to false"));this.formatters[i]?r.formatter=this.formatters[i]:(console.warn("Formatter Error - No such formatter found: ",i),r.formatter=this.formatters.plaintext);break;case"function":r.formatter=i;break;default:r.formatter=this.formatters.plaintext}return r},at.prototype.cellRendered=function(n){n.modules.format&&n.modules.format.renderedCallback&&!n.modules.format.rendered&&(n.modules.format.renderedCallback(),n.modules.format.rendered=!0)},at.prototype.formatValue=function(n){function r(t){n.modules.format||(n.modules.format={});n.modules.format.renderedCallback=t;n.modules.format.rendered=!1}var t=n.getComponent(),i=typeof n.column.modules.format.params=="function"?n.column.modules.format.params(t):n.column.modules.format.params;return n.column.modules.format.formatter.call(this,t,i,r)},at.prototype.formatExportValue=function(n,t){var i=n.column.modules.format[t],r,u;return i?(u=function(t){n.modules.format||(n.modules.format={});n.modules.format.renderedCallback=t;n.modules.format.rendered=!1},r=typeof i.params=="function"?i.params(component):i.params,i.formatter.call(this,n.getComponent(),r,u)):this.formatValue(n)},at.prototype.sanitizeHTML=function(n){if(n){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(n).replace(/[&<>"'`=\/]/g,function(n){return t[n]})}return n},at.prototype.emptyToSpace=function(n){return n===null||typeof n=="undefined"||n===""?"&nbsp;":n},at.prototype.getFormatter=function(n){var n;switch(typeof n=="undefined"?"undefined":_typeof(n)){case"string":this.formatters[n]?n=this.formatters[n]:(console.warn("Formatter Error - No such formatter found: ",n),n=this.formatters.plaintext);break;case"function":n=n;break;default:n=this.formatters.plaintext}return n},at.prototype.formatters={plaintext:function(n){return this.emptyToSpace(this.sanitizeHTML(n.getValue()))},html:function(n){return n.getValue()},textarea:function(n){return n.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(n.getValue()))},money:function(n,t){var u=parseFloat(n.getValue()),i,r,f,e,h=t.decimal||".",c=t.thousand||",",o=t.symbol||"",l=!!t.symbolAfter,s=typeof t.precision!="undefined"?t.precision:2;if(isNaN(u))return this.emptyToSpace(this.sanitizeHTML(n.getValue()));for(i=s!==!1?u.toFixed(s):u,i=String(i).split("."),r=i[0],f=i.length>1?h+i[1]:"",e=/(\d+)(\d{3})/;e.test(r);)r=r.replace(e,"$1"+c+"$2");return l?r+f+o:o+r+f},link:function(n,t){var r=n.getValue(),o=t.urlPrefix||"",i=t.download,u=r,f=document.createElement("a"),e;if(t.labelField&&(e=n.getData(),u=e[t.labelField]),t.label)switch(_typeof(t.label)){case"string":u=t.label;break;case"function":u=t.label(n)}if(u){if(t.urlField&&(e=n.getData(),r=e[t.urlField]),t.url)switch(_typeof(t.url)){case"string":r=t.url;break;case"function":r=t.url(n)}return f.setAttribute("href",o+r),t.target&&f.setAttribute("target",t.target),t.download&&(i=typeof i=="function"?i(n):i===!0?"":i,f.setAttribute("download",i)),f.innerHTML=this.emptyToSpace(this.sanitizeHTML(u)),f}return"&nbsp;"},image:function(n,t){var i=document.createElement("img"),r=n.getValue();t.urlPrefix&&(r=t.urlPrefix+n.getValue());t.urlSuffix&&(r=r+t.urlSuffix);i.setAttribute("src",r);switch(_typeof(t.height)){case"number":i.style.height=t.height+"px";break;case"string":i.style.height=t.height}switch(_typeof(t.width)){case"number":i.style.width=t.width+"px";break;case"string":i.style.width=t.width}return i.addEventListener("load",function(){n.getRow().normalizeHeight()}),i},tickCross:function(n,t){var i=n.getValue(),r=n.getElement(),u=t.allowEmpty,f=t.allowTruthy,e=typeof t.tickElement!="undefined"?t.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/><\/svg>',o=typeof t.crossElement!="undefined"?t.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/><\/svg>';return f&&i||i===!0||i==="true"||i==="True"||i===1||i==="1"?(r.setAttribute("aria-checked",!0),e||""):u&&(i==="null"||i===""||i===null||typeof i=="undefined")?(r.setAttribute("aria-checked","mixed"),""):(r.setAttribute("aria-checked",!1),o||"")},datetime:function(n,t){var e=t.inputFormat||"YYYY-MM-DD hh:mm:ss",f=t.outputFormat||"DD/MM/YYYY hh:mm:ss",i=typeof t.invalidPlaceholder!="undefined"?t.invalidPlaceholder:"",r=n.getValue(),u=moment(r,e);return u.isValid()?t.timezone?u.tz(t.timezone).format(f):u.format(f):i===!0?r:typeof i=="function"?i(r):i},datetimediff:function(n,t){var o=t.inputFormat||"YYYY-MM-DD hh:mm:ss",i=typeof t.invalidPlaceholder!="undefined"?t.invalidPlaceholder:"",r=typeof t.suffix!="undefined"?t.suffix:!1,s=typeof t.unit!="undefined"?t.unit:undefined,h=typeof t.humanize!="undefined"?t.humanize:!1,e=typeof t.date!="undefined"?t.date:moment(),u=n.getValue(),f=moment(u,o);return f.isValid()?h?moment.duration(f.diff(e)).humanize(r):f.diff(e,s)+(r?" "+r:""):i===!0?u:typeof i=="function"?i(u):i},lookup:function(n,t){var i=n.getValue();return typeof t[i]=="undefined"?(console.warn("Missing display value for "+i),i):t[i]},star:function(n,t){var i=n.getValue(),u=n.getElement(),s=t&&t.stars?t.stars:5,e=document.createElement("span"),r=document.createElementNS("http://www.w3.org/2000/svg","svg"),f,o;for(e.style.verticalAlign="middle",r.setAttribute("width","14"),r.setAttribute("height","14"),r.setAttribute("viewBox","0 0 512 512"),r.setAttribute("xml:space","preserve"),r.style.padding="0 1px",i=i&&!isNaN(i)?parseInt(i):0,i=Math.max(0,Math.min(i,s)),f=1;f<=s;f++)o=r.cloneNode(!0),o.innerHTML=f<=i?'<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>':'<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',e.appendChild(o);return u.style.whiteSpace="nowrap",u.style.overflow="hidden",u.style.textOverflow="ellipsis",u.setAttribute("aria-label",i),e},traffic:function(n,t){var f=this.sanitizeHTML(n.getValue())||0,s=document.createElement("span"),h=t&&t.max?t.max:100,e=t&&t.min?t.min:0,i=t&&typeof t.color!="undefined"?t.color:["red","orange","green"],o="#666666",c,r,l,u;if(!isNaN(f)&&typeof n.getValue()!="undefined"){s.classList.add("tabulator-traffic-light");r=parseFloat(f)<=h?parseFloat(f):h;r=parseFloat(r)>=e?parseFloat(r):e;c=(h-e)/100;r=Math.round((r-e)/c);switch(typeof i=="undefined"?"undefined":_typeof(i)){case"string":o=i;break;case"function":o=i(f);break;case"object":if(Array.isArray(i)){l=100/i.length;u=Math.floor(r/l);u=Math.min(u,i.length-1);u=Math.max(u,0);o=i[u];break}}return s.style.backgroundColor=o,s}},progress:function(n,t,i){var h=this.sanitizeHTML(n.getValue())||0,o=n.getElement(),v=t&&t.max?t.max:100,c=t&&t.min?t.min:0,b=t&&t.legendAlign?t.legendAlign:"center",w,u,l,s,a,y,r,f,e;u=parseFloat(h)<=v?parseFloat(h):v;u=parseFloat(u)>=c?parseFloat(u):c;w=(v-c)/100;u=Math.round((u-c)/w);switch(_typeof(t.color)){case"string":l=t.color;break;case"function":l=t.color(h);break;case"object":if(Array.isArray(t.color)){y=100/t.color.length;r=Math.floor(u/y);r=Math.min(r,t.color.length-1);r=Math.max(r,0);l=t.color[r];break}default:l="#2DC214"}switch(_typeof(t.legend)){case"string":s=t.legend;break;case"function":s=t.legend(h);break;case"boolean":s=h;break;default:s=!1}switch(_typeof(t.legendColor)){case"string":a=t.legendColor;break;case"function":a=t.legendColor(h);break;case"object":Array.isArray(t.legendColor)&&(y=100/t.legendColor.length,r=Math.floor(u/y),r=Math.min(r,t.legendColor.length-1),r=Math.max(r,0),a=t.legendColor[r]);break;default:a="#000"}return o.style.minWidth="30px",o.style.position="relative",o.setAttribute("aria-label",u),f=document.createElement("div"),f.style.display="inline-block",f.style.position="relative",f.style.width=u+"%",f.style.backgroundColor=l,f.style.height="100%",f.setAttribute("data-max",v),f.setAttribute("data-min",c),s&&(e=document.createElement("div"),e.style.position="absolute",e.style.top="4px",e.style.left=0,e.style.textAlign=b,e.style.width="100%",e.style.color=a,e.innerHTML=s),i(function(){if(!(n instanceof p)){var t=document.createElement("div");t.style.position="absolute";t.style.top="4px";t.style.bottom="4px";t.style.left="4px";t.style.right="4px";o.appendChild(t);o=t}o.appendChild(f);s&&o.appendChild(e)}),""},color:function(n){return n.getElement().style.backgroundColor=this.sanitizeHTML(n.getValue()),""},buttonTick:function(){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/><\/svg>'},buttonCross:function(){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/><\/svg>'},rownum:function(n){return this.table.rowManager.activeRows.indexOf(n.getRow()._getSelf())+1},handle:function(n){return n.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'><\/div><div class='tabulator-row-handle-bar'><\/div><div class='tabulator-row-handle-bar'><\/div><\/div>"},responsiveCollapse:function(n){function r(n){var r=i.element;i.open=n;r&&(i.open?(t.classList.add("open"),r.style.display=""):(t.classList.remove("open"),r.style.display="none"))}var u=this,t=document.createElement("div"),i=n.getRow()._row.modules.responsiveLayout;return t.classList.add("tabulator-responsive-collapse-toggle"),t.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+<\/span><span class='tabulator-responsive-collapse-toggle-close'>-<\/span>",n.getElement().classList.add("tabulator-row-handle"),t.addEventListener("click",function(n){n.stopImmediatePropagation();r(!i.open)}),r(i.open),t},rowSelection:function(n,t){var u=this,i=document.createElement("input"),r;return i.type="checkbox",this.table.modExists("selectRow",!0)&&(i.addEventListener("click",function(n){n.stopPropagation()}),typeof n.getRow=="function"?(r=n.getRow(),r instanceof h?(i.addEventListener("change",function(){r.toggleSelect()}),i.checked=r.isSelected&&r.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(r,i)):i=""):(i.addEventListener("change",function(){u.table.modules.selectRow.selectedRows.length?u.table.deselectRow():u.table.selectRow(t.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(i))),i}},n.prototype.registerModule("format",at),ot=function(n){this.table=n;this.leftColumns=[];this.rightColumns=[];this.leftMargin=0;this.rightMargin=0;this.rightPadding=0;this.initializationMode="left";this.active=!1;this.scrollEndTimer=!1},ot.prototype.reset=function(){this.initializationMode="left";this.leftColumns=[];this.rightColumns=[];this.leftMargin=0;this.rightMargin=0;this.rightMargin=0;this.active=!1;this.table.columnManager.headersElement.style.marginLeft=0;this.table.columnManager.element.style.paddingRight=0},ot.prototype.initializeColumn=function(n){var t={margin:0,edge:!1};n.isGroup||(this.frozenCheck(n)?(t.position=this.initializationMode,this.initializationMode=="left"?this.leftColumns.push(n):this.rightColumns.unshift(n),this.active=!0,n.modules.frozen=t):this.initializationMode="right")},ot.prototype.frozenCheck=function(n){return n.parent.isGroup&&n.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),n.parent.isGroup?this.frozenCheck(n.parent):n.definition.frozen},ot.prototype.scrollHorizontal=function(){var n=this,t;this.active&&(clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout(function(){n.layout()},100),t=this.table.rowManager.getVisibleRows(),this.calcMargins(),this.layoutColumnPosition(),this.layoutCalcRows(),t.forEach(function(t){t.type==="row"&&n.layoutRow(t)}),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)},ot.prototype.calcMargins=function(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px";this.table.columnManager.headersElement.style.marginLeft=this.leftMargin;this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px";this.table.columnManager.element.style.paddingRight=this.rightMargin;this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft},ot.prototype.layoutCalcRows=function(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow))},ot.prototype.layoutColumnPosition=function(n){var t=this,i=[];this.leftColumns.forEach(function(r,u){if(r.modules.frozen.margin=t._calcSpace(t.leftColumns,u)+t.table.columnManager.scrollLeft+"px",r.modules.frozen.edge=u==t.leftColumns.length-1?!0:!1,r.parent.isGroup){var f=t.getColGroupParentElement(r);i.includes(f)||(t.layoutElement(f,r),i.push(f));r.modules.frozen.edge&&f.classList.add("tabulator-frozen-"+r.modules.frozen.position)}else t.layoutElement(r.getElement(),r);n&&r.cells.forEach(function(n){t.layoutElement(n.getElement(!0),r)})});this.rightColumns.forEach(function(i,r){i.modules.frozen.margin=t.rightPadding-t._calcSpace(t.rightColumns,r+1)+"px";i.modules.frozen.edge=r==t.rightColumns.length-1?!0:!1;i.parent.isGroup?t.layoutElement(t.getColGroupParentElement(i),i):t.layoutElement(i.getElement(),i);n&&i.cells.forEach(function(n){t.layoutElement(n.getElement(!0),i)})})},ot.prototype.getColGroupParentElement=function(n){return n.parent.isGroup?this.getColGroupParentElement(n.parent):n.getElement()},ot.prototype.layout=function(){var n=this;n.active&&(this.calcMargins(),n.table.rowManager.getDisplayRows().forEach(function(t){t.type==="row"&&n.layoutRow(t)}),this.layoutCalcRows(),this.layoutColumnPosition(!0),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)},ot.prototype.layoutRow=function(n){var t=this,i=n.getElement();i.style.paddingLeft=this.leftMargin;this.leftColumns.forEach(function(i){var r=n.getCell(i);r&&t.layoutElement(r.getElement(!0),i)});this.rightColumns.forEach(function(i){var r=n.getCell(i);r&&t.layoutElement(r.getElement(!0),i)})},ot.prototype.layoutElement=function(n,t){t.modules.frozen&&(n.style.position="absolute",n.style.left=t.modules.frozen.margin,n.classList.add("tabulator-frozen"),t.modules.frozen.edge&&n.classList.add("tabulator-frozen-"+t.modules.frozen.position))},ot.prototype._calcSpace=function(n,t){for(var r=0,i=0;i<t;i++)n[i].visible&&(r+=n[i].getWidth());return r},n.prototype.registerModule("frozenColumns",ot),vt=function(n){this.table=n;this.topElement=document.createElement("div");this.rows=[];this.displayIndex=0},vt.prototype.initialize=function(){this.rows=[];this.topElement.classList.add("tabulator-frozen-rows-holder");this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling)},vt.prototype.setDisplayIndex=function(n){this.displayIndex=n},vt.prototype.getDisplayIndex=function(){return this.displayIndex},vt.prototype.isFrozen=function(){return!!this.rows.length},vt.prototype.getRows=function(n){var i=this,t=n.slice(0);return this.rows.forEach(function(n){var i=t.indexOf(n);i>-1&&t.splice(i,1)}),t},vt.prototype.freezeRow=function(n){n.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(n.modules.frozen=!0,this.topElement.appendChild(n.getElement()),n.initialize(),n.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(n),this.table.rowManager.refreshActiveData("display"),this.styleRows())},vt.prototype.unfreezeRow=function(n){var t=this.rows.indexOf(n);n.modules.frozen?(n.modules.frozen=!1,this.detachRow(n),this.table.rowManager.adjustTableSize(),this.table.rowManager.refreshActiveData("display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")},vt.prototype.detachRow=function(n){var i=this.rows.indexOf(n),t;i>-1&&(t=n.getElement(),t.parentNode.removeChild(t),this.rows.splice(i,1))},vt.prototype.styleRows=function(){var n=this;this.rows.forEach(function(t,i){n.table.rowManager.styleRow(t,i)})},n.prototype.registerModule("frozenRows",vt),ut=function(n){this._group=n;this.type="GroupComponent"},ut.prototype.getKey=function(){return this._group.key},ut.prototype.getField=function(){return this._group.field},ut.prototype.getElement=function(){return this._group.element},ut.prototype.getRows=function(){return this._group.getRows(!0)},ut.prototype.getSubGroups=function(){return this._group.getSubGroups(!0)},ut.prototype.getParentGroup=function(){return this._group.parent?this._group.parent.getComponent():!1},ut.prototype.getVisibility=function(){return console.warn("getVisibility function is deprecated, you should now use the isVisible function"),this._group.visible},ut.prototype.isVisible=function(){return this._group.visible},ut.prototype.show=function(){this._group.show()},ut.prototype.hide=function(){this._group.hide()},ut.prototype.toggle=function(){this._group.toggleVisibility()},ut.prototype._getSelf=function(){return this._group},ut.prototype.getTable=function(){return this._group.groupManager.table},f=function(n,t,i,r,u,f,e){this.groupManager=n;this.parent=t;this.key=r;this.level=i;this.field=u;this.hasSubGroups=i<n.groupIDLookups.length-1;this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow;this.type="group";this.old=e;this.rows=[];this.groups=[];this.groupList=[];this.generator=f;this.elementContents=!1;this.height=0;this.outerHeight=0;this.initialized=!1;this.calcs={};this.initialized=!1;this.modules={};this.arrowElement=!1;this.visible=e?e.visible:typeof n.startOpen[i]!="undefined"?n.startOpen[i]:n.startOpen[0];this.component=null;this.createElements();this.addBindings();this.createValueGroups()},f.prototype.wipe=function(){this.groupList.length?this.groupList.forEach(function(n){n.wipe()}):(this.element=!1,this.arrowElement=!1,this.elementContents=!1)},f.prototype.createElements=function(){var n=document.createElement("div");n.classList.add("tabulator-arrow");this.element=document.createElement("div");this.element.classList.add("tabulator-row");this.element.classList.add("tabulator-group");this.element.classList.add("tabulator-group-level-"+this.level);this.element.setAttribute("role","rowgroup");this.arrowElement=document.createElement("div");this.arrowElement.classList.add("tabulator-group-toggle");this.arrowElement.appendChild(n);this.groupManager.table.options.movableRows!==!1&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)},f.prototype.createValueGroups=function(){var t=this,n=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[n]&&this.groupManager.allowedValues[n].forEach(function(i){t._createGroup(i,n)})},f.prototype.addBindings=function(){var n=this,t,i,r,u;n.groupManager.table.options.groupClick&&n.element.addEventListener("click",function(t){n.groupManager.table.options.groupClick.call(n.groupManager.table,t,n.getComponent())});n.groupManager.table.options.groupDblClick&&n.element.addEventListener("dblclick",function(t){n.groupManager.table.options.groupDblClick.call(n.groupManager.table,t,n.getComponent())});n.groupManager.table.options.groupContext&&n.element.addEventListener("contextmenu",function(t){n.groupManager.table.options.groupContext.call(n.groupManager.table,t,n.getComponent())});(n.groupManager.table.options.groupContextMenu||n.groupManager.table.options.groupClickMenu)&&n.groupManager.table.modExists("menu")&&n.groupManager.table.modules.menu.initializeGroup.call(n.groupManager.table.modules.menu,n);n.groupManager.table.options.groupTap&&(r=!1,n.element.addEventListener("touchstart",function(){r=!0},{passive:!0}),n.element.addEventListener("touchend",function(t){r&&n.groupManager.table.options.groupTap(t,n.getComponent());r=!1}));n.groupManager.table.options.groupDblTap&&(t=null,n.element.addEventListener("touchend",function(i){t?(clearTimeout(t),t=null,n.groupManager.table.options.groupDblTap(i,n.getComponent())):t=setTimeout(function(){clearTimeout(t);t=null},300)}));n.groupManager.table.options.groupTapHold&&(i=null,n.element.addEventListener("touchstart",function(t){clearTimeout(i);i=setTimeout(function(){clearTimeout(i);i=null;r=!1;n.groupManager.table.options.groupTapHold(t,n.getComponent())},1e3)},{passive:!0}),n.element.addEventListener("touchend",function(){clearTimeout(i);i=null}));n.groupManager.table.options.groupToggleElement&&(u=n.groupManager.table.options.groupToggleElement=="arrow"?n.arrowElement:n.element,u.addEventListener("click",function(t){t.stopPropagation();t.stopImmediatePropagation();n.toggleVisibility()}))},f.prototype._createGroup=function(n,t){var i=t+"_"+n,r=new f(this.groupManager,this,t,n,this.groupManager.groupIDLookups[t].field,this.groupManager.headerGenerator[t]||this.groupManager.headerGenerator[0],this.old?this.old.groups[i]:!1);this.groups[i]=r;this.groupList.push(r)},f.prototype._addRowToGroup=function(n){var i=this.level+1,r,t;this.hasSubGroups&&(r=this.groupManager.groupIDLookups[i].func(n.getData()),t=i+"_"+r,this.groupManager.allowedValues&&this.groupManager.allowedValues[i]?this.groups[t]&&this.groups[t].addRow(n):(this.groups[t]||this._createGroup(r,i),this.groups[t].addRow(n)))},f.prototype._addRow=function(n){this.rows.push(n);n.modules.group=this},f.prototype.insertRow=function(n,t,i){var u=this.conformRowData({}),r;n.updateData(u);r=this.rows.indexOf(t);r>-1?i?this.rows.splice(r+1,0,n):this.rows.splice(r,0,n):i?this.rows.push(n):this.rows.unshift(n);n.modules.group=this;this.generateGroupHeaderContents();this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modules.columnCalcs.recalcGroup(this);this.groupManager.updateGroupRows(!0)},f.prototype.scrollHeader=function(n){this.arrowElement.style.marginLeft=n;this.groupList.forEach(function(t){t.scrollHeader(n)})},f.prototype.getRowIndex=function(){},f.prototype.conformRowData=function(n){return this.field?n[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(n=this.parent.conformRowData(n)),n},f.prototype.removeRow=function(n){var i=this.rows.indexOf(n),t=n.getElement();i>-1&&this.rows.splice(i,1);this.groupManager.table.options.groupValues||this.rows.length?(t.parentNode&&t.parentNode.removeChild(t),this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))},f.prototype.removeGroup=function(n){var i=n.level+"_"+n.key,t;this.groups[i]&&(delete this.groups[i],t=this.groupList.indexOf(n),t>-1&&this.groupList.splice(t,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))},f.prototype.getHeadersAndRows=function(n){var t=[];return t.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach(function(i){t=t.concat(i.getHeadersAndRows(n))}):(!n&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),t.push(this.calcs.top)),t=t.concat(this.rows),!n&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),t.push(this.calcs.bottom))):this.groupList.length||this.groupManager.table.options.columnCalcs=="table"||this.groupManager.table.modExists("columnCalcs")&&(!n&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),t.push(this.calcs.top))),!n&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),t.push(this.calcs.bottom)))),t},f.prototype.getData=function(n,t){var r=this,i=[];return this._visSet(),(!n||n&&this.visible)&&this.rows.forEach(function(n){i.push(n.getData(t||"data"))}),i},f.prototype.getRowCount=function(){var n=0;return this.groupList.length?this.groupList.forEach(function(t){n+=t.getRowCount()}):n=this.rows.length,n},f.prototype.toggleVisibility=function(){this.visible?this.hide():this.show()},f.prototype.hide=function(){this.visible=!1;this.groupManager.table.rowManager.getRenderMode()!="classic"||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(function(n){var t=n.getHeadersAndRows();t.forEach(function(n){n.detachElement()})}):this.rows.forEach(function(n){var t=n.getElement();t.parentNode.removeChild(t)}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth());this.groupManager.table.options.groupVisibilityChanged.call(this.table,this.getComponent(),!1)},f.prototype.show=function(){var t=this,n;t.visible=!0;this.groupManager.table.rowManager.getRenderMode()!="classic"||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.add("tabulator-group-visible"),n=t.getElement(),this.groupList.length?this.groupList.forEach(function(t){var i=t.getHeadersAndRows();i.forEach(function(t){var i=t.getElement();n.parentNode.insertBefore(i,n.nextSibling);t.initialize();n=i})}):t.rows.forEach(function(t){var i=t.getElement();n.parentNode.insertBefore(i,n.nextSibling);t.initialize();n=i}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth());this.groupManager.table.options.groupVisibilityChanged.call(this.table,this.getComponent(),!0)},f.prototype._visSet=function(){var n=[];typeof this.visible=="function"&&(this.rows.forEach(function(t){n.push(t.getData())}),this.visible=this.visible(this.key,this.getRowCount(),n,this.getComponent()))},f.prototype.getRowGroup=function(n){var t=!1;return this.groupList.length?this.groupList.forEach(function(i){var r=i.getRowGroup(n);r&&(t=r)}):this.rows.find(function(t){return t===n})&&(t=this),t},f.prototype.getSubGroups=function(n){var t=[];return this.groupList.forEach(function(i){t.push(n?i.getComponent():i)}),t},f.prototype.getRows=function(n){var t=[];return this.rows.forEach(function(i){t.push(n?i.getComponent():i)}),t},f.prototype.generateGroupHeaderContents=function(){var n=[];for(this.rows.forEach(function(t){n.push(t.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),n,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);typeof this.elementContents=="string"?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents);this.element.insertBefore(this.arrowElement,this.element.firstChild)},f.prototype.getPath=function(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return n.unshift(this.key),this.parent&&this.parent.getPath(n),n},f.prototype.getElement=function(){this.addBindingsd=!1;this._visSet();this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var n=0;n<this.element.childNodes.length;++n)this.element.childNodes[n].parentNode.removeChild(this.element.childNodes[n]);return this.generateGroupHeaderContents(),this.element},f.prototype.detachElement=function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)},f.prototype.normalizeHeight=function(){this.setHeight(this.element.clientHeight)},f.prototype.initialize=function(n){(!this.initialized||n)&&(this.normalizeHeight(),this.initialized=!0)},f.prototype.reinitialize=function(){this.initialized=!1;this.height=0;n.prototype.helpers.elVisible(this.element)&&this.initialize(!0)},f.prototype.setHeight=function(n){this.height!=n&&(this.height=n,this.outerHeight=this.element.offsetHeight)},f.prototype.getHeight=function(){return this.outerHeight},f.prototype.getGroup=function(){return this},f.prototype.reinitializeHeight=function(){},f.prototype.calcHeight=function(){},f.prototype.setCellHeight=function(){},f.prototype.clearCellHeight=function(){},f.prototype.getComponent=function(){return this.component||(this.component=new ut(this)),this.component},k=function(n){this.table=n;this.groupIDLookups=!1;this.startOpen=[function(){return!1}];this.headerGenerator=[function(){return""}];this.groupList=[];this.allowedValues=!1;this.groups={};this.displayIndex=0},k.prototype.initialize=function(){var n=this,t=n.table.options.groupBy,i=n.table.options.groupStartOpen,r=n.table.options.groupHeader,u;this.allowedValues=n.table.options.groupValues;Array.isArray(t)&&Array.isArray(r)&&t.length>r.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array");n.headerGenerator=[function(){return""}];this.startOpen=[function(){return!1}];n.table.modules.localize.bind("groups|item",function(t,i){n.headerGenerator[0]=function(n,r){return(typeof n=="undefined"?"":n)+"<span>("+r+" "+(r===1?t:i.groups.items)+")<\/span>"}});this.groupIDLookups=[];Array.isArray(t)||t?this.table.modExists("columnCalcs")&&this.table.options.columnCalcs!="table"&&this.table.options.columnCalcs!="both"&&this.table.modules.columnCalcs.removeCalcs():this.table.modExists("columnCalcs")&&this.table.options.columnCalcs!="group"&&(u=this.table.columnManager.getRealColumns(),u.forEach(function(t){t.definition.topCalc&&n.table.modules.columnCalcs.initializeTopRow();t.definition.bottomCalc&&n.table.modules.columnCalcs.initializeBottomRow()}));Array.isArray(t)||(t=[t]);t.forEach(function(t,i){var r,u;typeof t=="function"?r=t:(u=n.table.columnManager.getColumnByField(t),r=u?function(n){return u.getFieldValue(n)}:function(n){return n[t]});n.groupIDLookups.push({field:typeof t=="function"?!1:t,func:r,values:n.allowedValues?n.allowedValues[i]:!1})});i&&(Array.isArray(i)||(i=[i]),i.forEach(function(n){n=typeof n=="function"?n:function(){return!0}}),n.startOpen=i);r&&(n.headerGenerator=Array.isArray(r)?r:[r]);this.initialized=!0},k.prototype.setDisplayIndex=function(n){this.displayIndex=n},k.prototype.getDisplayIndex=function(){return this.displayIndex},k.prototype.getRows=function(n){return this.groupIDLookups.length?(this.table.options.dataGrouping.call(this.table),this.generateGroups(n),this.table.options.dataGrouped&&this.table.options.dataGrouped.call(this.table,this.getGroups(!0)),this.updateGroupRows()):n.slice(0)},k.prototype.getGroups=function(n){var t=[];return this.groupList.forEach(function(i){t.push(n?i.getComponent():i)}),t},k.prototype.getChildGroups=function(n){var i=this,t=[];return n||(n=this),n.groupList.forEach(function(n){n.groupList.length?t=t.concat(i.getChildGroups(n)):t.push(n)}),t},k.prototype.wipe=function(){this.groupList.forEach(function(n){n.wipe()})},k.prototype.pullGroupListData=function(n){var i=this,t=[];return n.forEach(function(n){var r={},u;r.level=0;r.rowCount=0;r.headerContent="";u=[];n.hasSubGroups?(u=i.pullGroupListData(n.groupList),r.level=n.level,r.rowCount=u.length-n.groupList.length,r.headerContent=n.generator(n.key,r.rowCount,n.rows,n),t.push(r),t=t.concat(u)):(r.level=n.level,r.headerContent=n.generator(n.key,n.rows.length,n.rows,n),r.rowCount=n.getRows().length,t.push(r),n.getRows().forEach(function(n){t.push(n.getData("data"))}))}),t},k.prototype.getGroupedData=function(){return this.pullGroupListData(this.groupList)},k.prototype.getRowGroup=function(n){var t=!1;return this.groupList.forEach(function(i){var r=i.getRowGroup(n);r&&(t=r)}),t},k.prototype.countGroups=function(){return this.groupList.length},k.prototype.generateGroups=function(n){var t=this,i=t.groups;t.groups={};t.groupList=[];this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(function(n){t.createGroup(n,0,i)}),n.forEach(function(n){t.assignRowToExistingGroup(n,i)})):n.forEach(function(n){t.assignRowToGroup(n,i)})},k.prototype.createGroup=function(n,t,i){var u=t+"_"+n,r;i=i||[];r=new f(this,!1,t,n,this.groupIDLookups[0].field,this.headerGenerator[0],i[u]);this.groups[u]=r;this.groupList.push(r)},k.prototype.assignRowToExistingGroup=function(n){var i=this.groupIDLookups[0].func(n.getData()),t="0_"+i;this.groups[t]&&this.groups[t].addRow(n)},k.prototype.assignRowToGroup=function(n,t){var i=this.groupIDLookups[0].func(n.getData()),r=!this.groups["0_"+i];return r&&this.createGroup(i,0,t),this.groups["0_"+i].addRow(n),!r},k.prototype.reassignRowToGroup=function(n){var t=n.getGroup(),i=t.getPath(),r=this.getExpectedPath(n),u=!0,u=i.length==r.length&&i.every(function(n,t){return n===r[t]});u||(t.removeRow(n),this.assignRowToGroup(n,self.groups),this.table.rowManager.refreshActiveData("group",!1,!0))},k.prototype.getExpectedPath=function(n){var t=[],i=n.getData();return this.groupIDLookups.forEach(function(n){t.push(n.func(i))}),t},k.prototype.updateGroupRows=function(n){var i=this,t=[],r;return i.groupList.forEach(function(n){t=t.concat(n.getHeadersAndRows())}),n&&(r=i.table.rowManager.setDisplayRows(t,this.getDisplayIndex()),r!==!0&&this.setDisplayIndex(r),i.table.rowManager.refreshActiveData("group",!0,!0)),t},k.prototype.scrollHeaders=function(n){this.table.options.virtualDomHoz&&(n-=this.table.vdomHoz.vDomPadLeft);n=n+"px";this.groupList.forEach(function(t){t.scrollHeader(n)})},k.prototype.removeGroup=function(n){var i=n.level+"_"+n.key,t;this.groups[i]&&(delete this.groups[i],t=this.groupList.indexOf(n),t>-1&&this.groupList.splice(t,1))},n.prototype.registerModule("groupRows",k),ct=function(n){this.table=n;this.history=[];this.index=-1},ct.prototype.clear=function(){this.history=[];this.index=-1},ct.prototype.action=function(n,t,i){this.history=this.history.slice(0,this.index+1);this.history.push({type:n,component:t,data:i});this.index++},ct.prototype.getHistoryUndoSize=function(){return this.index+1},ct.prototype.getHistoryRedoSize=function(){return this.history.length-(this.index+1)},ct.prototype.clearComponentHistory=function(n){var t=this.history.findIndex(function(t){return t.component===n});t>-1&&(this.history.splice(t,1),t<=this.index&&this.index--,this.clearComponentHistory(n))},ct.prototype.undo=function(){if(this.index>-1){var n=this.history[this.index];return this.undoers[n.type].call(this,n),this.index--,this.table.options.historyUndo.call(this.table,n.type,n.component.getComponent(),n.data),!0}return console.warn("History Undo Error - No more history to undo"),!1},ct.prototype.redo=function(){if(this.history.length-1>this.index){this.index++;var n=this.history[this.index];return this.redoers[n.type].call(this,n),this.table.options.historyRedo.call(this.table,n.type,n.component.getComponent(),n.data),!0}return console.warn("History Redo Error - No more history to redo"),!1},ct.prototype.undoers={cellEdit:function(n){n.component.setValueProcessData(n.data.oldValue)},rowAdd:function(n){n.component.deleteActual()},rowDelete:function(n){var t=this.table.rowManager.addRowActual(n.data.data,n.data.pos,n.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0);this._rebindRow(n.component,t)},rowMove:function(n){this.table.rowManager.moveRowActual(n.component,this.table.rowManager.rows[n.data.posFrom],!n.data.after);this.table.rowManager.redraw()}},ct.prototype.redoers={cellEdit:function(n){n.component.setValueProcessData(n.data.newValue)},rowAdd:function(n){var t=this.table.rowManager.addRowActual(n.data.data,n.data.pos,n.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0);this._rebindRow(n.component,t)},rowDelete:function(n){n.component.deleteActual()},rowMove:function(n){this.table.rowManager.moveRowActual(n.component,this.table.rowManager.rows[n.data.posTo],n.data.after);this.table.rowManager.redraw()}},ct.prototype._rebindRow=function(n,t){this.history.forEach(function(i){if(i.component instanceof u)i.component===n&&(i.component=t);else if(i.component instanceof s&&i.component.row===n){var r=i.component.column.getField();r&&(i.component=t.getCell(r))}})},n.prototype.registerModule("history",ct),gt=function(n){this.table=n;this.fieldIndex=[];this.hasIndex=!1},gt.prototype.parseTable=function(){var t=this,r=t.table.element,e=t.table.options,y=e.columns,s=r.getElementsByTagName("th"),i=r.getElementsByTagName("tbody")[0],c=[],u,a,o,f,n;for(t.hasIndex=!1,t.table.options.htmlImporting.call(this.table),i=i?i.getElementsByTagName("tr"):[],t._extractOptions(r,e),s.length?t._extractHeaders(s,i):t._generateBlankHeaders(s,i),u=0;u<i.length;u++){var v=i[u],l=v.getElementsByTagName("td"),h={};for(t.hasIndex||(h[e.index]=u),n=0;n<l.length;n++)a=l[n],typeof this.fieldIndex[n]!="undefined"&&(h[this.fieldIndex[n]]=a.innerHTML);c.push(h)}o=document.createElement("div");f=r.attributes;for(n in f)_typeof(f[n])=="object"&&o.setAttribute(f[n].name,f[n].value);r.parentNode.replaceChild(o,r);e.data=c;t.table.options.htmlImported.call(this.table);this.table.element=o},gt.prototype._extractOptions=function(n,t,i){var e=n.attributes,s=i?Object.assign([],i):Object.keys(t),u={},o,r,f;s.forEach(function(n){u[n.toLowerCase()]=n});for(o in e)r=e[o],r&&(typeof r=="undefined"?"undefined":_typeof(r))=="object"&&r.name&&r.name.indexOf("tabulator-")===0&&(f=r.name.replace("tabulator-",""),typeof u[f]!="undefined"&&(t[u[f]]=this._attribValue(r.value)))},gt.prototype._attribValue=function(n){return n==="true"?!0:n==="false"?!1:n},gt.prototype._findCol=function(n){var t=this.table.options.columns.find(function(t){return t.title===n});return t||!1},gt.prototype._extractHeaders=function(n){for(var u=0;u<n.length;u++){var i=n[u],e=!1,t=this._findCol(i.textContent),f,o;t?e=!0:t={title:i.textContent.trim()};t.field||(t.field=i.textContent.trim().toLowerCase().replace(" ","_"));f=i.getAttribute("width");f&&!t.width&&(t.width=f);o=i.attributes;this._extractOptions(i,t,r.prototype.defaultOptionList);this.fieldIndex[u]=t.field;t.field==this.table.options.index&&(this.hasIndex=!0);e||this.table.options.columns.push(t)}},gt.prototype._generateBlankHeaders=function(n){for(var u,i,r,t=0;t<n.length;t++)u=n[t],i={title:"",field:"col"+t},this.fieldIndex[t]=i.field,r=u.getAttribute("width"),r&&(i.width=r),this.table.options.columns.push(i)},n.prototype.registerModule("htmlTableImport",gt),pt=function(n){this.table=n;this.watchKeys=null;this.pressedKeys=null;this.keyupBinding=!1;this.keydownBinding=!1},pt.prototype.initialize=function(){var n=this.table.options.keybindings,t={},i,r;if(this.watchKeys={},this.pressedKeys=[],n!==!1){for(i in this.bindings)t[i]=this.bindings[i];if(Object.keys(n).length)for(r in n)t[r]=n[r];this.mapBindings(t);this.bindEvents()}},pt.prototype.mapBindings=function(n){var t=this,i=this,r=function(r){t.actions[r]?n[r]&&(_typeof(n[r])!=="object"&&(n[r]=[n[r]]),n[r].forEach(function(n){i.mapBinding(r,n)})):console.warn("Key Binding Error - no such action:",r)};for(var u in n)r(u)},pt.prototype.mapBinding=function(n,t){var r=this,i={action:this.actions[n],keys:[],ctrl:!1,shift:!1,meta:!1},u=t.toString().toLowerCase().split(" ").join("").split("+");u.forEach(function(n){switch(n){case"ctrl":i.ctrl=!0;break;case"shift":i.shift=!0;break;case"meta":i.meta=!0;break;default:n=parseInt(n);i.keys.push(n);r.watchKeys[n]||(r.watchKeys[n]=[]);r.watchKeys[n].push(i)}})},pt.prototype.bindEvents=function(){var n=this;this.keyupBinding=function(t){var i=t.keyCode,r=n.watchKeys[i];r&&(n.pressedKeys.push(i),r.forEach(function(i){n.checkBinding(t,i)}))};this.keydownBinding=function(t){var r=t.keyCode,u=n.watchKeys[r],i;u&&(i=n.pressedKeys.indexOf(r),i>-1&&n.pressedKeys.splice(i,1))};this.table.element.addEventListener("keydown",this.keyupBinding);this.table.element.addEventListener("keyup",this.keydownBinding)},pt.prototype.clearBindings=function(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding);this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)},pt.prototype.checkBinding=function(n,t){var i=this,r=!0;return n.ctrlKey==t.ctrl&&n.shiftKey==t.shift&&n.metaKey==t.meta?(t.keys.forEach(function(n){var t=i.pressedKeys.indexOf(n);t==-1&&(r=!1)}),r&&t.action.call(i,n),!0):!1},pt.prototype.bindings={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},pt.prototype.actions={keyBlock:function(n){n.stopPropagation();n.preventDefault()},scrollPageUp:function(n){var t=this.table.rowManager,i=t.scrollTop-t.height,r=t.element.scrollHeight;n.preventDefault();t.displayRowsCount&&(i>=0?t.element.scrollTop=i:t.scrollToRow(t.getDisplayRows()[0]));this.table.element.focus()},scrollPageDown:function(n){var t=this.table.rowManager,i=t.scrollTop+t.height,r=t.element.scrollHeight;n.preventDefault();t.displayRowsCount&&(i<=r?t.element.scrollTop=i:t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1]));this.table.element.focus()},scrollToStart:function(n){var t=this.table.rowManager;n.preventDefault();t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[0]);this.table.element.focus()},scrollToEnd:function(n){var t=this.table.rowManager;n.preventDefault();t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1]);this.table.element.focus()},navPrev:function(n){var t=!1;this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell,t&&(n.preventDefault(),t.nav().prev()))},navNext:function(n){var i=!1,t=this.table.options.tabEndNewRow,r;this.table.modExists("edit")&&(i=this.table.modules.edit.currentCell,i&&(n.preventDefault(),r=i.nav(),r.next()||t&&(i.getElement().firstChild.blur(),t=t===!0?this.table.addRow({}):typeof t=="function"?this.table.addRow(t(i.row.getComponent())):this.table.addRow(Object.assign({},t)),t.then(function(){setTimeout(function(){r.next()})}))))},navLeft:function(n){var t=!1;this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell,t&&(n.preventDefault(),t.nav().left()))},navRight:function(n){var t=!1;this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell,t&&(n.preventDefault(),t.nav().right()))},navUp:function(n){var t=!1;this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell,t&&(n.preventDefault(),t.nav().up()))},navDown:function(n){var t=!1;this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell,t&&(n.preventDefault(),t.nav().down()))},undo:function(n){var t=!1;this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell,t||(n.preventDefault(),this.table.modules.history.undo()))},redo:function(n){var t=!1;this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell,t||(n.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}},n.prototype.registerModule("keybindings",pt),ft=function(n){this.table=n;this.menuElements=[];this.blurEvent=this.hideMenu.bind(this);this.escEvent=this.escMenu.bind(this);this.nestedMenuBlock=!1;this.positionReversedX=!1},ft.prototype.initializeColumnHeader=function(n){var i=this,t;n.definition.headerContextMenu&&(n.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,n,n.definition.headerContextMenu)),this.tapHold(n,n.definition.headerContextMenu));n.definition.headerMenu&&(t=document.createElement("span"),t.classList.add("tabulator-header-menu-button"),t.innerHTML="&vellip;",t.addEventListener("click",function(t){t.stopPropagation();t.preventDefault();i.LoadMenuEvent(n,n.definition.headerMenu,t)}),n.titleElement.insertBefore(t,n.titleElement.firstChild))},ft.prototype.LoadMenuEvent=function(n,t,i){t=typeof t=="function"?t.call(this.table,n.getComponent(),i):t;this.loadMenu(i,n,t)},ft.prototype.tapHold=function(n,t){var f=this,u=n.getElement(),i=null,r=!1;u.addEventListener("touchstart",function(u){clearTimeout(i);r=!1;i=setTimeout(function(){clearTimeout(i);i=null;r=!0;f.LoadMenuEvent(n,t,u)},1e3)},{passive:!0});u.addEventListener("touchend",function(n){clearTimeout(i);i=null;r&&n.preventDefault()})},ft.prototype.initializeCell=function(n){n.column.definition.contextMenu&&(n.getElement(!0).addEventListener("contextmenu",this.LoadMenuEvent.bind(this,n,n.column.definition.contextMenu)),this.tapHold(n,n.column.definition.contextMenu));n.column.definition.clickMenu&&n.getElement(!0).addEventListener("click",this.LoadMenuEvent.bind(this,n,n.column.definition.clickMenu))},ft.prototype.initializeRow=function(n){this.table.options.rowContextMenu&&(n.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,n,this.table.options.rowContextMenu)),this.tapHold(n,this.table.options.rowContextMenu));this.table.options.rowClickMenu&&n.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,n,this.table.options.rowClickMenu))},ft.prototype.initializeGroup=function(n){this.table.options.groupContextMenu&&(n.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,n,this.table.options.groupContextMenu)),this.tapHold(n,this.table.options.groupContextMenu));this.table.options.groupClickMenu&&n.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,n,this.table.options.groupClickMenu))},ft.prototype.loadMenu=function(n,t,i,r){var u=this,e=!(n instanceof MouseEvent),f=document.createElement("div");if(f.classList.add("tabulator-menu"),e||n.preventDefault(),i&&i.length){if(!r){if(this.nestedMenuBlock){if(this.isOpen())return}else this.nestedMenuBlock=setTimeout(function(){u.nestedMenuBlock=!1},100);this.hideMenu();this.menuElements=[]}i.forEach(function(n){var i=document.createElement("div"),r=n.label,e=n.disabled;n.separator?i.classList.add("tabulator-menu-separator"):(i.classList.add("tabulator-menu-item"),typeof r=="function"&&(r=r.call(u.table,t.getComponent())),r instanceof Node?i.appendChild(r):i.innerHTML=r,typeof e=="function"&&(e=e.call(u.table,t.getComponent())),e?(i.classList.add("tabulator-menu-item-disabled"),i.addEventListener("click",function(n){n.stopPropagation()})):n.menu&&n.menu.length?i.addEventListener("click",function(r){r.stopPropagation();u.hideOldSubMenus(f);u.loadMenu(r,t,n.menu,i)}):n.action&&i.addEventListener("click",function(i){n.action(i,t.getComponent())}),n.menu&&n.menu.length&&i.classList.add("tabulator-menu-item-submenu"));f.appendChild(i)});f.addEventListener("click",function(){u.hideMenu()});this.menuElements.push(f);this.positionMenu(f,r,e,n)}},ft.prototype.hideOldSubMenus=function(n){var r=this.menuElements.indexOf(n),t,i;if(r>-1)for(t=this.menuElements.length-1;t>r;t--)i=this.menuElements[t],i.parentNode&&i.parentNode.removeChild(i),this.menuElements.pop()},ft.prototype.positionMenu=function(t,i,r,u){var f=this,h=Math.max(document.body.offsetHeight,window.innerHeight),e,o,s;i?(s=n.prototype.helpers.elOffset(i),e=s.left+i.offsetWidth,o=s.top-1):(e=r?u.touches[0].pageX:u.pageX,o=r?u.touches[0].pageY:u.pageY,this.positionReversedX=!1);t.style.top=o+"px";t.style.left=e+"px";setTimeout(function(){f.table.rowManager.element.addEventListener("scroll",f.blurEvent);document.body.addEventListener("click",f.blurEvent);document.body.addEventListener("contextmenu",f.blurEvent);window.addEventListener("resize",f.blurEvent);document.body.addEventListener("keydown",f.escEvent)},100);document.body.appendChild(t);o+t.offsetHeight>=h&&(t.style.top="",t.style.bottom=i?h-s.top-i.offsetHeight-1+"px":h-o+"px");(e+t.offsetWidth>=document.body.offsetWidth||this.positionReversedX)&&(t.style.left="",t.style.right=i?document.documentElement.offsetWidth-s.left+"px":document.documentElement.offsetWidth-e+"px",this.positionReversedX=!0)},ft.prototype.isOpen=function(){return!!this.menuElements.length},ft.prototype.escMenu=function(n){n.keyCode==27&&this.hideMenu()},ft.prototype.hideMenu=function(){this.menuElements.forEach(function(n){n.parentNode&&n.parentNode.removeChild(n)});document.body.removeEventListener("keydown",this.escEvent);document.body.removeEventListener("click",this.blurEvent);document.body.removeEventListener("contextmenu",this.blurEvent);window.removeEventListener("resize",this.blurEvent);this.table.rowManager.element.removeEventListener("scroll",this.blurEvent)},ft.prototype.menus={},n.prototype.registerModule("menu",ft),yt=function(n){this.table=n;this.placeholderElement=this.createPlaceholderElement();this.hoverElement=!1;this.checkTimeout=!1;this.checkPeriod=250;this.moving=!1;this.toCol=!1;this.toColAfter=!1;this.startX=0;this.autoScrollMargin=40;this.autoScrollStep=5;this.autoScrollTimeout=!1;this.touchMove=!1;this.moveHover=this.moveHover.bind(this);this.endMove=this.endMove.bind(this)},yt.prototype.createPlaceholderElement=function(){var n=document.createElement("div");return n.classList.add("tabulator-col"),n.classList.add("tabulator-col-placeholder"),n},yt.prototype.initializeColumn=function(t){var i=this,u={},r;t.modules.frozen||(r=t.getElement(),u.mousemove=function(u){t.parent===i.moving.parent&&((i.touchMove?u.touches[0].pageX:u.pageX)-n.prototype.helpers.elOffset(r).left+i.table.columnManager.element.scrollLeft>t.getWidth()/2?i.toCol===t&&i.toColAfter||(r.parentNode.insertBefore(i.placeholderElement,r.nextSibling),i.moveColumn(t,!0)):(i.toCol!==t||i.toColAfter)&&(r.parentNode.insertBefore(i.placeholderElement,r),i.moveColumn(t,!1)))}.bind(i),r.addEventListener("mousedown",function(n){i.touchMove=!1;n.which===1&&(i.checkTimeout=setTimeout(function(){i.startMove(n,t)},i.checkPeriod))}),r.addEventListener("mouseup",function(n){n.which===1&&i.checkTimeout&&clearTimeout(i.checkTimeout)}),i.bindTouchEvents(t));t.modules.moveColumn=u},yt.prototype.bindTouchEvents=function(n){var t=this,o=n.getElement(),u=!1,c,i,r,f,e,s,h;o.addEventListener("touchstart",function(o){t.checkTimeout=setTimeout(function(){t.touchMove=!0;c=n;i=n.nextColumn();f=i?i.getWidth()/2:0;r=n.prevColumn();e=r?r.getWidth()/2:0;s=0;h=0;u=!1;t.startMove(o,n)},t.checkPeriod)},{passive:!0});o.addEventListener("touchmove",function(o){var a,l;t.moving&&(t.moveHover(o),u||(u=o.touches[0].pageX),a=o.touches[0].pageX-u,a>0?i&&a-s>f&&(l=i,l!==n&&(u=o.touches[0].pageX,l.getElement().parentNode.insertBefore(t.placeholderElement,l.getElement().nextSibling),t.moveColumn(l,!0))):r&&-a-h>e&&(l=r,l!==n&&(u=o.touches[0].pageX,l.getElement().parentNode.insertBefore(t.placeholderElement,l.getElement()),t.moveColumn(l,!1))),l&&(c=l,i=l.nextColumn(),s=f,f=i?i.getWidth()/2:0,r=l.prevColumn(),h=e,e=r?r.getWidth()/2:0))},{passive:!0});o.addEventListener("touchend",function(n){t.checkTimeout&&clearTimeout(t.checkTimeout);t.moving&&t.endMove(n)})},yt.prototype.startMove=function(t,i){var r=i.getElement();this.moving=i;this.startX=(this.touchMove?t.touches[0].pageX:t.pageX)-n.prototype.helpers.elOffset(r).left;this.table.element.classList.add("tabulator-block-select");this.placeholderElement.style.width=i.getWidth()+"px";this.placeholderElement.style.height=i.getHeight()+"px";r.parentNode.insertBefore(this.placeholderElement,r);r.parentNode.removeChild(r);this.hoverElement=r.cloneNode(!0);this.hoverElement.classList.add("tabulator-moving");this.table.columnManager.getElement().appendChild(this.hoverElement);this.hoverElement.style.left="0";this.hoverElement.style.bottom="0";this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove));this.moveHover(t)},yt.prototype._bindMouseMove=function(){this.table.columnManager.columnsByIndex.forEach(function(n){n.modules.moveColumn.mousemove&&n.getElement().addEventListener("mousemove",n.modules.moveColumn.mousemove)})},yt.prototype._unbindMouseMove=function(){this.table.columnManager.columnsByIndex.forEach(function(n){n.modules.moveColumn.mousemove&&n.getElement().removeEventListener("mousemove",n.modules.moveColumn.mousemove)})},yt.prototype.moveColumn=function(n,t){var i=this.moving.getCells();this.toCol=n;this.toColAfter=t;t?n.getCells().forEach(function(n,t){var r=n.getElement(!0);r.parentNode.insertBefore(i[t].getElement(),r.nextSibling)}):n.getCells().forEach(function(n,t){var r=n.getElement(!0);r.parentNode.insertBefore(i[t].getElement(),r)})},yt.prototype.endMove=function(n){(n.which===1||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))},yt.prototype.moveHover=function(t){var i=this,u=i.table.columnManager.getElement(),r=u.scrollLeft,e=(i.touchMove?t.touches[0].pageX:t.pageX)-n.prototype.helpers.elOffset(u).left+r,f;i.hoverElement.style.left=e-i.startX+"px";e-r<i.autoScrollMargin&&(i.autoScrollTimeout||(i.autoScrollTimeout=setTimeout(function(){f=Math.max(0,r-5);i.table.rowManager.getElement().scrollLeft=f;i.autoScrollTimeout=!1},1)));r+u.clientWidth-e<i.autoScrollMargin&&(i.autoScrollTimeout||(i.autoScrollTimeout=setTimeout(function(){f=Math.min(u.clientWidth,r+5);i.table.rowManager.getElement().scrollLeft=f;i.autoScrollTimeout=!1},1)))},n.prototype.registerModule("moveColumn",yt),a=function(n){this.table=n;this.placeholderElement=this.createPlaceholderElement();this.hoverElement=!1;this.checkTimeout=!1;this.checkPeriod=150;this.moving=!1;this.toRow=!1;this.toRowAfter=!1;this.hasHandle=!1;this.startY=0;this.startX=0;this.moveHover=this.moveHover.bind(this);this.endMove=this.endMove.bind(this);this.tableRowDropEvent=!1;this.touchMove=!1;this.connection=!1;this.connectionSelectorsTables=!1;this.connectionSelectorsElements=!1;this.connectionElements=[];this.connections=[];this.connectedTable=!1;this.connectedRow=!1},a.prototype.createPlaceholderElement=function(){var n=document.createElement("div");return n.classList.add("tabulator-row"),n.classList.add("tabulator-row-placeholder"),n},a.prototype.initialize=function(){this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables;this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements;this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements},a.prototype.setHandle=function(n){this.hasHandle=n},a.prototype.initializeGroupHeader=function(t){var i=this,r={};r.mouseup=function(n){i.tableRowDrop(n,row)}.bind(i);r.mousemove=function(r){var u;r.pageY-n.prototype.helpers.elOffset(t.element).top+i.table.rowManager.element.scrollTop>t.getHeight()/2?i.toRow===t&&i.toRowAfter||(u=t.getElement(),u.parentNode.insertBefore(i.placeholderElement,u.nextSibling),i.moveRow(t,!0)):(i.toRow!==t||i.toRowAfter)&&(u=t.getElement(),u.previousSibling&&(u.parentNode.insertBefore(i.placeholderElement,u),i.moveRow(t,!1)))}.bind(i);t.modules.moveRow=r},a.prototype.initializeRow=function(t){var i=this,r={},u;r.mouseup=function(n){i.tableRowDrop(n,t)}.bind(i);r.mousemove=function(r){var u=t.getElement();r.pageY-n.prototype.helpers.elOffset(u).top+i.table.rowManager.element.scrollTop>t.getHeight()/2?i.toRow===t&&i.toRowAfter||(u.parentNode.insertBefore(i.placeholderElement,u.nextSibling),i.moveRow(t,!0)):(i.toRow!==t||i.toRowAfter)&&(u.parentNode.insertBefore(i.placeholderElement,u),i.moveRow(t,!1))}.bind(i);this.hasHandle||(u=t.getElement(),u.addEventListener("mousedown",function(n){n.which===1&&(i.checkTimeout=setTimeout(function(){i.startMove(n,t)},i.checkPeriod))}),u.addEventListener("mouseup",function(n){n.which===1&&i.checkTimeout&&clearTimeout(i.checkTimeout)}),this.bindTouchEvents(t,t.getElement()));t.modules.moveRow=r},a.prototype.initializeCell=function(n){var t=this,i=n.getElement(!0);i.addEventListener("mousedown",function(i){i.which===1&&(t.checkTimeout=setTimeout(function(){t.startMove(i,n.row)},t.checkPeriod))});i.addEventListener("mouseup",function(n){n.which===1&&t.checkTimeout&&clearTimeout(t.checkTimeout)});this.bindTouchEvents(n.row,i)},a.prototype.bindTouchEvents=function(n,t){var i=this,f=!1,c,r,u,e,o,s,h;t.addEventListener("touchstart",function(t){i.checkTimeout=setTimeout(function(){i.touchMove=!0;c=n;r=n.nextRow();e=r?r.getHeight()/2:0;u=n.prevRow();o=u?u.getHeight()/2:0;s=0;h=0;f=!1;i.startMove(t,n)},i.checkPeriod)},{passive:!0});this.moving;this.toRow;this.toRowAfter;t.addEventListener("touchmove",function(t){var a,l;i.moving&&(t.preventDefault(),i.moveHover(t),f||(f=t.touches[0].pageY),a=t.touches[0].pageY-f,a>0?r&&a-s>e&&(l=r,l!==n&&(f=t.touches[0].pageY,l.getElement().parentNode.insertBefore(i.placeholderElement,l.getElement().nextSibling),i.moveRow(l,!0))):u&&-a-h>o&&(l=u,l!==n&&(f=t.touches[0].pageY,l.getElement().parentNode.insertBefore(i.placeholderElement,l.getElement()),i.moveRow(l,!1))),l&&(c=l,r=l.nextRow(),s=e,e=r?r.getHeight()/2:0,u=l.prevRow(),h=o,o=u?u.getHeight()/2:0))});t.addEventListener("touchend",function(n){i.checkTimeout&&clearTimeout(i.checkTimeout);i.moving&&(i.endMove(n),i.touchMove=!1)})},a.prototype._bindMouseMove=function(){var n=this;n.table.rowManager.getDisplayRows().forEach(function(n){(n.type==="row"||n.type==="group")&&n.modules.moveRow.mousemove&&n.getElement().addEventListener("mousemove",n.modules.moveRow.mousemove)})},a.prototype._unbindMouseMove=function(){var n=this;n.table.rowManager.getDisplayRows().forEach(function(n){(n.type==="row"||n.type==="group")&&n.modules.moveRow.mousemove&&n.getElement().removeEventListener("mousemove",n.modules.moveRow.mousemove)})},a.prototype.startMove=function(n,t){var i=t.getElement();this.setStartPosition(n,t);this.moving=t;this.table.element.classList.add("tabulator-block-select");this.placeholderElement.style.width=t.getWidth()+"px";this.placeholderElement.style.height=t.getHeight()+"px";this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(t)):(i.parentNode.insertBefore(this.placeholderElement,i),i.parentNode.removeChild(i));this.hoverElement=i.cloneNode(!0);this.hoverElement.classList.add("tabulator-moving");this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove());document.body.addEventListener("mousemove",this.moveHover);document.body.addEventListener("mouseup",this.endMove);this.moveHover(n)},a.prototype.setStartPosition=function(n,t){var f=this.touchMove?n.touches[0].pageX:n.pageX,u=this.touchMove?n.touches[0].pageY:n.pageY,i,r;i=t.getElement();this.connection?(r=i.getBoundingClientRect(),this.startX=r.left-f+window.pageXOffset,this.startY=r.top-u+window.pageYOffset):this.startY=u-i.getBoundingClientRect().top},a.prototype.endMove=function(n){(!n||n.which===1||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))},a.prototype.moveRow=function(n,t){this.toRow=n;this.toRowAfter=t},a.prototype.moveHover=function(n){this.connection?this.moveHoverConnections.call(this,n):this.moveHoverTable.call(this,n)},a.prototype.moveHoverTable=function(n){var t=this.table.rowManager.getElement(),i=t.scrollTop,r=(this.touchMove?n.touches[0].pageY:n.pageY)-t.getBoundingClientRect().top+i;this.hoverElement.style.top=r-this.startY+"px"},a.prototype.moveHoverConnections=function(n){this.hoverElement.style.left=this.startX+(this.touchMove?n.touches[0].pageX:n.pageX)+"px";this.hoverElement.style.top=this.startY+(this.touchMove?n.touches[0].pageY:n.pageY)+"px"},a.prototype.elementRowDrop=function(n,t,i){this.table.options.movableRowsElementDrop&&this.table.options.movableRowsElementDrop(n,t,i?i.getComponent():!1)},a.prototype.connectToTables=function(n){var t=this,i;this.connectionSelectorsTables&&(i=this.table.modules.comms.getConnections(this.connectionSelectorsTables),this.table.options.movableRowsSendingStart.call(this.table,i),this.table.modules.comms.send(this.connectionSelectorsTables,"moveRow","connect",{row:n}));this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(function(n){typeof n=="string"?t.connectionElements=t.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(n))):t.connectionElements.push(n)}),this.connectionElements.forEach(function(n){var i=function(i){t.elementRowDrop(i,n,t.moving)};n.addEventListener("mouseup",i);n.tabulatorElementDropEvent=i;n.classList.add("tabulator-movingrow-receiving")}))},a.prototype.disconnectFromTables=function(){var n;this.connectionSelectorsTables&&(n=this.table.modules.comms.getConnections(this.connectionSelectorsTables),this.table.options.movableRowsSendingStop.call(this.table,n),this.table.modules.comms.send(this.connectionSelectorsTables,"moveRow","disconnect"));this.connectionElements.forEach(function(n){n.classList.remove("tabulator-movingrow-receiving");n.removeEventListener("mouseup",n.tabulatorElementDropEvent);delete n.tabulatorElementDropEvent})},a.prototype.connect=function(n,t){var i=this;return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=n,this.connectedRow=t,this.table.element.classList.add("tabulator-movingrow-receiving"),i.table.rowManager.getDisplayRows().forEach(function(n){n.type==="row"&&n.modules.moveRow&&n.modules.moveRow.mouseup&&n.getElement().addEventListener("mouseup",n.modules.moveRow.mouseup)}),i.tableRowDropEvent=i.tableRowDrop.bind(i),i.table.element.addEventListener("mouseup",i.tableRowDropEvent),this.table.options.movableRowsReceivingStart.call(this.table,t,n),!0)},a.prototype.disconnect=function(n){var t=this;n===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),t.table.rowManager.getDisplayRows().forEach(function(n){n.type==="row"&&n.modules.moveRow&&n.modules.moveRow.mouseup&&n.getElement().removeEventListener("mouseup",n.modules.moveRow.mouseup)}),t.table.element.removeEventListener("mouseup",t.tableRowDropEvent),this.table.options.movableRowsReceivingStop.call(this.table,n)):console.warn("Move Row Error - trying to disconnect from non connected table")},a.prototype.dropComplete=function(n,t,i){var r=!1;if(i){switch(_typeof(this.table.options.movableRowsSender)){case"string":r=this.senders[this.table.options.movableRowsSender];break;case"function":r=this.table.options.movableRowsSender}r?r.call(this,this.moving.getComponent(),t?t.getComponent():undefined,n):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender);this.table.options.movableRowsSent.call(this.table,this.moving.getComponent(),t?t.getComponent():undefined,n)}else this.table.options.movableRowsSentFailed.call(this.table,this.moving.getComponent(),t?t.getComponent():undefined,n);this.endMove()},a.prototype.tableRowDrop=function(n,t){var i=!1,r=!1;console.trace("drop");n.stopImmediatePropagation();switch(_typeof(this.table.options.movableRowsReceiver)){case"string":i=this.receivers[this.table.options.movableRowsReceiver];break;case"function":i=this.table.options.movableRowsReceiver}i?r=i.call(this,this.connectedRow.getComponent(),t?t.getComponent():undefined,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver);r?this.table.options.movableRowsReceived.call(this.table,this.connectedRow.getComponent(),t?t.getComponent():undefined,this.connectedTable):this.table.options.movableRowsReceivedFailed.call(this.table,this.connectedRow.getComponent(),t?t.getComponent():undefined,this.connectedTable);this.table.modules.comms.send(this.connectedTable,"moveRow","dropcomplete",{row:t,success:r})},a.prototype.receivers={insert:function(n,t){return this.table.addRow(n.getData(),undefined,t),!0},add:function(n){return this.table.addRow(n.getData()),!0},update:function(n,t){return t?(t.update(n.getData()),!0):!1},replace:function(n,t){return t?(this.table.addRow(n.getData(),undefined,t),t.delete(),!0):!1}},a.prototype.senders={"delete":function(n){n.delete()}},a.prototype.commsReceived=function(n,t,i){switch(t){case"connect":return this.connect(n,i.row);case"disconnect":return this.disconnect(n);case"dropcomplete":return this.dropComplete(n,i.row,i.success)}},n.prototype.registerModule("moveRow",a),bt=function(n){this.table=n;this.allowedTypes=["","data","edit","clipboard"];this.enabled=!0},bt.prototype.initializeColumn=function(n){var r=this,t=!1,i={};this.allowedTypes.forEach(function(u){var f="mutator"+(u.charAt(0).toUpperCase()+u.slice(1)),e;n.definition[f]&&(e=r.lookupMutator(n.definition[f]),e&&(t=!0,i[f]={mutator:e,params:n.definition[f+"Params"]||{}}))});t&&(n.modules.mutate=i)},bt.prototype.lookupMutator=function(n){var t=!1;switch(typeof n=="undefined"?"undefined":_typeof(n)){case"string":this.mutators[n]?t=this.mutators[n]:console.warn("Mutator Error - No such mutator found, ignoring: ",n);break;case"function":t=n}return t},bt.prototype.transformRow=function(n,t,i){var u=this,f="mutator"+(t.charAt(0).toUpperCase()+t.slice(1)),r;return this.enabled&&u.table.columnManager.traverse(function(u){var e,s,o;u.modules.mutate&&(e=u.modules.mutate[f]||u.modules.mutate.mutator||!1,e&&(r=u.getFieldValue(typeof i!="undefined"?i:n),(t=="data"||typeof r!="undefined")&&(o=u.getComponent(),s=typeof e.params=="function"?e.params(r,n,t,o):e.params,u.setFieldValue(n,e.mutator(r,n,t,s,o)))))}),n},bt.prototype.transformCell=function(n,t){var r=n.column.modules.mutate.mutatorEdit||n.column.modules.mutate.mutator||!1,i={};return r?(i=Object.assign(i,n.row.getData()),n.column.setFieldValue(i,t),r.mutator(t,i,"edit",r.params,n.getComponent())):t},bt.prototype.enable=function(){this.enabled=!0},bt.prototype.disable=function(){this.enabled=!1},bt.prototype.mutators={},n.prototype.registerModule("mutator",bt),l=function(n){this.table=n;this.mode="local";this.progressiveLoad=!1;this.size=0;this.page=1;this.count=5;this.max=1;this.displayIndex=0;this.initialLoad=!0;this.pageSizes=[];this.dataReceivedNames={};this.dataSentNames={};this.createElements()},l.prototype.createElements=function(){var n;this.element=document.createElement("span");this.element.classList.add("tabulator-paginator");this.pagesElement=document.createElement("span");this.pagesElement.classList.add("tabulator-pages");n=document.createElement("button");n.classList.add("tabulator-page");n.setAttribute("type","button");n.setAttribute("role","button");n.setAttribute("aria-label","");n.setAttribute("title","");this.firstBut=n.cloneNode(!0);this.firstBut.setAttribute("data-page","first");this.prevBut=n.cloneNode(!0);this.prevBut.setAttribute("data-page","prev");this.nextBut=n.cloneNode(!0);this.nextBut.setAttribute("data-page","next");this.lastBut=n.cloneNode(!0);this.lastBut.setAttribute("data-page","last");this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))},l.prototype.generatePageSizeSelectList=function(){var i=this,n=[],t;if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))n=this.table.options.paginationSizeSelector,this.pageSizes=n,this.pageSizes.indexOf(this.size)==-1&&n.unshift(this.size);else if(this.pageSizes.indexOf(this.size)==-1){for(n=[],t=1;t<5;t++)n.push(this.size*t);this.pageSizes=n}else n=this.pageSizes;while(this.pageSizeSelect.firstChild)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);n.forEach(function(n){var t=document.createElement("option");t.value=n;n===!0?i.table.modules.localize.bind("pagination|all",function(n){t.innerHTML=n}):t.innerHTML=n;i.pageSizeSelect.appendChild(t)});this.pageSizeSelect.value=this.size}},l.prototype.initialize=function(n){var t=this,u,i,r;this.dataSentNames=Object.assign({},this.paginationDataSentNames);this.dataSentNames=Object.assign(this.dataSentNames,this.table.options.paginationDataSent);this.dataReceivedNames=Object.assign({},this.paginationDataReceivedNames);this.dataReceivedNames=Object.assign(this.dataReceivedNames,this.table.options.paginationDataReceived);t.table.modules.localize.bind("pagination|first",function(n){t.firstBut.innerHTML=n});t.table.modules.localize.bind("pagination|first_title",function(n){t.firstBut.setAttribute("aria-label",n);t.firstBut.setAttribute("title",n)});t.table.modules.localize.bind("pagination|prev",function(n){t.prevBut.innerHTML=n});t.table.modules.localize.bind("pagination|prev_title",function(n){t.prevBut.setAttribute("aria-label",n);t.prevBut.setAttribute("title",n)});t.table.modules.localize.bind("pagination|next",function(n){t.nextBut.innerHTML=n});t.table.modules.localize.bind("pagination|next_title",function(n){t.nextBut.setAttribute("aria-label",n);t.nextBut.setAttribute("title",n)});t.table.modules.localize.bind("pagination|last",function(n){t.lastBut.innerHTML=n});t.table.modules.localize.bind("pagination|last_title",function(n){t.lastBut.setAttribute("aria-label",n);t.lastBut.setAttribute("title",n)});t.firstBut.addEventListener("click",function(){t.setPage(1).then(function(){}).catch(function(){})});t.prevBut.addEventListener("click",function(){t.previousPage().then(function(){}).catch(function(){})});t.nextBut.addEventListener("click",function(){t.nextPage().then(function(){}).catch(function(){})});t.lastBut.addEventListener("click",function(){t.setPage(t.max).then(function(){}).catch(function(){})});t.table.options.paginationElement&&(t.element=t.table.options.paginationElement);this.pageSizeSelect&&(u=document.createElement("label"),t.table.modules.localize.bind("pagination|page_size",function(n){t.pageSizeSelect.setAttribute("aria-label",n);t.pageSizeSelect.setAttribute("title",n);u.innerHTML=n}),t.element.appendChild(u),t.element.appendChild(t.pageSizeSelect),t.pageSizeSelect.addEventListener("change",function(){t.setPageSize(t.pageSizeSelect.value=="true"?!0:t.pageSizeSelect.value);t.setPage(1).then(function(){}).catch(function(){})}));t.element.appendChild(t.firstBut);t.element.appendChild(t.prevBut);t.element.appendChild(t.pagesElement);t.element.appendChild(t.nextBut);t.element.appendChild(t.lastBut);t.table.options.paginationElement||n||t.table.footerManager.append(t.element,t);t.mode=t.table.options.pagination;t.table.options.paginationSize?t.size=t.table.options.paginationSize:(i=document.createElement("div"),i.classList.add("tabulator-row"),i.style.visibility=n,r=document.createElement("div"),r.classList.add("tabulator-cell"),r.innerHTML="Page Row Test",i.appendChild(r),t.table.rowManager.getTableElement().appendChild(i),t.size=Math.floor(t.table.rowManager.getElement().clientHeight/i.offsetHeight),t.table.rowManager.getTableElement().removeChild(i));t.count=t.table.options.paginationButtonCount;t.generatePageSizeSelectList()},l.prototype.initializeProgressive=function(n){this.initialize(!0);this.mode="progressive_"+n;this.progressiveLoad=!0},l.prototype.setDisplayIndex=function(n){this.displayIndex=n},l.prototype.getDisplayIndex=function(){return this.displayIndex},l.prototype.setMaxRows=function(n){this.max=n?this.size===!0?1:Math.ceil(n/this.size):1;this.page>this.max&&(this.page=this.max)},l.prototype.reset=function(n,t){return(this.mode=="local"||n)&&(this.page=1),t&&(this.initialLoad=!0),!0},l.prototype.setMaxPage=function(n){n=parseInt(n);this.max=n||1;this.page>this.max&&(this.page=this.max,this.trigger())},l.prototype.setPage=function(n){var t=this,i=this;switch(n){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return new Promise(function(r,u){n=parseInt(n);n>0&&n<=t.max?(t.page=n,t.trigger().then(function(){r()}).catch(function(){u()}),i.table.options.persistence&&i.table.modExists("persistence",!0)&&i.table.modules.persistence.config.page&&i.table.modules.persistence.save("page")):(console.warn("Pagination Error - Requested page is out of range of 1 - "+t.max+":",n),u())})},l.prototype.setPageToRow=function(n){var t=this;return new Promise(function(i,r){var e=t.table.rowManager.getDisplayRows(t.displayIndex-1),u=e.indexOf(n),f;u>-1?(f=t.size===!0?1:Math.ceil((u+1)/t.size),t.setPage(f).then(function(){i()}).catch(function(){r()})):(console.warn("Pagination Error - Requested row is not visible"),r())})},l.prototype.setPageSize=function(n){n!==!0&&(n=parseInt(n));n>0&&(this.size=n);this.pageSizeSelect&&this.generatePageSizeSelectList();this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.page&&this.table.modules.persistence.save("page")},l.prototype._setPageButtons=function(){for(var n=this,i=Math.floor((this.count-1)/2),r=Math.ceil((this.count-1)/2),u=this.max-this.page+i+1<this.count?this.max-this.count+1:Math.max(this.page-i,1),f=this.page<=r?Math.min(this.count,this.max):Math.min(this.page+r,this.max),t;n.pagesElement.firstChild;)n.pagesElement.removeChild(n.pagesElement.firstChild);for(n.page==1?(n.firstBut.disabled=!0,n.prevBut.disabled=!0):(n.firstBut.disabled=!1,n.prevBut.disabled=!1),n.page==n.max?(n.lastBut.disabled=!0,n.nextBut.disabled=!0):(n.lastBut.disabled=!1,n.nextBut.disabled=!1),t=u;t<=f;t++)t>0&&t<=n.max&&n.pagesElement.appendChild(n._generatePageButton(t));this.footerRedraw()},l.prototype._generatePageButton=function(n){var i=this,t=document.createElement("button");return t.classList.add("tabulator-page"),n==i.page&&t.classList.add("active"),t.setAttribute("type","button"),t.setAttribute("role","button"),i.table.modules.localize.bind("pagination|page_title",function(i){t.setAttribute("aria-label",i+" "+n);t.setAttribute("title",i+" "+n)}),t.setAttribute("data-page",n),t.textContent=n,t.addEventListener("click",function(){i.setPage(n).then(function(){}).catch(function(){})}),t},l.prototype.previousPage=function(){var n=this;return new Promise(function(t,i){n.page>1?(n.page--,n.trigger().then(function(){t()}).catch(function(){i()}),n.table.options.persistence&&n.table.modExists("persistence",!0)&&n.table.modules.persistence.config.page&&n.table.modules.persistence.save("page")):(console.warn("Pagination Error - Previous page would be less than page 1:",0),i())})},l.prototype.nextPage=function(){var n=this;return new Promise(function(t,i){n.page<n.max?(n.page++,n.trigger().then(function(){t()}).catch(function(){i()}),n.table.options.persistence&&n.table.modExists("persistence",!0)&&n.table.modules.persistence.config.page&&n.table.modules.persistence.save("page")):(n.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+n.max+":",n.max+1),i())})},l.prototype.getPage=function(){return this.page},l.prototype.getPageMax=function(){return this.max},l.prototype.getPageSize=function(){return this.size},l.prototype.getMode=function(){return this.mode},l.prototype.getRows=function(n){var r,i,u,t;if(this.mode=="local"){for(r=[],this.size===!0?(i=0,u=n.length):(i=this.size*(this.page-1),u=i+parseInt(this.size)),this._setPageButtons(),t=i;t<u;t++)n[t]&&r.push(n[t]);return r}return this._setPageButtons(),n.slice(0)},l.prototype.trigger=function(){var n=this,t;return new Promise(function(i,r){switch(n.mode){case"local":t=n.table.rowManager.scrollLeft;n.table.rowManager.refreshActiveData("page");n.table.rowManager.scrollHorizontal(t);n.table.options.pageLoaded.call(n.table,n.getPage());i();break;case"remote":case"progressive_load":case"progressive_scroll":n.table.modules.ajax.blockActiveRequest();n._getRemotePage().then(function(){i()}).catch(function(){r()});break;default:console.warn("Pagination Error - no such pagination mode:",n.mode);r()}})},l.prototype._getRemotePage=function(){var t=this,i=this,u,r;return new Promise(function(f,e){var o,s;i.table.modExists("ajax",!0)||e();u=n.prototype.helpers.deepClone(i.table.modules.ajax.getParams()||{});r=i.table.modules.ajax.getParams();r[t.dataSentNames.page]=i.page;t.size&&(r[t.dataSentNames.size]=t.size);t.table.options.ajaxSorting&&t.table.modExists("sort")&&(o=i.table.modules.sort.getSort(),o.forEach(function(n){delete n.column}),r[t.dataSentNames.sorters]=o);t.table.options.ajaxFiltering&&t.table.modExists("filter")&&(s=i.table.modules.filter.getFilters(!0,!0),r[t.dataSentNames.filters]=s);i.table.modules.ajax.setParams(r);i.table.modules.ajax.sendRequest(t.progressiveLoad).then(function(n){i._parseRemoteData(n);f()}).catch(function(){e()});i.table.modules.ajax.setParams(u)})},l.prototype._parseRemoteData=function(n){var t=this,i,n,r;if(typeof n[this.dataReceivedNames.last_page]=="undefined"&&console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.last_page+"' property"),n[this.dataReceivedNames.data]){if(this.max=parseInt(n[this.dataReceivedNames.last_page])||1,this.progressiveLoad)switch(this.mode){case"progressive_load":this.page==1?this.table.rowManager.setData(n[this.dataReceivedNames.data],!1,this.initialLoad&&this.page==1):this.table.rowManager.addRows(n[this.dataReceivedNames.data]);this.page<this.max&&setTimeout(function(){t.nextPage().then(function(){}).catch(function(){})},t.table.options.ajaxProgressiveLoadDelay);break;case"progressive_scroll":n=this.table.rowManager.getData().concat(n[this.dataReceivedNames.data]);this.table.rowManager.setData(n,!0,this.initialLoad&&this.page==1);r=this.table.options.ajaxProgressiveLoadScrollMargin||this.table.rowManager.element.clientHeight*2;t.table.rowManager.element.scrollHeight<=t.table.rowManager.element.clientHeight+r&&t.nextPage().then(function(){}).catch(function(){})}else i=this.table.rowManager.scrollLeft,this.table.rowManager.setData(n[this.dataReceivedNames.data],!1,this.initialLoad&&this.page==1),this.table.rowManager.scrollHorizontal(i),this.table.columnManager.scrollHorizontal(i),this.table.options.pageLoaded.call(this.table,this.getPage());this.initialLoad=!1}else console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.data+"' property")},l.prototype.footerRedraw=function(){var n=this.table.footerManager.element;Math.ceil(n.clientWidth)-n.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(n.clientWidth)-n.scrollWidth<0&&(this.pagesElement.style.display="none"))},l.prototype.paginationDataSentNames={page:"page",size:"size",sorters:"sorters",filters:"filters"},l.prototype.paginationDataReceivedNames={current_page:"current_page",last_page:"last_page",data:"data"},n.prototype.registerModule("page",l),nt=function(n){this.table=n;this.mode="";this.id="";this.defWatcherBlock=!1;this.config={};this.readFunc=!1;this.writeFunc=!1},nt.prototype.localStorageTest=function(){var n="_tabulator_test";try{return window.localStorage.setItem(n,n),window.localStorage.removeItem(n),!0}catch(t){return!1}},nt.prototype.initialize=function(){var t=this.table.options.persistenceMode,i=this.table.options.persistenceID,n;this.mode=t!==!0?t:this.localStorageTest()?"local":"cookie";this.table.options.persistenceReaderFunc?typeof this.table.options.persistenceReaderFunc=="function"?this.readFunc=this.table.options.persistenceReaderFunc:this.readers[this.table.options.persistenceReaderFunc]?this.readFunc=this.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):this.readers[this.mode]?this.readFunc=this.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode);this.table.options.persistenceWriterFunc?typeof this.table.options.persistenceWriterFunc=="function"?this.writeFunc=this.table.options.persistenceWriterFunc:this.readers[this.table.options.persistenceWriterFunc]?this.writeFunc=this.readers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):this.writers[this.mode]?this.writeFunc=this.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode);this.id="tabulator-"+(i||this.table.element.getAttribute("id")||"");this.config={sort:this.table.options.persistence===!0||this.table.options.persistence.sort,filter:this.table.options.persistence===!0||this.table.options.persistence.filter,group:this.table.options.persistence===!0||this.table.options.persistence.group,page:this.table.options.persistence===!0||this.table.options.persistence.page,columns:this.table.options.persistence===!0?["title","width","visible"]:this.table.options.persistence.columns};this.config.page&&(n=this.retreiveData("page"),n&&(typeof n.paginationSize!="undefined"&&(this.config.page===!0||this.config.page.size)&&(this.table.options.paginationSize=n.paginationSize),typeof n.paginationInitialPage!="undefined"&&(this.config.page===!0||this.config.page.page)&&(this.table.options.paginationInitialPage=n.paginationInitialPage)));this.config.group&&(n=this.retreiveData("group"),n&&(typeof n.groupBy!="undefined"&&(this.config.group===!0||this.config.group.groupBy)&&(this.table.options.groupBy=n.groupBy),typeof n.groupStartOpen!="undefined"&&(this.config.group===!0||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=n.groupStartOpen),typeof n.groupHeader!="undefined"&&(this.config.group===!0||this.config.group.groupHeader)&&(this.table.options.groupHeader=n.groupHeader)));this.config.columns&&this.load("columns",this.table.options.columns)},nt.prototype.initializeColumn=function(n){var i=this,t,r;this.config.columns&&(this.defWatcherBlock=!0,t=n.getDefinition(),r=this.config.columns===!0?Object.keys(t):this.config.columns,r.forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n),u=t[n];r&&Object.defineProperty(t,n,{set:function(n){u=n;i.defWatcherBlock||i.save("columns");r.set&&r.set(n)},get:function(){return r.get&&r.get(),u}})}),this.defWatcherBlock=!1)},nt.prototype.load=function(n,t){var i=this.retreiveData(n);return t&&(i=i?this.mergeDefinition(t,i):t),i},nt.prototype.retreiveData=function(n){return this.readFunc?this.readFunc(this.id,n):!1},nt.prototype.mergeDefinition=function(n,t){var i=this,r=[];return t=t||[],t.forEach(function(t){var u=i._findColumn(n,t),f;u&&(i.config.columns===!0||i.config.columns==undefined?(f=Object.keys(u),f.push("width")):f=i.config.columns,f.forEach(function(n){n!=="columns"&&typeof t[n]!="undefined"&&(u[n]=t[n])}),u.columns&&(u.columns=i.mergeDefinition(u.columns,t.columns)),r.push(u))}),n.forEach(function(n,u){var f=i._findColumn(t,n);f||(r.length>u?r.splice(u,0,n):r.push(n))}),r},nt.prototype._findColumn=function(n,t){var i=t.columns?"group":t.field?"field":"object";return n.find(function(n){switch(i){case"group":return n.title===t.title&&n.columns.length===t.columns.length;case"field":return n.field===t.field;case"object":return n===t}})},nt.prototype.save=function(n){var t={};switch(n){case"columns":t=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":t=this.table.modules.filter.getFilters();break;case"sort":t=this.validateSorters(this.table.modules.sort.getSort());break;case"group":t=this.getGroupConfig();break;case"page":t=this.getPageConfig()}this.writeFunc&&this.writeFunc(this.id,n,t)},nt.prototype.validateSorters=function(n){return n.forEach(function(n){n.column=n.field;delete n.field}),n},nt.prototype.getGroupConfig=function(){var n={};return this.config.group&&((this.config.group===!0||this.config.group.groupBy)&&(n.groupBy=this.table.options.groupBy),(this.config.group===!0||this.config.group.groupStartOpen)&&(n.groupStartOpen=this.table.options.groupStartOpen),(this.config.group===!0||this.config.group.groupHeader)&&(n.groupHeader=this.table.options.groupHeader)),n},nt.prototype.getPageConfig=function(){var n={};return this.config.page&&((this.config.page===!0||this.config.page.size)&&(n.paginationSize=this.table.modules.page.getPageSize()),(this.config.page===!0||this.config.page.page)&&(n.paginationInitialPage=this.table.modules.page.getPage())),n},nt.prototype.parseColumns=function(n){var t=this,i=[],r=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return n.forEach(function(n){var u={},f=n.getDefinition(),e;n.isGroup?(u.title=f.title,u.columns=t.parseColumns(n.getColumns())):(u.field=n.getField(),t.config.columns===!0||t.config.columns==undefined?(e=Object.keys(f),e.push("width")):e=t.config.columns,e.forEach(function(t){switch(t){case"width":u.width=n.getWidth();break;case"visible":u.visible=n.visible;break;default:typeof f[t]!="function"&&r.indexOf(t)===-1&&(u[t]=f[t])}}));i.push(u)}),i},nt.prototype.readers={local:function(n,t){var i=localStorage.getItem(n+"-"+t);return i?JSON.parse(i):!1},cookie:function(n,t){var i=document.cookie,f=n+"-"+t,e=i.indexOf(f+"="),r,u;return e>-1&&(i=i.substr(e),r=i.indexOf(";"),r>-1&&(i=i.substr(0,r)),u=i.replace(f+"=","")),u?JSON.parse(u):!1}},nt.prototype.writers={local:function(n,t,i){localStorage.setItem(n+"-"+t,JSON.stringify(i))},cookie:function(n,t,i){var r=new Date;r.setDate(r.getDate()+1e4);document.cookie=n+"-"+t+"="+JSON.stringify(i)+"; expires="+r.toUTCString()}},n.prototype.registerModule("persistence",nt),ri=function(n){this.table=n;this.element=!1;this.manualBlock=!1},ri.prototype.initialize=function(){window.addEventListener("beforeprint",this.replaceTable.bind(this));window.addEventListener("afterprint",this.cleanup.bind(this))},ri.prototype.replaceTable=function(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))},ri.prototype.cleanup=function(){document.body.classList.remove("tabulator-print-fullscreen-hide");this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")},ri.prototype.printFullscreen=function(n,t,i){var s=window.scrollX,h=window.scrollY,r=document.createElement("div"),u=document.createElement("div"),o=this.table.modules.export.genereateTable(typeof i!="undefined"?i:this.table.options.printConfig,typeof t!="undefined"?t:this.table.options.printStyled,n,"print"),f,e;this.manualBlock=!0;this.element=document.createElement("div");this.element.classList.add("tabulator-print-fullscreen");this.table.options.printHeader&&(r.classList.add("tabulator-print-header"),f=typeof this.table.options.printHeader=="function"?this.table.options.printHeader.call(this.table):this.table.options.printHeader,typeof f=="string"?r.innerHTML=f:r.appendChild(f),this.element.appendChild(r));this.element.appendChild(o);this.table.options.printFooter&&(u.classList.add("tabulator-print-footer"),e=typeof this.table.options.printFooter=="function"?this.table.options.printFooter.call(this.table):this.table.options.printFooter,typeof e=="string"?u.innerHTML=e:u.appendChild(e),this.element.appendChild(u));document.body.classList.add("tabulator-print-fullscreen-hide");document.body.appendChild(this.element);this.table.options.printFormatter&&this.table.options.printFormatter(this.element,o);window.print();this.cleanup();window.scrollTo(s,h);this.manualBlock=!1},n.prototype.registerModule("print",ri),wt=function(n){this.table=n;this.data=!1;this.blocked=!1;this.origFuncs={};this.currentVersion=0},wt.prototype.watchData=function(n){var t=this,i;this.currentVersion++;i=this.currentVersion;t.unwatchData();t.data=n;t.origFuncs.push=n.push;Object.defineProperty(t.data,"push",{enumerable:!1,configurable:!0,value:function(){var r=Array.from(arguments);return t.blocked||i!==t.currentVersion||r.forEach(function(n){t.table.rowManager.addRowActual(n,!1)}),t.origFuncs.push.apply(n,arguments)}});t.origFuncs.unshift=n.unshift;Object.defineProperty(t.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var r=Array.from(arguments);return t.blocked||i!==t.currentVersion||r.forEach(function(n){t.table.rowManager.addRowActual(n,!0)}),t.origFuncs.unshift.apply(n,arguments)}});t.origFuncs.shift=n.shift;Object.defineProperty(t.data,"shift",{enumerable:!1,configurable:!0,value:function(){var r;return t.blocked||i!==t.currentVersion||t.data.length&&(r=t.table.rowManager.getRowFromDataObject(t.data[0]),r&&r.deleteActual()),t.origFuncs.shift.call(n)}});t.origFuncs.pop=n.pop;Object.defineProperty(t.data,"pop",{enumerable:!1,configurable:!0,value:function(){var r;return t.blocked||i!==t.currentVersion||t.data.length&&(r=t.table.rowManager.getRowFromDataObject(t.data[t.data.length-1]),r&&r.deleteActual()),t.origFuncs.pop.call(n)}});t.origFuncs.splice=n.splice;Object.defineProperty(t.data,"splice",{enumerable:!1,configurable:!0,value:function(){var r=Array.from(arguments),f=r[0]<0?n.length+r[0]:r[0],e=r[1],u=r[2]?r.slice(2):!1,o,s;return t.blocked||i!==t.currentVersion||(u&&(o=n[f]?t.table.rowManager.getRowFromDataObject(n[f]):!1,o?u.forEach(function(n){t.table.rowManager.addRowActual(n,!0,o,!0)}):(u=u.slice().reverse(),u.forEach(function(n){t.table.rowManager.addRowActual(n,!0,!1,!0)}))),e!==0&&(s=n.slice(f,typeof r[1]=="undefined"?r[1]:f+e),s.forEach(function(n,i){var r=t.table.rowManager.getRowFromDataObject(n);r&&r.deleteActual(i!==s.length-1)})),(u||e!==0)&&t.table.rowManager.reRenderInPosition()),t.origFuncs.splice.apply(n,arguments)}})},wt.prototype.unwatchData=function(){if(this.data!==!1)for(var n in this.origFuncs)Object.defineProperty(this.data,n,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})},wt.prototype.watchRow=function(n){var t=n.getData(),i;this.blocked=!0;for(i in t)this.watchKey(n,t,i);this.table.options.dataTree&&this.watchTreeChildren(n);this.blocked=!1},wt.prototype.watchTreeChildren=function(n){function r(){u.table.modules.dataTree.initializeRow(n);u.table.modules.dataTree.layoutRow(n);u.table.rowManager.refreshActiveData("tree",!1,!0)}var u=this,t=n.getData()[this.table.options.dataTreeChildField],i={};t&&(i.push=t.push,Object.defineProperty(t,"push",{enumerable:!1,configurable:!0,value:function(){var n=i.push.apply(t,arguments);return r(),n}}),i.unshift=t.unshift,Object.defineProperty(t,"unshift",{enumerable:!1,configurable:!0,value:function(){var n=i.unshift.apply(t,arguments);return r(),n}}),i.shift=t.shift,Object.defineProperty(t,"shift",{enumerable:!1,configurable:!0,value:function(){var n=i.shift.call(t);return r(),n}}),i.pop=t.pop,Object.defineProperty(t,"pop",{enumerable:!1,configurable:!0,value:function(){var n=i.pop.call(t);return r(),n}}),i.splice=t.splice,Object.defineProperty(t,"splice",{enumerable:!1,configurable:!0,value:function(){var n=i.splice.apply(t,arguments);return r(),n}}))},wt.prototype.watchKey=function(n,t,i){var u=this,r=Object.getOwnPropertyDescriptor(t,i),f=t[i],e=this.currentVersion;Object.defineProperty(t,i,{set:function(t){if(f=t,!u.blocked&&e===u.currentVersion){var o={};o[i]=t;n.updateData(o)}r.set&&r.set(t)},get:function(){return r.get&&r.get(),f}})},wt.prototype.unwatchRow=function(n){var t=n.getData();for(var i in t)Object.defineProperty(t,i,{value:t[i]})},wt.prototype.block=function(){this.blocked=!0},wt.prototype.unblock=function(){this.blocked=!1},n.prototype.registerModule("reactiveData",wt),fi=function(n){this.table=n;this.startColumn=!1;this.startX=!1;this.startWidth=!1;this.handle=null;this.prevHandle=null},fi.prototype.initializeColumn=function(n,t,i){var r=this,s=!1,h=this.table.options.resizableColumns,u,f,e,o;n==="header"&&(s=t.definition.formatter=="textarea"||t.definition.variableHeight,t.modules.resize={variableHeight:s});(h===!0||h==n)&&(u=document.createElement("div"),u.className="tabulator-col-resize-handle",f=document.createElement("div"),f.className="tabulator-col-resize-handle prev",u.addEventListener("click",function(n){n.stopPropagation()}),e=function(n){var i=t.getLastColumn();i&&r._checkResizability(i)&&(r.startColumn=t,r._mouseDown(n,i,u))},u.addEventListener("mousedown",e),u.addEventListener("touchstart",e,{passive:!0}),u.addEventListener("dblclick",function(n){var i=t.getLastColumn();i&&r._checkResizability(i)&&(n.stopPropagation(),i.reinitializeWidth(!0))}),f.addEventListener("click",function(n){n.stopPropagation()}),o=function(n){var u,e,i;u=t.getFirstColumn();u&&(e=r.table.columnManager.findColumnIndex(u),i=e>0?r.table.columnManager.getColumnByIndex(e-1):!1,i&&r._checkResizability(i)&&(r.startColumn=t,r._mouseDown(n,i,f)))},f.addEventListener("mousedown",o),f.addEventListener("touchstart",o,{passive:!0}),f.addEventListener("dblclick",function(n){var u,f,i;u=t.getFirstColumn();u&&(f=r.table.columnManager.findColumnIndex(u),i=f>0?r.table.columnManager.getColumnByIndex(f-1):!1,i&&r._checkResizability(i)&&(n.stopPropagation(),i.reinitializeWidth(!0)))}),i.appendChild(u),i.appendChild(f))},fi.prototype._checkResizability=function(n){return typeof n.definition.resizable!="undefined"?n.definition.resizable:this.table.options.resizableColumns},fi.prototype._mouseDown=function(n,t,i){function u(n){r.table.rtl?t.setWidth(r.startWidth-((typeof n.screenX=="undefined"?n.touches[0].screenX:n.screenX)-r.startX)):t.setWidth(r.startWidth+((typeof n.screenX=="undefined"?n.touches[0].screenX:n.screenX)-r.startX));r.table.options.virtualDomHoz&&r.table.vdomHoz.reinitialize(!0);!r.table.browserSlow&&t.modules.resize&&t.modules.resize.variableHeight&&t.checkCellHeights()}function f(){r.startColumn.modules.edit&&(r.startColumn.modules.edit.blocked=!1);r.table.browserSlow&&t.modules.resize&&t.modules.resize.variableHeight&&t.checkCellHeights();document.body.removeEventListener("mouseup",f);document.body.removeEventListener("mousemove",u);i.removeEventListener("touchmove",u);i.removeEventListener("touchend",f);r.table.element.classList.remove("tabulator-block-select");r.table.options.persistence&&r.table.modExists("persistence",!0)&&r.table.modules.persistence.config.columns&&r.table.modules.persistence.save("columns");r.table.options.columnResized.call(r.table,t.getComponent())}var r=this;r.table.element.classList.add("tabulator-block-select");n.stopPropagation();r.startColumn.modules.edit&&(r.startColumn.modules.edit.blocked=!0);r.startX=typeof n.screenX=="undefined"?n.touches[0].screenX:n.screenX;r.startWidth=t.getWidth();document.body.addEventListener("mousemove",u);document.body.addEventListener("mouseup",f);i.addEventListener("touchmove",u,{passive:!0});i.addEventListener("touchend",f)},n.prototype.registerModule("resizeColumns",fi),ei=function(n){this.table=n;this.startColumn=!1;this.startY=!1;this.startHeight=!1;this.handle=null;this.prevHandle=null},ei.prototype.initializeRow=function(n){var r=this,e=n.getElement(),i=document.createElement("div"),t,u,f;i.className="tabulator-row-resize-handle";t=document.createElement("div");t.className="tabulator-row-resize-handle prev";i.addEventListener("click",function(n){n.stopPropagation()});u=function(t){r.startRow=n;r._mouseDown(t,n,i)};i.addEventListener("mousedown",u);i.addEventListener("touchstart",u,{passive:!0});t.addEventListener("click",function(n){n.stopPropagation()});f=function(i){var u=r.table.rowManager.prevDisplayRow(n);u&&(r.startRow=u,r._mouseDown(i,u,t))};t.addEventListener("mousedown",f);t.addEventListener("touchstart",f,{passive:!0});e.appendChild(i);e.appendChild(t)},ei.prototype._mouseDown=function(n,t,i){function u(n){t.setHeight(r.startHeight+((typeof n.screenY=="undefined"?n.touches[0].screenY:n.screenY)-r.startY))}function f(){document.body.removeEventListener("mouseup",u);document.body.removeEventListener("mousemove",u);i.removeEventListener("touchmove",u);i.removeEventListener("touchend",f);r.table.element.classList.remove("tabulator-block-select");r.table.options.rowResized.call(this.table,t.getComponent())}var r=this;r.table.element.classList.add("tabulator-block-select");n.stopPropagation();r.startY=typeof n.screenY=="undefined"?n.touches[0].screenY:n.screenY;r.startHeight=t.getHeight();document.body.addEventListener("mousemove",u);document.body.addEventListener("mouseup",f);i.addEventListener("touchmove",u,{passive:!0});i.addEventListener("touchend",f)},n.prototype.registerModule("resizeRows",ei),oi=function(n){this.table=n;this.binding=!1;this.observer=!1;this.containerObserver=!1;this.tableHeight=0;this.tableWidth=0;this.containerHeight=0;this.containerWidth=0;this.autoResize=!1},oi.prototype.initialize=function(){var t=this,n=this.table,i;this.tableHeight=n.element.clientHeight;this.tableWidth=n.element.clientWidth;n.element.parentNode&&(this.containerHeight=n.element.parentNode.clientHeight,this.containerWidth=n.element.parentNode.clientWidth);typeof ResizeObserver!="undefined"&&n.rowManager.getRenderMode()==="virtual"?(this.autoResize=!0,this.observer=new ResizeObserver(function(i){if(!n.browserMobile||n.browserMobile&&!n.modules.edit.currentCell){var r=Math.floor(i[0].contentRect.height),u=Math.floor(i[0].contentRect.width);(t.tableHeight!=r||t.tableWidth!=u)&&(t.tableHeight=r,t.tableWidth=u,n.element.parentNode&&(t.containerHeight=n.element.parentNode.clientHeight,t.containerWidth=n.element.parentNode.clientWidth),n.options.virtualDomHoz&&n.vdomHoz.reinitialize(!0),n.redraw())}}),this.observer.observe(n.element),i=window.getComputedStyle(n.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(i.getPropertyValue("max-height")||i.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(function(i){if(!n.browserMobile||n.browserMobile&&!n.modules.edit.currentCell){var r=Math.floor(i[0].contentRect.height),u=Math.floor(i[0].contentRect.width);(t.containerHeight!=r||t.containerWidth!=u)&&(t.containerHeight=r,t.containerWidth=u,t.tableHeight=n.element.clientHeight,t.tableWidth=n.element.clientWidth);n.options.virtualDomHoz&&n.vdomHoz.reinitialize(!0);n.redraw()}}),this.containerObserver.observe(this.table.element.parentNode))):(this.binding=function(){n.browserMobile&&(!n.browserMobile||n.modules.edit.currentCell)||(n.options.virtualDomHoz&&n.vdomHoz.reinitialize(!0),n.redraw())},window.addEventListener("resize",this.binding))},oi.prototype.clearBindings=function(){this.binding&&window.removeEventListener("resize",this.binding);this.observer&&this.observer.unobserve(this.table.element);this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)},n.prototype.registerModule("resizeTable",oi),st=function(n){this.table=n;this.columns=[];this.hiddenColumns=[];this.mode="";this.index=0;this.collapseFormatter=[];this.collapseStartOpen=!0;this.collapseHandleColumn=!1},st.prototype.initialize=function(){var f=this,n=[],r,u;this.mode=this.table.options.responsiveLayout;this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData;this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen;this.hiddenColumns=[];this.table.columnManager.columnsByIndex.forEach(function(t,i){t.modules.responsive&&t.modules.responsive.order&&t.modules.responsive.visible&&(t.modules.responsive.index=i,n.push(t),t.visible||f.mode!=="collapse"||f.hiddenColumns.push(t))});n=n.reverse();n=n.sort(function(n,t){var i=t.modules.responsive.order-n.modules.responsive.order;return i||t.modules.responsive.index-n.modules.responsive.index});this.columns=n;this.mode==="collapse"&&this.generateCollapsedContent();for(var t=this.table.columnManager.columnsByIndex,e=Array.isArray(t),i=0,t=e?t:t[Symbol.iterator]();;){if(e){if(i>=t.length)break;r=t[i++]}else{if(i=t.next(),i.done)break;r=i.value}if(u=r,u.definition.formatter=="responsiveCollapse"){this.collapseHandleColumn=u;break}}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())},st.prototype.initializeColumn=function(n){var t=n.getDefinition();n.modules.responsive={order:typeof t.responsive=="undefined"?1:t.responsive,visible:t.visible===!1?!1:!0}},st.prototype.initializeRow=function(n){var t;n.type!=="calc"&&(t=document.createElement("div"),t.classList.add("tabulator-responsive-collapse"),n.modules.responsiveLayout={element:t,open:this.collapseStartOpen},this.collapseStartOpen||(t.style.display="none"))},st.prototype.layoutRow=function(n){var t=n.getElement();n.modules.responsiveLayout&&(t.appendChild(n.modules.responsiveLayout.element),this.generateCollapsedRowContent(n))},st.prototype.updateColumnVisibility=function(n,t){n.modules.responsive&&(n.modules.responsive.visible=t,this.initialize())},st.prototype.hideColumn=function(n){var t=this.hiddenColumns.length;n.hide(!1,!0);this.mode==="collapse"&&(this.hiddenColumns.unshift(n),this.generateCollapsedContent(),this.collapseHandleColumn&&!t&&this.collapseHandleColumn.show())},st.prototype.showColumn=function(n){var t;n.show(!1,!0);n.setWidth(n.getWidth());this.mode==="collapse"&&(t=this.hiddenColumns.indexOf(n),t>-1&&this.hiddenColumns.splice(t,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())},st.prototype.update=function(){for(var n=this,t=!0,f,i,u,r;t;)f=n.table.modules.layout.getMode()=="fitColumns"?n.table.columnManager.getFlexBaseWidth():n.table.columnManager.getWidth(),i=(n.table.options.headerVisible?n.table.columnManager.element.clientWidth:n.table.element.clientWidth)-f,i<0?(u=n.columns[n.index],u?(n.hideColumn(u),n.index++):t=!1):(r=n.columns[n.index-1],r?i>0?i>=r.getWidth()?(n.showColumn(r),n.index--):t=!1:t=!1:t=!1),n.table.rowManager.activeRowsCount||n.table.rowManager.renderEmptyScroll()},st.prototype.generateCollapsedContent=function(){var n=this,t=this.table.rowManager.getDisplayRows();t.forEach(function(t){n.generateCollapsedRowContent(t)})},st.prototype.generateCollapsedRowContent=function(n){var t,i;if(n.modules.responsiveLayout){for(t=n.modules.responsiveLayout.element;t.firstChild;)t.removeChild(t.firstChild);i=this.collapseFormatter(this.generateCollapsedRowData(n));i&&t.appendChild(i)}},st.prototype.generateCollapsedRowData=function(n){var i=this,r=n.getData(),t=[],u;return this.hiddenColumns.forEach(function(f){var e=f.getFieldValue(r);f.definition.title&&f.field&&(f.modules.format&&i.table.options.responsiveLayoutCollapseUseFormatters?(u={value:!1,data:{},getValue:function(){return e},getData:function(){return r},getElement:function(){return document.createElement("div")},getRow:function(){return n.getComponent()},getColumn:function(){return f.getComponent()}},t.push({field:f.field,title:f.definition.title,value:f.modules.format.formatter.call(i.table.modules.format,u,f.modules.format.params)})):t.push({field:f.field,title:f.definition.title,value:e}))}),t},st.prototype.formatCollapsedData=function(n){var t=document.createElement("table");return n.forEach(function(n){var i=document.createElement("tr"),f=document.createElement("td"),r=document.createElement("td"),u,e=document.createElement("strong");f.appendChild(e);this.table.modules.localize.bind("columns|"+n.field,function(t){e.innerText=t||n.title});n.value instanceof Node?(u=document.createElement("div"),u.appendChild(n.value),r.appendChild(u)):r.innerHTML=n.value;i.appendChild(f);i.appendChild(r);t.appendChild(i)},this),Object.keys(n).length?t:""},n.prototype.registerModule("responsiveLayout",st),tt=function(n){this.table=n;this.selecting=!1;this.lastClickedRow=!1;this.selectPrev=[];this.selectedRows=[];this.headerCheckboxElement=null},tt.prototype.clearSelectionData=function(n){this.selecting=!1;this.lastClickedRow=!1;this.selectPrev=[];this.selectedRows=[];n||this._rowSelectionChanged()},tt.prototype.initializeRow=function(n){var t=this,i=n.getElement(),r=function r(){setTimeout(function(){t.selecting=!1},50);document.body.removeEventListener("mouseup",r)};n.modules.select={selected:!1};t.table.options.selectableCheck.call(this.table,n.getComponent())?(i.classList.add("tabulator-selectable"),i.classList.remove("tabulator-unselectable"),t.table.options.selectable&&t.table.options.selectable!="highlight"&&(t.table.options.selectableRangeMode==="click"?i.addEventListener("click",function(i){if(i.shiftKey){t.table._clearSelection();t.lastClickedRow=t.lastClickedRow||n;var u=t.table.rowManager.getDisplayRowIndex(t.lastClickedRow),f=t.table.rowManager.getDisplayRowIndex(n),e=u<=f?u:f,o=u>=f?u:f,s=t.table.rowManager.getDisplayRows().slice(0),r=s.splice(e,o-e+1);i.ctrlKey||i.metaKey?(r.forEach(function(i){i!==t.lastClickedRow&&(t.table.options.selectable===!0||t.isRowSelected(n)?t.toggleRow(i):t.selectedRows.length<t.table.options.selectable&&t.toggleRow(i))}),t.lastClickedRow=n):(t.deselectRows(undefined,!0),t.table.options.selectable!==!0&&r.length>t.table.options.selectable&&(r=r.slice(0,t.table.options.selectable)),t.selectRows(r));t.table._clearSelection()}else i.ctrlKey||i.metaKey?(t.toggleRow(n),t.lastClickedRow=n):(t.deselectRows(undefined,!0),t.selectRows(n),t.lastClickedRow=n)}):(i.addEventListener("click",function(){t.table.modExists("edit")&&t.table.modules.edit.getCurrentCell()||t.table._clearSelection();t.selecting||t.toggleRow(n)}),i.addEventListener("mousedown",function(i){if(i.shiftKey)return t.table._clearSelection(),t.selecting=!0,t.selectPrev=[],document.body.addEventListener("mouseup",r),document.body.addEventListener("keyup",r),t.toggleRow(n),!1}),i.addEventListener("mouseenter",function(){t.selecting&&(t.table._clearSelection(),t.toggleRow(n),t.selectPrev[1]==n&&t.toggleRow(t.selectPrev[0]))}),i.addEventListener("mouseout",function(){t.selecting&&(t.table._clearSelection(),t.selectPrev.unshift(n))})))):(i.classList.add("tabulator-unselectable"),i.classList.remove("tabulator-selectable"))},tt.prototype.toggleRow=function(n){this.table.options.selectableCheck.call(this.table,n.getComponent())&&(n.modules.select&&n.modules.select.selected?this._deselectRow(n):this._selectRow(n))},tt.prototype.selectRows=function(n){var t=this,i;switch(typeof n=="undefined"?"undefined":_typeof(n)){case"undefined":this.table.rowManager.rows.forEach(function(n){t._selectRow(n,!0,!0)});this._rowSelectionChanged();break;case"string":i=this.table.rowManager.findRow(n);i?this._selectRow(i,!0,!0):this.table.rowManager.getRows(n).forEach(function(n){t._selectRow(n,!0,!0)});this._rowSelectionChanged();break;default:Array.isArray(n)?(n.forEach(function(n){t._selectRow(n,!0,!0)}),this._rowSelectionChanged()):this._selectRow(n,!1,!0)}},tt.prototype._selectRow=function(n,t,i){var r;if(!isNaN(this.table.options.selectable)&&this.table.options.selectable!==!0&&!i&&this.selectedRows.length>=this.table.options.selectable)if(this.table.options.selectableRollingSelection)this._deselectRow(this.selectedRows[0]);else return!1;r=this.table.rowManager.findRow(n);r?this.selectedRows.indexOf(r)==-1&&(r.modules.select||(r.modules.select={}),r.modules.select.selected=!0,r.modules.select.checkboxEl&&(r.modules.select.checkboxEl.checked=!0),r.getElement().classList.add("tabulator-selected"),this.selectedRows.push(r),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(r,!0),t||this.table.options.rowSelected.call(this.table,r.getComponent()),this._rowSelectionChanged(t)):t||console.warn("Selection Error - No such row found, ignoring selection:"+n)},tt.prototype.isRowSelected=function(n){return this.selectedRows.indexOf(n)!==-1},tt.prototype.deselectRows=function(n,t){var i=this,u,r;if(typeof n=="undefined"){for(u=i.selectedRows.length,r=0;r<u;r++)i._deselectRow(i.selectedRows[0],!0);i._rowSelectionChanged(t)}else Array.isArray(n)?(n.forEach(function(n){i._deselectRow(n,!0)}),i._rowSelectionChanged(t)):i._deselectRow(n,t)},tt.prototype._deselectRow=function(n,t){var r=this,i=r.table.rowManager.findRow(n),u;i?(u=r.selectedRows.findIndex(function(n){return n==i}),u>-1&&(i.modules.select||(i.modules.select={}),i.modules.select.selected=!1,i.modules.select.checkboxEl&&(i.modules.select.checkboxEl.checked=!1),i.getElement().classList.remove("tabulator-selected"),r.selectedRows.splice(u,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(i,!1),t||r.table.options.rowDeselected.call(this.table,i.getComponent()),r._rowSelectionChanged(t))):t||console.warn("Deselection Error - No such row found, ignoring selection:"+n)},tt.prototype.getSelectedData=function(){var n=[];return this.selectedRows.forEach(function(t){n.push(t.getData())}),n},tt.prototype.getSelectedRows=function(){var n=[];return this.selectedRows.forEach(function(t){n.push(t.getComponent())}),n},tt.prototype._rowSelectionChanged=function(n){this.headerCheckboxElement&&(this.selectedRows.length===0?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1));n||this.table.options.rowSelectionChanged.call(this.table,this.getSelectedData(),this.getSelectedRows())},tt.prototype.registerRowSelectCheckbox=function(n,t){n._row.modules.select||(n._row.modules.select={});n._row.modules.select.checkboxEl=t},tt.prototype.registerHeaderSelectCheckbox=function(n){this.headerCheckboxElement=n},tt.prototype.childRowSelection=function(n,t){var s=this.table.modules.dataTree.getChildren(n),e,c,o,a;if(t)for(var i=s,h=Array.isArray(i),u=0,i=h?i:i[Symbol.iterator]();;){if(h){if(u>=i.length)break;e=i[u++]}else{if(u=i.next(),u.done)break;e=u.value}c=e;this._selectRow(c,!0)}else for(var r=s,l=Array.isArray(r),f=0,r=l?r:r[Symbol.iterator]();;){if(l){if(f>=r.length)break;o=r[f++]}else{if(f=r.next(),f.done)break;o=f.value}a=o;this._deselectRow(a,!0)}},n.prototype.registerModule("selectRow",tt),ht=function(n){this.table=n;this.sortList=[];this.changed=!1},ht.prototype.initializeColumn=function(n,t){var i=this,u=!1,f,r;switch(_typeof(n.definition.sorter)){case"string":i.sorters[n.definition.sorter]?u=i.sorters[n.definition.sorter]:console.warn("Sort Error - No such sorter found: ",n.definition.sorter);break;case"function":u=n.definition.sorter}n.modules.sort={sorter:u,dir:"none",params:n.definition.sorterParams||{},startingDir:n.definition.headerSortStartingDir||"asc",tristate:typeof n.definition.headerSortTristate!="undefined"?n.definition.headerSortTristate:this.table.options.headerSortTristate};(typeof n.definition.headerSort=="undefined"?this.table.options.headerSort!==!1:n.definition.headerSort!==!1)&&(f=n.getElement(),f.classList.add("tabulator-sortable"),r=document.createElement("div"),r.classList.add("tabulator-col-sorter"),_typeof(this.table.options.headerSortElement)=="object"?r.appendChild(this.table.options.headerSortElement):r.innerHTML=this.table.options.headerSortElement,t.appendChild(r),n.modules.sort.element=r,f.addEventListener("click",function(t){var r="",u=[],f=!1;if(n.modules.sort){if(n.modules.sort.tristate)r=n.modules.sort.dir=="none"?n.modules.sort.startingDir:n.modules.sort.dir==n.modules.sort.startingDir?n.modules.sort.dir=="asc"?"desc":"asc":"none";else switch(n.modules.sort.dir){case"asc":r="desc";break;case"desc":r="asc";break;default:r=n.modules.sort.startingDir}i.table.options.columnHeaderSortMulti&&(t.shiftKey||t.ctrlKey)?(u=i.getSort(),f=u.findIndex(function(t){return t.field===n.getField()}),f>-1?(u[f].dir=r,f!=u.length-1&&(f=u.splice(f,1)[0],r!="none"&&u.push(f))):r!="none"&&u.push({column:n,dir:r}),i.setSort(u)):r=="none"?i.clear():i.setSort(n,r);i.table.rowManager.sorterRefresh(!i.sortList.length)}}))},ht.prototype.hasChanged=function(){var n=this.changed;return this.changed=!1,n},ht.prototype.getSort=function(){var t=this,n=[];return t.sortList.forEach(function(t){t.column&&n.push({column:t.column.getComponent(),field:t.column.getField(),dir:t.dir})}),n},ht.prototype.setSort=function(n,t){var i=this,r=[];Array.isArray(n)||(n=[{column:n,dir:t}]);n.forEach(function(n){var t;t=i.table.columnManager.findColumn(n.column);t?(n.column=t,r.push(n),i.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",n.column)});i.sortList=r;this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.sort&&this.table.modules.persistence.save("sort")},ht.prototype.clear=function(){this.setSort([])},ht.prototype.findSorter=function(n){var r=this.table.rowManager.activeRows[0],i="string",u,t;if(r&&(r=r.getData(),u=n.getField(),u)){t=n.getFieldValue(r);switch(typeof t=="undefined"?"undefined":_typeof(t)){case"undefined":i="string";break;case"boolean":i="boolean";break;default:isNaN(t)||t===""?t.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(i="alphanum"):i="number"}}return this.sorters[i]},ht.prototype.sort=function(n){var t=this,r=this.table.options.sortOrderReverse?t.sortList.slice().reverse():t.sortList,i=[],u=[];t.table.options.dataSorting&&t.table.options.dataSorting.call(t.table,t.getSort());t.clearColumnHeaders();t.table.options.ajaxSorting?r.forEach(function(n){t.setColumnHeader(n.column,n.dir)}):(r.forEach(function(n){var r=n.column.modules.sort;n.column&&r&&(r.sorter||(r.sorter=t.findSorter(n.column)),n.params=typeof r.params=="function"?r.params(n.column.getComponent(),n.dir):r.params,i.push(n));t.setColumnHeader(n.column,n.dir)}),i.length&&t._sortItems(n,i));t.table.options.dataSorted&&(n.forEach(function(n){u.push(n.getComponent())}),t.table.options.dataSorted.call(t.table,t.getSort(),u))},ht.prototype.clearColumnHeaders=function(){this.table.columnManager.getRealColumns().forEach(function(n){n.modules.sort&&(n.modules.sort.dir="none",n.getElement().setAttribute("aria-sort","none"))})},ht.prototype.setColumnHeader=function(n,t){n.modules.sort.dir=t;n.getElement().setAttribute("aria-sort",t)},ht.prototype._sortItems=function(n,t){var i=this,r=t.length-1;n.sort(function(n,u){for(var f,e,o=r;o>=0;o--)if(f=t[o],e=i._sortRow(n,u,f.column,f.dir,f.params),e!==0)break;return e})},ht.prototype._sortRow=function(n,t,i,r,u){var f,e,o=r=="asc"?n:t,s=r=="asc"?t:n;return n=i.getFieldValue(o.getData()),t=i.getFieldValue(s.getData()),n=typeof n!="undefined"?n:"",t=typeof t!="undefined"?t:"",i.modules.sort.sorter.call(this,n,t,f,e,i.getComponent(),r,u)},ht.prototype.sorters={number:function(n,t,i,r,u,f,e){var c=e.alignEmptyValues,s=e.decimalSeparator,h=e.thousandSeparator,o=0;if(n=String(n),t=String(t),h&&(n=n.split(h).join(""),t=t.split(h).join("")),s&&(n=n.split(s).join("."),t=t.split(s).join(".")),n=parseFloat(n),t=parseFloat(t),isNaN(n))o=isNaN(t)?0:-1;else if(isNaN(t))o=1;else return n-t;return(c==="top"&&f==="desc"||c==="bottom"&&f==="asc")&&(o*=-1),o},string:function(n,t,i,r,u,f,e){var h=e.alignEmptyValues,o=0,s;if(n){if(t){switch(_typeof(e.locale)){case"boolean":e.locale&&(s=this.table.modules.localize.getLocale());break;case"string":s=e.locale}return String(n).toLowerCase().localeCompare(String(t).toLowerCase(),s)}o=1}else o=t?-1:0;return(h==="top"&&f==="desc"||h==="bottom"&&f==="asc")&&(o*=-1),o},date:function(n,t,i,r,u,f,e){return e.format||(e.format="DD/MM/YYYY"),this.sorters.datetime.call(this,n,t,i,r,u,f,e)},time:function(n,t,i,r,u,f,e){return e.format||(e.format="HH:mm"),this.sorters.datetime.call(this,n,t,i,r,u,f,e)},datetime:function(n,t,i,r,u,f,e){var s=e.format||"DD/MM/YYYY HH:mm:ss",h=e.alignEmptyValues,o=0;if(typeof moment!="undefined"){if(n=moment(n,s),t=moment(t,s),n.isValid()){if(t.isValid())return n-t;o=1}else o=t.isValid()?-1:0;return(h==="top"&&f==="desc"||h==="bottom"&&f==="asc")&&(o*=-1),o}console.error("Sort Error - 'datetime' sorter is dependant on moment.js")},boolean:function(n,t){var i=n===!0||n==="true"||n==="True"||n===1?1:0,r=t===!0||t==="true"||t==="True"||t===1?1:0;return i-r},array:function(n,t,i,r,u,f,e){function l(n){switch(a){case"length":return n.length;case"sum":return n.reduce(function(n,t){return n+t});case"max":return Math.max.apply(null,n);case"min":return Math.min.apply(null,n);case"avg":return n.reduce(function(n,t){return n+t})/n.length}}var s=0,h=0,a=e.type||"length",o=e.alignEmptyValues,c=0;if(Array.isArray(n)){if(Array.isArray(t))return s=n?l(n):0,h=t?l(t):0,s-h;o=1}else o=Array.isArray(t)?-1:0;return(o==="top"&&f==="desc"||o==="bottom"&&f==="asc")&&(c*=-1),c},exists:function(n,t){var i=typeof n=="undefined"?0:1,r=typeof t=="undefined"?0:1;return i-r},alphanum:function(n,t,i,r,u,f,e){var o,s,h,c,a=0,v,y=/(\d+)|(\D+)/g,p=/\d/,w=e.alignEmptyValues,l=0;if(n||n===0){if(t||t===0){if(isFinite(n)&&isFinite(t))return n-t;if(o=String(n).toLowerCase(),s=String(t).toLowerCase(),o===s)return 0;if(!(p.test(o)&&p.test(s)))return o>s?1:-1;for(o=o.match(y),s=s.match(y),v=o.length>s.length?s.length:o.length;a<v;)if(h=o[a],c=s[a++],h!==c)return isFinite(h)&&isFinite(c)?(h.charAt(0)==="0"&&(h="."+h),c.charAt(0)==="0"&&(c="."+c),h-c):h>c?1:-1;return o.length>s.length}l=1}else l=!t&&t!==0?0:-1;return(w==="top"&&f==="desc"||w==="bottom"&&f==="asc")&&(l*=-1),l}},n.prototype.registerModule("sort",ht),kt=function(n){this.table=n;this.invalidCells=[]},kt.prototype.initializeColumn=function(n){var r=this,i=[],t;n.definition.validator&&(Array.isArray(n.definition.validator)?n.definition.validator.forEach(function(n){t=r._extractValidator(n);t&&i.push(t)}):(t=this._extractValidator(n.definition.validator),t&&i.push(t)),n.modules.validate=i.length?i:!1)},kt.prototype._extractValidator=function(n){var i,r,t;switch(typeof n=="undefined"?"undefined":_typeof(n)){case"string":return t=n.indexOf(":"),t>-1?(i=n.substring(0,t),r=n.substring(t+1)):i=n,this._buildValidator(i,r);case"function":return this._buildValidator(n);case"object":return this._buildValidator(n.type,n.parameters)}},kt.prototype._buildValidator=function(n,t){var i=typeof n=="function"?n:this.validators[n];return i?{type:typeof n=="function"?"function":n,func:i,params:t}:(console.warn("Validator Setup Error - No matching validator found:",n),!1)},kt.prototype.validate=function(n,t,i){var f=this,r=[],u=this.invalidCells.indexOf(t);return n&&n.forEach(function(n){n.func.call(f,t.getComponent(),i,n.params)||r.push({type:n.type,parameters:n.params})}),r=r.length?r:!0,t.modules.validate||(t.modules.validate={}),r===!0?(t.modules.validate.invalid=!1,t.getElement().classList.remove("tabulator-validation-fail"),u>-1&&this.invalidCells.splice(u,1)):(t.modules.validate.invalid=!0,this.table.options.validationMode!=="manual"&&t.getElement().classList.add("tabulator-validation-fail"),u==-1&&this.invalidCells.push(t)),r},kt.prototype.getInvalidCells=function(){var n=[];return this.invalidCells.forEach(function(t){n.push(t.getComponent())}),n},kt.prototype.clearValidation=function(n){var t;n.modules.validate&&n.modules.validate.invalid&&(n.getElement().classList.remove("tabulator-validation-fail"),n.modules.validate.invalid=!1,t=this.invalidCells.indexOf(n),t>-1&&this.invalidCells.splice(t,1))},kt.prototype.validators={integer:function(n,t){return t===""||t===null||typeof t=="undefined"?!0:(t=Number(t),typeof t=="number"&&isFinite(t)&&Math.floor(t)===t)},float:function(n,t){return t===""||t===null||typeof t=="undefined"?!0:(t=Number(t),typeof t=="number"&&isFinite(t)&&t%1!=0)},numeric:function(n,t){return t===""||t===null||typeof t=="undefined"?!0:!isNaN(t)},string:function(n,t){return t===""||t===null||typeof t=="undefined"?!0:isNaN(t)},max:function(n,t,i){return t===""||t===null||typeof t=="undefined"?!0:parseFloat(t)<=i},min:function(n,t,i){return t===""||t===null||typeof t=="undefined"?!0:parseFloat(t)>=i},starts:function(n,t,i){return t===""||t===null||typeof t=="undefined"?!0:String(t).toLowerCase().startsWith(String(i).toLowerCase())},ends:function(n,t,i){return t===""||t===null||typeof t=="undefined"?!0:String(t).toLowerCase().endsWith(String(i).toLowerCase())},minLength:function(n,t,i){return t===""||t===null||typeof t=="undefined"?!0:String(t).length>=i},maxLength:function(n,t,i){return t===""||t===null||typeof t=="undefined"?!0:String(t).length<=i},"in":function(n,t,i){return t===""||t===null||typeof t=="undefined"?!0:(typeof i=="string"&&(i=i.split("|")),t===""||i.indexOf(t)>-1)},regex:function(n,t,i){if(t===""||t===null||typeof t=="undefined")return!0;var r=new RegExp(i);return r.test(t)},unique:function(n,t){if(t===""||t===null||typeof t=="undefined")return!0;var i=!0,r=n.getData(),u=n.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(n){var f=n.getData();f!==r&&t==u.getFieldValue(f)&&(i=!1)}),i},required:function(n,t){return t!==""&&t!==null&&typeof t!="undefined"}},n.prototype.registerModule("validate",kt),n});